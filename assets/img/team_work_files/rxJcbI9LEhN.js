if (self.CavalryLogger) { CavalryLogger.start_js(["X\/gPp"]); }

__d("CometMarketplaceInboxLabelChatDialogQuery$Parameters",[],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:"3372974126058277",metadata:{},name:"CometMarketplaceInboxLabelChatDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("FBPayHubTransactionDetailDialogQuery$Parameters",[],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:"4757762144298580",metadata:{},name:"FBPayHubTransactionDetailDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWComposerXacDisclosureRelayQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"nux_id"}],b=[{kind:"Variable",name:"nux_id",variableName:"nux_id"}],c={kind:"InlineFragment",selections:[{documentName:"MWComposerXacDisclosureRelayQuery",fragmentName:"MWComposerXacDisclosureView_nux",fragmentPropName:"nux",kind:"ModuleImport"}],type:"DefaultNUX",abstractKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWComposerXacDisclosureRelayQuery",selections:[{alias:"xacThreadDisclosureNux",args:b,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[c],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWComposerXacDisclosureRelayQuery",selections:[{alias:"xacThreadDisclosureNux",args:b,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c],storageKey:null}]},params:{id:"3987561491294147",metadata:{},name:"MWComposerXacDisclosureRelayQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useMessengerUnsendNUXQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],b=[{kind:"Variable",name:"nux_id",variableName:"id"}],c={alias:null,args:null,kind:"ScalarField",name:"should_show",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useMessengerUnsendNUXQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[c],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useMessengerUnsendNUXQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"3302322696546660",metadata:{},name:"useMessengerUnsendNUXQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometMarketplaceInboxLabelChatDialog.entrypoint",["CometMarketplaceInboxLabelChatDialogQuery$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f){"use strict";a={getPreloadProps:function(a){return{queries:{cometMarketplaceInboxLabelChatDialogQueryReference:{parameters:b("CometMarketplaceInboxLabelChatDialogQuery$Parameters"),variables:{id:a.thread_id}}}}},root:b("JSResourceForInteraction")("CometMarketplaceInboxLabelChatDialog.react").__setRef("CometMarketplaceInboxLabelChatDialog.entrypoint")};e.exports=a}),null);
__d("FBPayHubTransactionDetailDialog.entrypoint",["JSResourceForInteraction","WebPixelRatio","FBPayHubTransactionDetailDialogQuery$Parameters"],(function(a,b,c,d,e,f){"use strict";a={getPreloadProps:function(a){a=a.transactionID;return{queries:{fBPayHubTransactionDetailDialogQueryReference:{parameters:b("FBPayHubTransactionDetailDialogQuery$Parameters"),variables:{scale:b("WebPixelRatio").get(),transaction_id:a}}}}},root:b("JSResourceForInteraction")("FBPayHubTransactionDetailDialog.react").__setRef("FBPayHubTransactionDetailDialog.entrypoint")};e.exports=a}),null);
__d("MWLSAttachmentAttribution.bs",["bs_int64"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.X,d=a.Y;if(c!==void 0&&d!==void 0)return{id:b("bs_int64").to_string(c),iconUrl:a.Z,name:d}}f.get=a}),null);
__d("MWLSThreadLastReadWatermarkTimestamp.bs",["bs_int64","React","SkytaleDB","bs_caml_int64","MWThreadKey.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);a=b("bs_int64").to_string(d);a=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,{hd:d,tl:0}),function(a){return a.j})},[c,a]));if(a!==void 0)return b("bs_caml_int64").to_float(a)}f.useHook=a}),null);
__d("MWLSAddParticipantsToGroup.bs",["LS.bs","bs_curry","LSVec.bs","React","MWLSActor.bs","MWThreadKey.bs","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","LSMailboxAddParticipantToGroupThreadStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0);a=b("MWLSActor.bs").useActor(void 0);var d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);return g.useCallback(function(a){var e=b("LSTransaction.bs").run(c,function(c){return b("LSMailboxAddParticipantToGroupThreadStoredProcedure")(d,b("LSVec.bs").make(a),b("bs_curry")._1(b("LS.bs").make,c))},"readWrite");b("promiseDone")(e,void 0,void 0)},[c,a,d])}f.useHook=a}),null);
__d("MWLSAttachmentCta.bs",["SkytaleDB","bs_caml_int64","SkytaleDBQuery.bs"],(function(a,b,c,d,e,f){"use strict";c={a:b("bs_caml_int64").zero,b:"",c:b("bs_caml_int64").zero,d:b("bs_caml_int64").zero,e:"",f:"",g:"fallback",h:void 0,i:void 0,j:void 0,k:void 0,l:void 0,m:void 0,n:void 0,o:void 0};function a(a,c){return b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"attachment_ctas").asc,{hd:c,tl:0})}f.empty=c;f.getById=a}),null);
__d("MWLSAttachmentItem.bs",["SkytaleDB","bs_belt_Array","bs_belt_Option","SkytaleDBExec.bs","SkytaleDBQuery.bs","MWLSAttachmentCta.bs"],(function(a,b,c,d,e,f){"use strict";function g(a,c,d){return{attachmentItem:a,defaultCta:c,callToActions:b("bs_belt_Array").keepMap(d,function(a){return a})}}function a(a,c){return b("SkytaleDBExec.bs").toArray(b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"attachment_items").asc,{hd:c,tl:0}),function(c){var d=b("bs_belt_Option").mapWithDefault(c.t,void 0,function(c){return b("SkytaleDBExec.bs").first(b("MWLSAttachmentCta.bs").getById(a,c))}),e=b("bs_belt_Array").keepMap([c.A,c.D,c.G],function(a){return a}).map(function(c){return b("SkytaleDBExec.bs").first(b("MWLSAttachmentCta.bs").getById(a,c))});return g(c,d,e)}))}f.project=g;f.getForAttachment=a}),null);
__d("XLightSpeedSecureMessageWebStickerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messaging/lightspeed/securemessage/web/sticker/",{sticker_id:{type:"FBID",required:!0},width:{type:"Int"},height:{type:"Int"},scale:{type:"Float"},media_type:{type:"String"}})}),null);
__d("MWLSAttachment.bs",["FBID.bs","bs_caml_obj","SkytaleDB","bs_belt_Array","bs_caml_array","bs_caml_int64","bs_belt_Option","bs_caml_format","SkytaleDBExec.bs","SkytaleDBQuery.bs","bs_caml_splice_call","MWLSAttachmentCta.bs","MWLSAttachmentItem.bs","recoverableViolation","MessagingAttachmentType.bs","XLightSpeedSecureMessageWebStickerController"],(function(a,b,c,d,e,f){"use strict";var g,h={a:(g=b("bs_caml_int64")).zero,b:g.zero,c:"",d:void 0,e:"",f:g.zero,g:void 0,h:void 0,i:void 0,j:!1,k:!1,l:!1,m:void 0,n:void 0,o:void 0,p:void 0,q:void 0,r:void 0,s:void 0,t:void 0,u:void 0,v:void 0,w:void 0,x:void 0,y:void 0,z:void 0,A:void 0,B:void 0,C:void 0,D:void 0,E:void 0,F:void 0,G:void 0,H:void 0,I:void 0,J:void 0,K:void 0,L:void 0,M:void 0,N:void 0,O:void 0,P:void 0,Q:void 0,R:void 0,S:void 0,T:void 0,U:void 0,V:void 0,W:void 0,X:void 0,Y:void 0,Z:void 0,ba:void 0,bb:void 0,bc:void 0,bd:void 0,be:g.zero,bf:void 0,bg:void 0,bh:void 0,bi:void 0,bj:void 0,bk:void 0,bl:void 0,bm:void 0,bn:void 0,bo:void 0,bp:void 0,bq:void 0,br:void 0,bs:void 0,bt:void 0,bu:void 0,bv:void 0,bw:void 0,bx:void 0,by:void 0,bz:void 0,bA:void 0,bB:void 0,bC:void 0,bD:void 0,bE:void 0,bF:void 0,bG:void 0,bH:void 0,bI:void 0,bJ:void 0,bK:void 0,bL:void 0,bM:void 0,bN:void 0,bO:void 0,bP:void 0,bQ:void 0,bR:void 0,bS:void 0,bT:void 0,bU:g.zero,bV:void 0,bW:void 0,bX:void 0,bY:void 0},i=[],j=[],k=[];g={attachment:h,defaultCta:void 0,callToActions:i,attachmentItems:j,listItemsId:void 0,listItemsDescriptionText:void 0,listItemsSecondaryDescriptionText:void 0,listItems:k};function l(a){return b("bs_belt_Option").map(b("FBID.bs").ofString(a),function(a){return b("XLightSpeedSecureMessageWebStickerController").getURIBuilder().setFBID("sticker_id",a).setString("media_type","image/webp").getURI().toString()})}function a(a,b){return b}function c(a,c){return b("bs_caml_format").caml_int64_of_string(c)}function m(a,c,d,e){return{attachment:a,defaultCta:c,callToActions:d,attachmentItems:e,listItemsId:a.bl,listItemsDescriptionText:a.bm,listItemsSecondaryDescriptionText:a.bn,listItems:b("bs_caml_splice_call").spliceObjApply([],"concat",[[[a.bo,a.bp,a.bq,a.br,a.bs,a.bt],[a.bv,a.bw,a.bx,a.by,a.bz,a.bA],[a.bC,a.bD,a.bE,a.bF,a.bG,a.bH]].map(function(a){var c=a[0];if(c===void 0)return[];var d=b("bs_belt_Option").mapWithDefault(a[2],[],function(a){return a.split(",")}),e=b("bs_belt_Option").mapWithDefault(a[4],[],function(a){return a.split(",")}),f=b("bs_belt_Option").mapWithDefault(a[5],[],function(a){return a.split(",")});return[{id:c,titleText:a[1],contacts:d.map(function(a,c){return{url:a,urlExpirationTimestamp:b("bs_caml_array").get(e,c),urlFallback:b("bs_caml_array").get(f,c)}}),progressBarFilledPercentage:a[3]}]})])}}function n(a){var c=function(a){return a},d=b("bs_caml_format").caml_int64_of_string,e=a.a,f=b("bs_caml_obj").caml_obj_dup(h),g=a.n;f.bi=g!==void 0?a.l:void 0;return{attachment:(f.be=a.f,f.bd=b("bs_belt_Option").map(a.q,d),f.L=b("bs_belt_Option").map(a.p,d),f.K=b("bs_belt_Option").map(a.o,d),f.J=b("bs_belt_Option").map(a.s,function(b){return"data:"+(a.k+(";base64,"+b))}),f.F=a.h,f.D=a.k,f.A=a.h,f.j=!0,f.i=b("bs_belt_Option").map(a.i,d),f.h=b("bs_belt_Option").map(a.j,c),f.f=b("bs_caml_format").caml_int64_of_string(a.g),f.e=a.b,f.d=a.e,f.c=a.d,f.b=a.c,f.a=e,f),defaultCta:void 0,callToActions:i,attachmentItems:j,listItemsId:void 0,listItemsDescriptionText:void 0,listItemsSecondaryDescriptionText:void 0,listItems:k}}function d(a){var c=a.p,d=a.a,e=function(a){return a};c=b("bs_belt_Option").map(c,e);e=c!==void 0?c:(b("recoverableViolation")("Secure Sticker has no fbid "+a.c,"messenger_privacy_web"),"");c=b("bs_caml_obj").caml_obj_dup(h);return{attachment:(c.C=b("bs_caml_int64").one,c.B=l(e),c.A=l(e),c.j=!0,c.f=b("MessagingAttachmentType.bs").sticker,c.e=e,c.c=a.c,c.b=a.b,c.a=d,c),defaultCta:void 0,callToActions:i,attachmentItems:j,listItemsId:void 0,listItemsDescriptionText:void 0,listItemsSecondaryDescriptionText:void 0,listItems:k}}function e(a,c){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"attachments").asc,{hd:c,tl:0}),function(c){var d=b("bs_belt_Option").mapWithDefault(c.o,void 0,function(c){return b("SkytaleDBExec.bs").first(b("MWLSAttachmentCta.bs").getById(a,c))}),e=b("bs_belt_Array").keepMap(b("bs_belt_Array").keepMap([c.r,c.u,c.x],function(a){return a}),function(c){return b("SkytaleDBExec.bs").first(b("MWLSAttachmentCta.bs").getById(a,c))}),f=b("MWLSAttachmentItem.bs").getForAttachment(a,c.e);return m(c,d,e,f)})}function o(a,c){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"secure_attachments").index("threadKeyMessageIdAttachmentId").asc,{hd:c,tl:0}),n)}f.emptyAttachmentRow=h;f.emptyAttachment=g;f._secureStickerPlayableUrl=l;f._makeDecryptString=a;f._makeDecryptInt64=c;f._projectOpen=m;f._projectOtherSecureAttachment=n;f._projectSecureSticker=d;f.getForOpen=e;f.getForSecure=o}),null);
__d("LSMessageReplySourceTypeV2.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";c=(a=b("bs_caml_int64")).zero;d=a.one;e=a.mk(2,0);b=a.mk(3,0);var g=a.mk(4,0);a=a.mk(5,0);f.none=c;f.message=d;f.story=e;f.forward=b;f.fbStoryShare=g;f.igStoryShare=a}),null);
__d("MWLSParserUtils.bs",["bs_caml_int64","bs_belt_Option","recoverableViolation","LSMessageReplySourceTypeV2.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.message.t;if(a!==void 0&&b("bs_caml_int64").neq(a,b("LSMessageReplySourceTypeV2.bs").forward))return!0;else return!1}function c(a){a=a.message.t;if(a!==void 0&&b("bs_caml_int64").eq(a,b("LSMessageReplySourceTypeV2.bs").forward))return!0;else return!1}function d(a){a=b("bs_belt_Option").map(a.defaultCta,function(a){return a.g});if(a!==void 0)return a;else{b("recoverableViolation")("XMA Attachment has unknown CTA Type","messenger_privacy_web");return"fallback"}}function e(a){var b=a.startsWith("blob:");if(!b)return;b=a.length;return a.substring(5,b)}f.isReplyToSomething=a;f.isForwarded=c;f.getXmaType=d;f.getBlobUrl=e}),null);
__d("MNLSXMALayoutType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=b("bs_caml_int64").mk(2,0);f.single=a;f.hscroll=c;f.xcenter=d}),null);
__d("MWLSXmaParser.bs",["FBID.bs","bs_int64","gkx","bs_js_dict","bs_js_json","bs_belt_Array","bs_caml_int64","bs_belt_Option","bs_caml_option","bs_js_null_undefined","MNLSXMALayoutType.bs","MWLSXmaIconParser.bs","recoverableViolation","XCometMessengerControllerRouteBuilder"],(function(a,b,c,d,e,f){"use strict";function g(a){var c=a.g,d;if(c==="xma_rtc_audio"||c==="xma_rtc_missed_audio"||c==="xma_rtc_ended_audio")d={TAG:4,_0:{TAG:22,_0:{threadId:b("FBID.bs").ofStringExn(b("bs_int64").to_string(a.d)),hasVideo:!1}},_1:void 0};else if(c==="xma_rtc_video"||c==="xma_rtc_missed_video"||c==="xma_rtc_ended_video")d={TAG:4,_0:{TAG:22,_0:{threadId:b("FBID.bs").ofStringExn(b("bs_int64").to_string(a.d)),hasVideo:!0}},_1:void 0};else if(c==="xma_postback")d={TAG:1,_0:a.f,_1:a.h,_2:{pageId:b("bs_int64").to_string(a.d),ctaId:b("bs_int64").to_string(a.a)}};else if(c==="xma_p2p_payment_details"||c==="xma_p2p_request_pay"||c==="xma_p2p_payment_details_receive_money"||c==="xma_p2p_verify_info"){var e=a.o;e!==void 0?d={TAG:4,_0:{TAG:21,_0:{id:b("bs_js_null_undefined").fromOption(b("FBID.bs").ofString(b("bs_int64").to_string(e))),currentStatus:null}},_1:void 0}:(b("recoverableViolation")("P2P Transaction encounterd without txn id","messenger_privacy_web"),d=void 0)}else if(c==="xma_static_location_sharing"&&b("gkx")("1597362"))d={TAG:4,_0:{TAG:9,_0:{msgId:a.e}},_1:void 0};else if(c==="xma_poll_details_button"||c==="xma_poll_details_card")d={TAG:5,_0:b("bs_belt_Option").getExn(a.o),_1:b("bs_belt_Option").getExn(a.l)};else if(c==="xma_p2m_checkout"||c==="xma_p2m_payment_details")d={TAG:0,_0:b("XCometMessengerControllerRouteBuilder").buildURL({thread_key:b("FBID.bs").ofStringExn(b("bs_int64").to_string(a.d))}),_1:"_blank",_2:void 0};else if(c==="xma_direct_send"){e=a.l;e!==void 0?d={TAG:4,_0:{TAG:6,_0:JSON.parse(e)},_1:{pageId:b("bs_int64").to_string(a.d),ctaId:b("bs_int64").to_string(a.a)}}:(b("recoverableViolation")("Expected pii_form data but didn't get any","mb_apix"),d=void 0)}else if(c==="xma_feedback_send"){e=a.l;e!==void 0?d={TAG:4,_0:{TAG:5,_0:{feedbackFormId:e}},_1:{pageId:b("bs_int64").to_string(a.d),ctaId:b("bs_int64").to_string(a.a)}}:(b("recoverableViolation")("Expected Feedback info but didn't get any","mb_apix"),d=void 0)}else if(c==="xma_account_link"){e=a.i;e!==void 0?d={TAG:4,_0:{TAG:3,_0:e},_1:{pageId:b("bs_int64").to_string(a.d),ctaId:b("bs_int64").to_string(a.a)}}:(b("recoverableViolation")("Expected an account link url but didn't get any","messenger_web_product"),d=void 0)}else if(c==="xma_open_joinable_call_invite_url")d={TAG:4,_0:{TAG:24,_0:{linkUrl:b("bs_belt_Option").getExn(a.i)}},_1:void 0};else if(c==="xma_montage_share")d=void 0;else if(c==="marketplace_xma_call_function"){e=a.l;d=e!==void 0?{TAG:4,_0:{TAG:26,_0:{messageId:a.e,attachmentFbid:a.b,targetId:b("bs_belt_Option").getExn(a.o),actionType:e}},_1:void 0}:void 0}else if(c==="xma_ctm_in_thread_multiphoto_reply_image"){e=a.l;if(e!==void 0){try{e=b("bs_caml_option").some(JSON.parse(e))}catch(a){e=void 0}if(e!==void 0){e=b("bs_js_json").classify(b("bs_caml_option").valFromOption(e));if(typeof e==="number"||e.TAG!==2)d=void 0;else{e=e._0;var f=b("bs_js_dict").get(e,"action_prefill"),g=b("bs_js_dict").get(e,"reply_image_uri");if(f!==void 0&&g!==void 0){f=b("bs_js_json").decodeString(b("bs_caml_option").valFromOption(f));g=b("bs_js_json").decodeString(b("bs_caml_option").valFromOption(g));if(f!==void 0&&g!==void 0){var h='{"in_thread_multiphoto_xma_reply": true}',i=a.h,j=b("bs_js_dict").get(e,"ad_id");if(j!==void 0){j=b("bs_js_json").decodeNumber(b("bs_caml_option").valFromOption(j));j=j!==void 0?b("FBID.bs").ofString(j.toString()):void 0}else j=void 0;var k=b("bs_js_dict").get(e,"customer_id");if(k!==void 0){k=b("bs_js_json").decodeNumber(b("bs_caml_option").valFromOption(k));k=k!==void 0?b("FBID.bs").ofString(k.toString()):void 0}else k=void 0;var l=b("bs_js_dict").get(e,"index");e=b("bs_js_dict").get(e,"page_id");if(e!==void 0){e=b("bs_js_json").decodeNumber(b("bs_caml_option").valFromOption(e));e=e!==void 0?b("FBID.bs").ofString(e.toString()):void 0}else e=void 0;d={TAG:4,_0:{TAG:25,_0:{message:f,image:g,platformToken:i!==void 0&&i!==""?i:h,loggingDetails:{ad_id:j,consumer_id:k,index:l!==void 0?b("bs_js_json").decodeNumber(b("bs_caml_option").valFromOption(l)):void 0,page_id:e}}},_1:void 0}}else d=void 0}else d=void 0}}else d=void 0}else d=void 0}else{f=a.i;g=a.l;if(g!==void 0)d={TAG:3,_0:g};else if(f!==void 0)d={TAG:0,_0:f,_1:"_blank",_2:{pageId:b("bs_int64").to_string(a.d),ctaId:b("bs_int64").to_string(a.a)}};else{i=["Title: "+a.f,"Type: "+c,"PlatformTokenPresent: "+b("bs_belt_Option").mapWithDefault(a.h,"false",function(a){return"true"}),"ActionUrlPresent: "+b("bs_belt_Option").mapWithDefault(a.i,"false",function(a){return"true"}),"actionContentBlobPresent: "+b("bs_belt_Option").mapWithDefault(a.l,"false",function(a){return"true"})].join(", ");b("recoverableViolation")("Unknown CTA encountered while parsing XMA. "+i,"messenger_privacy_web");d=void 0}}return b("bs_belt_Option").map(d,function(b){return{title:a.f,action:b}})}function h(a,c,d,e,f,g,h,i,j){c=b("bs_belt_Option").mapWithDefault(c,0,b("bs_caml_int64").to_int32);d=b("bs_belt_Option").mapWithDefault(d,0,b("bs_caml_int64").to_int32);a=b("bs_belt_Option").isNone(a)?i:c===d;if(f!==void 0)if(b("bs_belt_Option").mapWithDefault(g,!1,function(a){return a.includes("gif")}))return{TAG:0,_0:f,_1:{expand:a}};else if(b("bs_belt_Option").mapWithDefault(g,!1,function(a){return a.includes("video")}))return{TAG:1,_0:f,_1:b("FBID.bs").ofStringExn(h),_2:{height:d,width:c,expand:a},_3:b("bs_belt_Option").getWithDefault(j,!1)};else return;else if(e!==void 0)return{TAG:0,_0:e,_1:{expand:a}};else return}function i(a,c){var d=b("bs_belt_Array").keepMap(c.callToActions,g),e=b("bs_belt_Option").map(b("bs_belt_Option").flatMap(c.defaultCta,g),function(a){return a.action});if(e!==void 0)e={_0:e};else{var f=c.attachment.Q;e=f!==void 0?{_0:{TAG:0,_0:f,_1:"_blank",_2:void 0}}:void 0}return{preview:h(c.attachment.M,c.attachment.K,c.attachment.L,c.attachment.F,c.attachment.A,c.attachment.D,c.attachment.e,a,c.attachment.bX),title:c.attachment.R,description:c.attachment.S,headerIcon:b("bs_belt_Option").flatMap(c.attachment.bL,b("MWLSXmaIconParser.bs").parse),headerTitle:c.attachment.bP,icon:b("bs_belt_Option").flatMap(c.attachment.bf,b("MWLSXmaIconParser.bs").parse),defaultAction:e,action:d.length!==0?{_0:d}:void 0,canForward:c.attachment.k,listItemsId:c.listItemsId,listItemsDescriptionText:c.listItemsDescriptionText,listItemsSecondaryDescriptionText:c.listItemsSecondaryDescriptionText,listItems:c.listItems}}function j(a,c,d){var e=d.attachmentItem;a=a!==void 0?a:!1;var f=b("bs_belt_Array").keepMap(d.callToActions,g),i=b("bs_belt_Option").map(b("bs_belt_Option").flatMap(d.defaultCta,g),function(a){return a.action});return{preview:h(d.attachmentItem.s,d.attachmentItem.q,d.attachmentItem.r,d.attachmentItem.m,d.attachmentItem.h,d.attachmentItem.k,d.attachmentItem.a,a,c.attachment.bX),title:e.f,description:e.g,headerIcon:b("bs_belt_Option").flatMap(c.attachment.bL,b("MWLSXmaIconParser.bs").parse),headerTitle:c.attachment.bP,icon:b("bs_belt_Option").flatMap(e.J,b("MWLSXmaIconParser.bs").parse),defaultAction:i!==void 0?{_0:i}:void 0,action:f.length!==0?{_0:f}:void 0,canForward:c.attachment.k,listItemsId:c.listItemsId,listItemsDescriptionText:c.listItemsDescriptionText,listItemsSecondaryDescriptionText:c.listItemsSecondaryDescriptionText,listItems:c.listItems}}function a(a,c,d,e){c=e.attachmentItems;d=e.attachment;var f=d.Z,g=d.Y;g=f!==void 0&&g!==void 0?{name:g,icon:f}:void 0;f=d.m;var h=c.length;if(h!==1)if(h!==0)h=2;else{if(f===void 0)return{TAG:8,_0:{TAG:1,_0:i(!0,e),_1:g,_2:a}};h=2}else{var k=c[0];if(f===void 0)return{TAG:8,_0:{TAG:1,_0:j(!0,e,k),_1:g,_2:a}};if(b("bs_caml_int64").eq(f,b("MNLSXMALayoutType.bs").single))return{TAG:8,_0:{TAG:1,_0:j(!0,e,k),_1:g,_2:a}};h=2}if(h===2&&f!==void 0){if(b("bs_caml_int64").eq(f,b("MNLSXMALayoutType.bs").hscroll))return{TAG:8,_0:{TAG:0,_0:c.map(function(a){return j(void 0,e,a)}),_1:g,_2:a}};k=c.length;if(k!==1){if(k===0&&b("bs_caml_int64").eq(f,b("MNLSXMALayoutType.bs").single))return{TAG:8,_0:{TAG:1,_0:i(!0,e),_1:g,_2:a}}}else{h=c[0];if(b("bs_caml_int64").eq(f,b("MNLSXMALayoutType.bs").xcenter))return{TAG:8,_0:{TAG:2,_0:j(!0,e,h),_1:g,_2:a}}}}k="n Attachment Items: "+String(c.length);h="Layout: "+b("bs_belt_Option").mapWithDefault(f,"na",b("bs_int64").to_string);g="Attachment Type: "+b("bs_int64").to_string(d.f);a=[k,h,g].join(", ");b("recoverableViolation")("Unknown combination of XMA items and layout. "+a,"messenger_privacy_web")}f.parseAttachment=i;f.parserForAttachment=a}),null);
__d("MWLSAttachmentParser.bs",["fbt","URI","FBID.bs","bs_int64","bs_belt_Array","bs_caml_int64","bs_belt_Option","bs_caml_format","MWLSXmaParser.bs","bs_caml_exceptions","MWLSParserUtils.bs","StickerConstants","recoverableViolation","MessagingAttachmentType.bs","MWLSAttachmentAttribution.bs"],(function(a,b,c,d,e,f,g){"use strict";var h;c=b("bs_caml_exceptions").create("MWLSAttachmentParser.MessageMarkedAsAttachmentButNoAttachmentFound");function i(a,c,d){var e=d.attachment;a=e.bY;d=c!==void 0&&a!==void 0&&c===1?a:e.F;if(d!==void 0)c=d;else{a=e.f;if(b("bs_caml_int64").eq(a,b("MessagingAttachmentType.bs").animatedImage)){d=e.h;d!==void 0?c=d:(b("recoverableViolation")("Gif Attachment has no preview_url "+e.e,"messenger_privacy_web"),c=void 0)}else b("recoverableViolation")("Photo Attachment has no preview_url "+e.e,"messenger_privacy_web"),c=void 0}return b("bs_belt_Option").map(c,function(a){return{isGIF:!1,previewUrl:a,previewHeight:void 0,previewWidth:void 0,appAttribution:b("MWLSAttachmentAttribution.bs").get(e),photoFbid:b("FBID.bs").ofString(e.e),blurredImageUri:void 0,decryptionKey:e.bi}})}function j(a,c,d){return b("bs_belt_Option").map(i(a,c,d),function(a){return{TAG:1,_0:a}})}function k(a,c){a=c.attachment;c=a.A;if(c!==void 0)c=c;else{var d=a.F;d!==void 0?c=d:(b("recoverableViolation")("Sticker Attachment has no preview_url or playable_url"+a.e,"messenger_privacy_web"),c=void 0)}return{TAG:0,_0:{accessibilityLabel:b("bs_belt_Option").getWithDefault(a.bj,""),frameCount:0,frameRate:void 0,framesPerCol:0,framesPerRow:0,packID:void 0,paddedSpriteURI2x:void 0,paddedSpriteURI:void 0,spriteURI2x:void 0,spriteURI:void 0,stickerID:a.e,url:c,width:b("bs_belt_Option").map(a.K,b("bs_caml_int64").to_int32),height:b("bs_belt_Option").map(a.L,b("bs_caml_int64").to_int32)}}}function l(a,c,d){a=b("bs_belt_Array").keepMap(a,function(a){return i(c,d,a)});if(a.length!==0)return{TAG:2,_0:a}}function m(a,c){a=c.attachment;c=a.A;if(c!==void 0){var d=b("MWLSParserUtils.bs").getBlobUrl(c);d=d!==void 0?new(h||(h=b("URI")))(d):new(h||(h=b("URI")))(c)}else b("recoverableViolation")("Attachment has no playable_url "+a.e,"messenger_privacy_web"),d=new(h||(h=b("URI")))("");return{TAG:4,_0:{fileName:a.h,url:d}}}function n(a,c){a=c.attachment;c=a.A;if(c!==void 0){var d=b("MWLSParserUtils.bs").getBlobUrl(c);d=d!==void 0?new(h||(h=b("URI")))(d):new(h||(h=b("URI")))(c)}else b("recoverableViolation")("Attachment has no playable_url "+a.e,"messenger_privacy_web"),d=new(h||(h=b("URI")))("");return{TAG:6,_0:{duration:b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(a.bd,b("bs_caml_int64").to_float),0),url:d,decryptionKey:a.bi}}}function o(a,c){a=c.attachment;c=b("bs_belt_Option").map(a.L,b("bs_caml_int64").to_int32);var d=b("bs_belt_Option").map(a.K,b("bs_caml_int64").to_int32),e=a.A,f=a.A;return{TAG:7,_0:{height:c!==void 0?c:(b("recoverableViolation")("Video Attachment has no preview_height"+a.e,"messenger_privacy_web"),0),width:d!==void 0?d:(b("recoverableViolation")("Video Attachment has no preview_width"+a.e,"messenger_privacy_web"),0),previewUrl:e!==void 0?e:(b("recoverableViolation")("Attachment has no playable_url "+a.e,"messenger_privacy_web"),""),fbid:b("FBID.bs").ofString(a.e),render_as_sticker:!1,dimensions:void 0,duration:b("bs_belt_Option").map(a.bd,b("bs_caml_int64").to_int32),large_size:void 0,large_preview:void 0,inbox_size:void 0,inbox_preview:void 0,url:f!==void 0?f:(b("recoverableViolation")("Attachment has no playable_url "+a.e,"messenger_privacy_web"),""),decryptionKey:a.bi}}}function p(a,c){a=c.attachment;c=b("bs_belt_Option").map(a.L,b("bs_caml_int64").to_int32);var d=b("bs_belt_Option").map(a.K,b("bs_caml_int64").to_int32),e=a.A,f=a.A;return{TAG:7,_0:{height:c!==void 0?c:(b("recoverableViolation")("Video Attachment has no preview_height"+a.e,"messenger_privacy_web"),0),width:d!==void 0?d:(b("recoverableViolation")("Video Attachment has no preview_width"+a.e,"messenger_privacy_web"),0),previewUrl:e!==void 0?e:(b("recoverableViolation")("Attachment has no playable_url "+a.e,"messenger_privacy_web"),""),fbid:b("FBID.bs").ofString(a.e),render_as_sticker:!0,dimensions:void 0,duration:b("bs_belt_Option").map(a.bd,b("bs_caml_int64").to_int32),large_size:void 0,large_preview:void 0,inbox_size:void 0,inbox_preview:void 0,url:f!==void 0?f:(b("recoverableViolation")("Attachment has no playable_url "+a.e,"messenger_privacy_web"),""),decryptionKey:a.bi}}}function q(a,b){b=b.attachment;return{TAG:8,_0:{TAG:1,_0:{preview:void 0,title:b.R,description:b.V,headerIcon:void 0,headerTitle:void 0,icon:void 0,defaultAction:void 0,action:void 0,canForward:!1,listItemsId:void 0,listItemsDescriptionText:void 0,listItemsSecondaryDescriptionText:void 0,listItems:[]},_1:void 0,_2:a.messageID}}}function r(a){a=a.message.i;if(a!==void 0)return b("bs_int64").compare(b("bs_caml_format").caml_int64_of_string(b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID),a)===0;else return!1}var s={TAG:0,_0:{accessibilityLabel:g._("Thumbs up"),frameCount:0,frameRate:void 0,framesPerCol:0,framesPerRow:0,packID:void 0,paddedSpriteURI2x:void 0,paddedSpriteURI:void 0,spriteURI2x:void 0,spriteURI:void 0,stickerID:b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID,url:void 0,width:32,height:32}};function a(a,c,d){var e=a.attachments;if(r(a))return s;var f=e.length;if(f!==1)if(f!==0)return l(e,c,d);else{b("recoverableViolation")("Message said to have attachments but no attachments were found. MessageID: "+a.message.e,"messenger_privacy_web");return}f=e[0];e=f.attachment.f;if(b("bs_caml_int64").eq(e,b("MessagingAttachmentType.bs").none))return q(c,f);else if(b("bs_caml_int64").eq(e,b("MessagingAttachmentType.bs").animatedImage)||b("bs_caml_int64").eq(e,b("MessagingAttachmentType.bs").image))return j(c,d,f);else if(b("bs_caml_int64").eq(e,b("MessagingAttachmentType.bs").ephemeralImage)||b("bs_caml_int64").eq(e,b("MessagingAttachmentType.bs").ephemeralVideo))return{TAG:3,_0:f.attachment};else if(b("bs_caml_int64").eq(e,b("MessagingAttachmentType.bs").sticker))return k(c,f);else if(b("bs_caml_int64").eq(e,b("MessagingAttachmentType.bs").selfieSticker))return p(c,f);else if(b("bs_caml_int64").eq(e,b("MessagingAttachmentType.bs").xma)||f.attachment.l)return b("MWLSXmaParser.bs").parserForAttachment(c.messageID,a.message.g,c,f);else if(b("bs_caml_int64").eq(e,b("MessagingAttachmentType.bs").file))return m(c,f);else if(b("bs_caml_int64").eq(e,b("MessagingAttachmentType.bs").audio))return n(c,f);else if(b("bs_caml_int64").eq(e,b("MessagingAttachmentType.bs").video))return o(c,f);else{b("recoverableViolation")("Unknown attachment type "+b("bs_int64").to_string(e),"messenger_comet");return}}f.MessageMarkedAsAttachmentButNoAttachmentFound=c;f.parsePhotoContent=i;f.parsePhoto=j;f.parseSticker=k;f.parsePhotoGroup=l;f.parseFile=m;f.parseAudio=n;f.parseVideo=o;f.parseSelfieSticker=p;f.parseUnavailableAttachment=q;f.isHotLike=r;f.hotLike=s;f.parseMessageWithAttachments=a}),null);
__d("MWLSBlockStatus.bs",["FBID.bs","bs_int64","React","bs_caml_obj","SkytaleDB","bs_caml_int64","bs_belt_Option","bs_caml_format","MWThreadKey.bs","SkytaleDBExec.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","MWLSParticipant.bs","MWThread_DEPRECATED.bs","MessagingThreadType.bs","SortedAsyncIterable.bs","recoverableViolation","LSContactBlockedByViewerStatus.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);a=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,{hd:d,tl:0})},[c,JSON.stringify(d)]));var e=b("bs_belt_Option").map(a,function(a){return a.c});a=b("SkytaleDBQuerySubscriptionHook.bs").useArray(g.useMemo(function(){if(b("bs_caml_obj").caml_equal(e,b("MessagingThreadType.bs").oneToOne))return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"participants").asc,{hd:d,tl:0}),function(a){return b("SkytaleDBExec.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"contacts").asc,{hd:a.b,tl:0}))});else return b("SortedAsyncIterable.bs").empty(void 0)},[c,d,JSON.stringify(e)]));a=a.some(function(a){if(a!==void 0)return b("bs_caml_int64").neq(a.n,b("LSContactBlockedByViewerStatus.bs").unblocked);else return!1});if(b("bs_caml_obj").caml_equal(e,b("MessagingThreadType.bs").oneToOne))return a;else return!1}function c(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0),e=typeof a==="string"?!1:a.NAME==="Group";return g.useMemo(function(){var a=b("SkytaleDB").table(c,"contacts").asc;a=b("SkytaleDBExec.bs").toArray(b("MWLSParticipant.bs").getAllInOpenThread(c,a,d));if(e)return a.some(function(a){return b("bs_caml_int64").neq(a.blocked_by_viewer_status,b("LSContactBlockedByViewerStatus.bs").unblocked)});else{b("recoverableViolation")("Trying to get block status for non group thread","messenger_comet");return!1}},[d,c,e])}function d(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("bs_int64").to_string(b("MWThread_DEPRECATED.bs").toThreadKey(a));return g.useMemo(function(){var a=b("SkytaleDB").table(c,"contacts").asc;a=b("SkytaleDBExec.bs").toArray(b("MWLSParticipant.bs").getAllInOpenThread(c,a,b("bs_caml_format").caml_int64_of_string(d)));return a.filter(function(a){return b("bs_caml_int64").neq(a.blocked_by_viewer_status,b("LSContactBlockedByViewerStatus.bs").unblocked)}).map(function(a){return b("FBID.bs").ofStringExn(b("bs_int64").to_string(a.contact_id))})},[d,c])}f.useIsThreadBlocked=a;f.useIsBlockedUserInGroup=c;f.useBlockeesInThread=d}),null);
__d("MWLSThreadIsMessageRequest.bs",["React","SkytaleDB","bs_belt_Option","LSBitOffset.bs","MWThreadKey.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","LSThreadCapabilityBitOffset.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("MWThreadKey.bs").useIdMemoizedExn(void 0),d=b("SkytaleDBHook.bs").useHook(void 0);return b("bs_belt_Option").getWithDefault(b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(d,"threads").asc,{hd:c,tl:0}),function(a){return b("LSBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").messageRequestComposerBanner,a.P)})},[c])),!1)}f.useHook=a}),null);
__d("LSNullstateCTAType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=b("bs_caml_int64").mk(2,0);f.none=a;f.getStarted=c;f.icebreaker=d}),null);
__d("LSThreadNullstate.bs",["LS.bs","FBID.bs","bs_curry","bs_int64","React","bs_caml_obj","MWLSActor.bs","bs_caml_int64","stylex","bs_caml_option","promiseDone","LSMailboxType.bs","LSTransaction.bs","SkytaleDBHook.bs","MessagePowerUp.bs","TetraText.react","LSNullstateCTAType.bs","MWChatBusinessQuickReply.bs","LSMessagingThreadAttributionType.bs","LsBotComposerQuickReplyTappedFalcoEvent","LsBusinessWelcomePageImpressionFalcoEvent","LSMailboxOptimisticSendMessageStoredProcedure","LsBusinessWelcomePageGetStartedButtonTappedFalcoEvent"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i={root:{width:"k4urcfbm"},icebreaker:{display:"j83agx80",justifyContent:"bkfpd7mw",paddingBottom:"f10w8fjw",paddingEnd:"d1544ag0",paddingStart:"c088b7cy"},center:{justifyContent:"taijpn5t",paddingEnd:"umr3f4cg",paddingStart:"c088b7cy"},notification:{paddingBottom:"f10w8fjw",paddingEnd:"gpl4oick",paddingStart:"gm7ombtx",textAlign:"oqcyycmt"}};function a(a){var c=a.thread,d=a.nullstate;a=a.nullstateCtas;var e=b("SkytaleDBHook.bs").useHook(void 0),f=b("MWLSActor.bs").useActor(void 0),j=function(a){b("promiseDone")(b("LSTransaction.bs").run(e,function(d){return b("LSMailboxOptimisticSendMessageStoredProcedure")(f,c.a,c.c,b("LSMailboxType.bs").messenger,a.c,void 0,void 0,void 0,void 0,void 0,void 0,b("LSMessagingThreadAttributionType.bs").unknown,void 0,a.e!==void 0?b("bs_caml_option").valFromOption(a.e):void 0,void 0,void 0,void 0,void 0,!0,!0,void 0,void 0,b("MessagePowerUp.bs").none,void 0,b("bs_curry")._1(b("LS.bs").make,d))},"readWrite"),void 0,void 0)},k=b("FBID.bs").ofString(b("bs_int64").to_string(c.a));if(k!==void 0){var l=b("bs_caml_option").valFromOption(k);b("LsBusinessWelcomePageImpressionFalcoEvent").log(function(a){return{page:{id:l}}})}var m=d.c;return h.jsxs(h.Fragment,{children:[h.jsx("div",{children:m!==void 0?h.jsx(b("TetraText.react"),{color:"secondary",type:"body4",children:m}):null,className:(g||(g=b("stylex")))(i.notification)}),h.jsx("div",{children:a.map(function(a){var c=b("bs_caml_int64").eq(d.f,b("LSNullstateCTAType.bs").getStarted)&&b("bs_caml_obj").caml_equal(d.g,a.a);return h.jsx("div",{children:h.jsx(b("MWChatBusinessQuickReply.bs").make,{bodyLineLimit:3,onClick:function(d){j(a);if(c){if(k===void 0)return;var e=b("bs_caml_option").valFromOption(k);b("LsBusinessWelcomePageGetStartedButtonTappedFalcoEvent").log(function(a){return{page:{id:e}}});return}else{if(k===void 0)return;var f=b("bs_caml_option").valFromOption(k);b("LsBotComposerQuickReplyTappedFalcoEvent").log(function(a){return{page:{id:f},quick_reply:{id:"",type:64},display:void 0}});return}},text:a.c}),className:(g||(g=b("stylex")))(i.icebreaker,c?i.center:!1)},b("bs_int64").to_string(a.a))}),className:g(i.root)})]})}c=a;f.styles=i;f.make=c}),null);
__d("MWChatThread.bs",["fbt","React","gkx","MWTheme.bs","stylex","bs_caml_option","requireCond","MWChatThreadPos.bs","MWUIQuickReplies.bs","MWChatMessageList.bs","focusScopeQueries","MWChatThreadContext.bs","MWMessageElementRefList.bs","MWLSThreadHasMoreMessages.bs","CometHeroHoldTrigger.react","BaseHeadingContextWrapper.re","MWChatMessageTableFocusTable.bs","MWChatViewerChatVisibilityHook","VideoPlayerAutoplayRulesProvider","CometProgressRingIndeterminate.react","MWChatConversationScroller_DEPRECATED.bs","VideoAutoplayLocalScopeProvider.react","cr:1780086","cr:1780087"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React"),j=g._("Messages"),k={spacer:{flexBasis:"rj1gh0hx",flexGrow:"buofh1pr"},mask:{backgroundColor:"nred35xi"},separator:{marginBottom:"n851cfcs",marginTop:"n1l5q3vz",marginStart:"f9o22wc5",marginEnd:"ad2k81qe",height:"ay7djpcl",width:"kv0qyzoi",backgroundColor:"ifff9tsu"},spinner:{display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"taijpn5t",minHeight:"sn7ne77z"}};c={};d={};function a(a){var c=a.id,d=a.items,e=a.isScrolledToBottomRef,f=a.setCovidSheet,g=a.dispatch,l=a.icebreakerUI,m=a.contextBannerData,n=a.welcomePageData,o=a.managePageMessagesLink,p=a.spacerRef,q=a.scrollerRef,r=a.buildSharedMediaViewerURL;l!==void 0&&b("bs_caml_option").valFromOption(l);var s=o!==void 0?b("bs_caml_option").valFromOption(o):null;a=b("MWTheme.bs").useTheme(void 0);l=b("MWChatThreadPos.bs").useThreadPosition(void 0);var t=l[0];o=b("VideoPlayerAutoplayRulesProvider").provideAutoplayRules("default_feed");var u=b("MWLSThreadHasMoreMessages.bs").useThreadHasMoreMessages(void 0),v=d.map(function(a,c){a=a.VAL;var d=b("gkx")("1224637");return d&&!(b("cr:1780086")==null)?i.jsx(b("cr:1780086").make,{pos:t,items:a,managePageMessagesLink:s,dispatch:function(a){return g(a)},setCovidSheet:f,buildSharedMediaViewerURL:r},String(c)):i.jsx(b("MWChatMessageList.bs").make,{pos:t,items:a,managePageMessagesLink:s,dispatch:function(a){return g(a)},setCovidSheet:f,buildSharedMediaViewerURL:r,messageElementRefs:b("MWMessageElementRefList.bs").make(void 0)},String(c))}),w;if(d.length!==1)w=!1;else{d=d[0];w=d.VAL.length===0}d=b("MWChatViewerChatVisibilityHook")();return i.jsx(b("VideoAutoplayLocalScopeProvider.react"),{children:i.jsxs(b("MWChatConversationScroller_DEPRECATED.bs").make,{children:[i.jsx(b("MWChatThreadContext.bs").make,{id:c,contextBannerData:m,welcomePageData:n}),i.jsx("div",{ref:p,className:(h||(h=b("stylex")))(k.spacer,b("MWTheme.bs").isGradient(a)?k.mask:!1)}),i.jsx(b("CometHeroHoldTrigger.react"),{description:"MWChatTab",hold:w&&u}),w?u?i.jsx("div",{children:i.jsx(b("CometProgressRingIndeterminate.react"),{color:"disabled",size:24}),className:(h||(h=b("stylex")))(k.spinner,k.mask)}):null:i.jsx(b("MWChatMessageTableFocusTable.bs").keyCommands,{children:i.jsx(b("MWChatMessageTableFocusTable.bs").Table_.Table.make,{tabScopeQuery:b("focusScopeQueries").tabbableScopeQuery,wrapX:!0,wrapY:!1,allowModifiers:!0,children:i.jsx(b("BaseHeadingContextWrapper.re").make,{children:i.jsx("div",{children:v,"aria-label":j,role:"grid"})})})}),d?i.jsx(b("cr:1780087").make,{}):null,i.jsx(b("MWUIQuickReplies.bs").make,{})],boundingClientRectRef:l[1],isScrolledToBottomRef:e,dispatch:function(a){switch(a){case 0:return g("ContentDoesNotFillContainer");case 1:return g("ScrollToBottom");case 2:return g("ScrollToTop")}},hasMoreAfter:!1,ref:q}),autoplayLocalRules:o})}e=b("cr:1780087");g=a;f.messagesFbt=j;f.styles=k;f.VideoAutoplayLocalScopeProvider=c;f.VideoPlayerAutoplayRulesProvider=d;f.$ChatGeminiMessageList$OR$null$requireCond=b("cr:1780086");f.$ChatGeminiTypingIndicators$OR$MWChatTypingIndicators$requireCond=b("cr:1780087");f.TypingIndicators=e;f.make=g}),null);
__d("MWChatWorkDeactivatedComposer.bs",["fbt","React","stylex","TetraText.react","TetraTextPairing.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React"),j={root:{borderTop:"opwvks06",color:"m9osqain",marginTop:"n1l5q3vz",paddingTop:"pybr56ya",paddingEnd:"d1544ag0",paddingBottom:"f10w8fjw",paddingStart:"tw6a2znq"}};function a(a){a=g._("You can't send a message to this chat");var c=g._("The profile you're trying to message has been deactivated.");return i.jsx("div",{children:i.jsx(b("TetraTextPairing.react"),{body:i.jsx(b("TetraText.react"),{color:"secondary",type:"body4",children:c}),headline:i.jsx(b("TetraText.react"),{color:"secondary",type:"bodyLink4",children:a}),textAlign:"center"}),className:(h||(h=b("stylex")))(j.root)})}c=a;f.styles=j;f.make=c}),null);
__d("WorkGardenArchivedMessage",["fbt","WorkGardenLowerProductName","WorkGardenLowerProductName$FbtEnum"],(function(a,b,c,d,e,f,g){"use strict";f.getMessage=a;function a(){return g._({"hub":"The hub has been archived."},[g._enum("hub",b("WorkGardenLowerProductName$FbtEnum"))])}}),null);
__d("MWChatWorkGardenArchivedComposer.bs",["fbt","React","stylex","TetraText.react","TetraTextPairing.react","WorkGardenArchivedMessage"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React"),j={root:{borderTop:"opwvks06",color:"m9osqain",marginTop:"n1l5q3vz",paddingTop:"pybr56ya",paddingEnd:"d1544ag0",paddingBottom:"f10w8fjw",paddingStart:"tw6a2znq"}};function a(a){a=g._("You can't send a message to this chat");var c=b("WorkGardenArchivedMessage").getMessage();return i.jsx("div",{children:i.jsx(b("TetraTextPairing.react"),{body:i.jsx(b("TetraText.react"),{color:"secondary",type:"body4",children:c}),headline:i.jsx(b("TetraText.react"),{color:"secondary",type:"bodyLink4",children:a}),textAlign:"center"}),className:(h||(h=b("stylex")))(j.root)})}c=a;f.styles=j;f.make=c}),null);
__d("MWUIDisabledPageComposer.bs",["requireCond","cr:1772081"],(function(a,b,c,d,e,f){"use strict";a=b("cr:1772081").make;f.$LSDisabledPageComposer$OR$MWChatDisabledPageComposer$requireCond=b("cr:1772081");f.make=a}),null);
__d("MWChatTabContent.bs",["bs_curry","React","MWTheme.bs","SkytaleDB","bs_caml_int64","JSResource","bs_caml_option","MWThreadKey.bs","MWChatThread.bs","SkytaleDBHook.bs","MWChatComposer.bs","SkytaleDBQuery.bs","MWUIThreadEmoji.bs","LSThreadNullstate.bs","MessengerWebEvent","BootloaderResource","LSNullstateCTAType.bs","MWChatUserComposer.bs","MWChatEmptyComposer.bs","MWChatSolidReaction.bs","MWChatTabContentStyles.bs","MWChatLeftGroupComposer.bs","MWUIDisabledPageComposer.bs","MWChatThreadAnimationWrapper.bs","MWChatWorkDeactivatedComposer.bs","MessengerWebStgTypedLoggerLite.bs","SkytaleDBQuerySubscriptionHook.bs","MWChatComposerP2PPopoverTrigger.bs","MWChatWorkGardenArchivedComposer.bs"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i=(g=b("JSResource"))("MWChatBlockedComposer.bs").__setRef("MWChatTabContent.bs");function j(a,c,d,e,f){f={fbid:a,reportingToken:c};d!==void 0&&(f.size=b("bs_caml_option").valFromOption(d));e!==void 0&&(f.isReachable=b("bs_caml_option").valFromOption(e));return f}function k(a){return h.createElement(b("BootloaderResource").read(i).make,a)}var l={reasonResource:i,makeProps:j,make:k},m=g("MWChatBlockedPageComposer.bs").__setRef("MWChatTabContent.bs");function a(a,b,c){return{fbid:a,reportingToken:b}}function n(a){return h.createElement(b("BootloaderResource").read(m).make,a)}a={reasonResource:m,makeProps:a,make:n};var o=g("MWChatWorkMessageRequestComposer.bs").__setRef("MWChatTabContent.bs");function c(a,b){return{closeTab:a}}function p(a){return h.createElement(b("BootloaderResource").read(o).make,a)}c={reasonResource:o,makeProps:c,make:p};var q=g("InternalOnlyWorkChatComposerExtras.bs").__setRef("MWChatTabContent.bs");function d(a){return{}}function r(a){return h.createElement(b("BootloaderResource").read(q).make,a)}g={reasonResource:q,makeProps:d,make:r};function s(a){var c=a.id,d=a.thread,e=a.items,f=a.otherUserFbid,g=a.contextBannerData,i=a.welcomePageData,l=a.isTabFocused,m=a.isScrolledToBottomRef,o=a.initialComposerViewState,q=a.scrollerRef,s=a.shouldShowMenu,t=a.composerType,u=a.dispatch,v=a.closeTab,w=a.endFirstChatTabOpenLoggerRef,x=a.icebreakerUI,y=a.managePageMessagesLink,z=a.hasContent,A=a.repliedToMessage,B=a.buildSharedMediaViewerURL,C=a.messageRequestInfoText,D=a.sendTypingIndicator,E=a.closeReplyPreview,F=a.onSendMessage,G=x!==void 0?b("bs_caml_option").valFromOption(x):null,H=b("MWTheme.bs").useTheme(void 0);a=b("MWChatSolidReaction.bs").useUook(void 0);var I=a[1],J;if(typeof t==="number")switch(t){case 0:case 1:J=!0;break;default:J=!1}else switch(t.TAG|0){case 0:case 1:J=!1;break;default:J=!1}h.useEffect(function(){if(!w.current){w.current=!0;var a;if(typeof c==="string")a=null;else{var d=c.NAME;a=d==="User"||d==="Page"?c.VAL:null}b("MessengerWebStgTypedLoggerLite.bs").log({event_name:b("MessengerWebEvent").RENDER_FIRST_THREAD_CONTENT,other_user_fbid:a,thread_fbid:typeof c==="string"||c.NAME!=="Group"?null:c.VAL})}},[w,c]);var K=function(a){if(m.current!==0)return;a=q.current;if(!(a==null))return a.scrollToBottom()},L=function(a){return K(void 0)},M=function(a){return K(void 0)},N=b("SkytaleDBHook.bs").useHook(void 0),O=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(h.useMemo(function(){return b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(N,"thread_nullstate").asc,{hd:d.a,tl:0})},[N,JSON.stringify(d.a)])),P=b("SkytaleDBQuerySubscriptionHook.bs").useArray(h.useMemo(function(){return b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(N,"thread_nullstate_ctas").index("threadKeyCtaId").asc,{hd:d.a,tl:0})},[N,JSON.stringify(d.a)])),Q=b("bs_caml_int64").neq(d.i,b("bs_caml_int64").zero),R=O!==void 0?b("bs_caml_int64").eq(O.f,b("LSNullstateCTAType.bs").getStarted):!1;return h.jsx(b("MWChatThreadAnimationWrapper.bs").make,{composer:function(a,e,g,i){var m=b("bs_curry")._1(b("MWUIThreadEmoji.bs").useEmoji,void 0);m={color:b("MWTheme.bs").bottom(H),otherUserFbid:f,customLikeEmoji:m,isTabFocused:l,shouldShowMenu:s,hasContent:z,repliedToMessage:A,actionTrayOpen:i,closeActionTray:e,onContentsChange:L,onFileUploadStart:M,openActionTray:a,fileUploadHandlerRef:g,closeReplyPreview:E,openTabFromPreview:function(a){return u("OpenTabFromPreview")},closeTab:v,onSendMessage:F};o!==void 0&&(m.initialComposerViewState=b("bs_caml_option").valFromOption(o));C!==void 0&&(m.messageRequestInfoText=b("bs_caml_option").valFromOption(C));D!==void 0&&(m.onTypingStateChanged=b("bs_caml_option").valFromOption(D));var q=h.jsx(b("MWChatComposer.bs").make,m),w;if(R&&!Q)w=null;else if(typeof t==="number")switch(t){case 0:w=q;break;case 1:w=h.jsx(b("MWChatUserComposer.bs").make,{threadId:c,chatComposer:function(a){return q}});break;case 2:w=h.jsx(b("MWUIDisabledPageComposer.bs").make,{});break;case 3:w=h.jsx(b("MWChatLeftGroupComposer.bs").make,{});break;case 4:w=h.jsx(h.Suspense,{children:h.jsx(p,{closeTab:v}),fallback:null});break;case 5:w=h.jsx(b("MWChatWorkDeactivatedComposer.bs").make,{});break;case 6:w=h.jsx(b("MWChatWorkGardenArchivedComposer.bs").make,{});break;case 7:w=h.jsxs(h.Fragment,{children:[h.jsx(h.Suspense,{children:h.jsx(r,{}),fallback:null}),q]});break;case 8:w=h.jsx(b("MWChatEmptyComposer.bs").make,{});break}else switch(t.TAG|0){case 0:w=h.jsx(h.Suspense,{children:h.jsx(k,j(t.otherUserFbid,t.reportingToken,void 0,void 0,void 0)),fallback:null});break;case 1:w=h.jsx(h.Suspense,{children:h.jsx(n,{fbid:t.otherUserFbid,reportingToken:t.reportingToken}),fallback:null});break;case 2:w=null;break}return h.jsxs(h.Fragment,{children:[O!==void 0&&!Q?h.jsx(b("LSThreadNullstate.bs").make,{thread:d,nullstate:O,nullstateCtas:P}):null,w]})},threadView:function(a){return h.jsx(b("MWChatThread.bs").make,{id:c,items:e,isScrolledToBottomRef:m,setCovidSheet:I,dispatch:u,icebreakerUI:G,contextBannerData:g,welcomePageData:i,managePageMessagesLink:y,spacerRef:a,scrollerRef:q,buildSharedMediaViewerURL:B})},animationEnabled:J,ensureScrolledToBottom:K,covidSheet:a[0],mediaDropDisabled:!(t===0||t===7),id:c,contextBannerData:g,welcomePageData:i,shouldInitiallyOpenActionTray:b("MWChatComposerP2PPopoverTrigger.bs").shouldShowOnLoad(c),senderUnsendNUXEnabled:l})}d={make:s};function e(a){var c=a.id,d=a.items,e=a.otherUserFbid,f=a.contextBannerData,g=a.welcomePageData,i=a.isTabFocused,j=a.isScrolledToBottomRef,k=a.initialComposerViewState,l=a.scrollerRef,m=a.shouldShowMenu,n=a.composerType,o=a.dispatch,p=a.closeTab,q=a.endFirstChatTabOpenLoggerRef,r=a.icebreakerUI,t=a.managePageMessagesLink,u=a.hasContent,v=a.repliedToMessage,w=a.buildSharedMediaViewerURL,x=a.messageRequestInfoText,y=a.sendTypingIndicator,z=a.closeReplyPreview;a=a.onSendMessage;r=r!==void 0?b("bs_caml_option").valFromOption(r):null;var A=b("SkytaleDBHook.bs").useHook(void 0),B=b("MWThreadKey.bs").useIdMemoizedExn(void 0),C=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(h.useMemo(function(){return b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(A,"threads").asc,{hd:B,tl:0})},[A,B]));if(C===void 0)return null;c={id:c,thread:C,items:d,otherUserFbid:e,contextBannerData:f,welcomePageData:g,isTabFocused:i,isScrolledToBottomRef:j,scrollerRef:l,shouldShowMenu:m,composerType:n,dispatch:o,closeTab:p,endFirstChatTabOpenLoggerRef:q,icebreakerUI:r,managePageMessagesLink:t,hasContent:u,repliedToMessage:v,buildSharedMediaViewerURL:w,closeReplyPreview:z,onSendMessage:a};k!==void 0&&(c.initialComposerViewState=b("bs_caml_option").valFromOption(k));x!==void 0&&(c.messageRequestInfoText=b("bs_caml_option").valFromOption(x));y!==void 0&&(c.sendTypingIndicator=b("bs_caml_option").valFromOption(y));return h.jsx(s,c)}var t=b("MWChatTabContentStyles.bs").styles;e=e;f.MWChatBlockedComposerLazy=l;f.MWChatBlockedPageComposerLazy=a;f.MWChatWorkMessageRequestComposerLazy=c;f.InternalOnlyWorkChatComposerExtrasLazy=g;f.styles=t;f.Inner=d;f.make=e}),null);
__d("MWChatTab.bs",["bs_curry","React","JSResource","stylex","bs_caml_option","MWChatPageHeader.bs","MWChatTabContent.bs","MWChatUserHeader.bs","MWChatGroupHeader.bs","BootloaderResource","MWChatLoadingHeader.bs","MWChatTabFocusHandler.bs","MWUISendTypingIndicator.bs","MWChatConnectionStatusCard.bs","MWChatFocusComposerContext.bs","MWChatUserMessageRequestHeader.bs","MWChatGroupMessageRequestHeader.bs"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i=b("JSResource")("MWChatAddParticipantsHeader.bs").__setRef("MWChatTab.bs");function j(a,c,d,e,f){f={dispatch:c,isTabFocused:d,participants:e};a!==void 0&&(f.backgroundColor=b("bs_caml_option").valFromOption(a));return f}function k(a){return h.createElement(b("BootloaderResource").read(i).make,a)}c={reasonResource:i,makeProps:j,make:k};var l={root:{height:"datstx6m",display:"j83agx80",flexDirection:"cbu4d94t",overflowX:"ni8dbmo4",overflowY:"stjgntxs",isolation:"fbhpx0h9"},header:{flexShrink:"pfnyh3mw",position:"l9j0dhe7",zIndex:"tkr6xdv7"}};function a(a){var c=a.id,d=a.items,e=a.header,f=a.otherUserFbid,i=a.rtcButtonDisplayState,m=a.showSettings,n=a.isActiveNow,o=a.contextBannerData,p=a.welcomePageData,q=a.unreadCount,r=a.isBlocked,s=a.isMuted,t=a.isViewerInGroup,u=a.isTabFocused,v=a.isScrolledToBottomRef,w=a.initialComposerViewState,x=a.scrollerRef,y=a.sheet,z=a.icebreakerUI,A=a.managePageMessagesLink,B=a.shouldShowMenu,C=a.composerType,D=a.dispatch,E=a.closeTab,F=a.minimizeTab,G=a.clickHeader,H=a.endFirstChatTabOpenLoggerRef,I=a.hasContent,J=a.participants,K=a.pageVerificationBadge,L=a.reportingToken,M=a.repliedToMessage,N=a.isEmptyThread,O=a.openPageURL,P=a.showConnectionStatus,Q=a.ongoingCallType,R=a.buildSharedMediaViewerURL,S=a.messageRequestInfoText,T=a.closeReplyPreview;a=a.onSendMessage;y=y!==void 0?b("bs_caml_option").valFromOption(y):null;z=z!==void 0?b("bs_caml_option").valFromOption(z):null;P=P!==void 0?P:!0;q=!u&&q>0;var U=b("bs_curry")._1(b("MWUISendTypingIndicator.bs").useHook,void 0),V;if(typeof e==="number")V=e===0?h.jsx(k,j(void 0,D,u,J,void 0)):h.jsx(b("MWChatLoadingHeader.bs").make,{closeTab:E,minimizeTab:F,clickHeader:G,isTabFocused:u});else switch(e.TAG|0){case 0:V=h.jsx(b("MWChatUserHeader.bs").make,{id:c,header:e._0,rtcButtonDisplayState:i,showSettings:m,isActiveNow:n,highlightHeader:q,isBlocked:r,isMuted:s,isTabFocused:u,dispatch:D,closeTab:E,minimizeTab:F,clickHeader:G,pageVerificationBadge:K,reportingToken:L,isEmptyThread:N});break;case 1:V=h.jsx(b("MWChatUserMessageRequestHeader.bs").make,{id:c,header:e._0,showSettings:m,isActiveNow:n,highlightHeader:q,isBlocked:r,isMuted:s,isTabFocused:u,dispatch:D,closeTab:E,minimizeTab:F,clickHeader:G,pageVerificationBadge:K,reportingToken:L,isEmptyThread:N});break;case 2:V=h.jsx(b("MWChatPageHeader.bs").make,{id:c,header:e._0,rtcButtonDisplayState:i,showSettings:m,isActiveNow:n,highlightHeader:q,isBlocked:r,isMuted:s,isTabFocused:u,dispatch:D,closeTab:E,minimizeTab:F,clickHeader:G,participants:J,pageVerificationBadge:K,reportingToken:L,isEmptyThread:N,openPageURL:O});break;case 3:V=h.jsx(b("MWChatGroupHeader.bs").make,{id:c,header:e._0,rtcButtonDisplayState:i,showSettings:m,isActiveNow:n,highlightHeader:q,isBlocked:r,isMuted:s,isViewerInGroup:t,isTabFocused:u,dispatch:D,closeTab:E,minimizeTab:F,clickHeader:G,reportingToken:L,isEmptyThread:N,ongoingCallType:Q});break;case 4:V=h.jsx(b("MWChatGroupMessageRequestHeader.bs").make,{id:c,header:e._0,showSettings:m,isActiveNow:n,highlightHeader:q,isBlocked:r,isMuted:s,isViewerInGroup:t,isTabFocused:u,dispatch:D,closeTab:E,minimizeTab:F,clickHeader:G,reportingToken:L,isEmptyThread:N});break}J={id:c,items:d,otherUserFbid:f,contextBannerData:o,welcomePageData:p,isTabFocused:u,isScrolledToBottomRef:v,scrollerRef:x,shouldShowMenu:B,composerType:C,dispatch:function(a){return D(a)},closeTab:E,endFirstChatTabOpenLoggerRef:H,icebreakerUI:z,managePageMessagesLink:A,hasContent:I,repliedToMessage:M,buildSharedMediaViewerURL:R,sendTypingIndicator:U,closeReplyPreview:T,onSendMessage:a};w!==void 0&&(J.initialComposerViewState=b("bs_caml_option").valFromOption(w));S!==void 0&&(J.messageRequestInfoText=b("bs_caml_option").valFromOption(S));return h.jsx(b("MWChatFocusComposerContext.bs").provider,{children:h.jsx(b("MWChatTabFocusHandler.bs").make,{onEscape:function(a){return b("bs_curry")._1(E,void 0)},onFocus:function(a){return D("MarkTabFocused")},onBlur:function(a){if(u)return D("MarkTabBlur")},children:h.jsxs("div",{children:[h.jsx("div",{children:V,className:(g||(g=b("stylex")))(l.header)}),P?h.jsx(b("MWChatConnectionStatusCard.bs").make,{}):null,y,h.jsx(b("MWChatTabContent.bs").make,J)],className:g(l.root)})})})}d=a;f.LazyMWChatAddParticipantsHeader=c;f.styles=l;f.make=d}),null);
__d("MWChatTabContainer.bs",["fbt","ODS","bs_curry","React","gkx","bs_js_dict","MWTheme.bs","qex","bs_caml_obj","MWUITheme.bs","SkytaleDB","bs_caml_array","JSResource","MercuryIDs","stylex","bs_belt_Option","bs_caml_format","bs_caml_option","CurrentUser","MWThreadKey.bs","requireCond","UserActivity","MWChatBlurTab.bs","MWChatOpenTab.bs","SkytaleDBHook.bs","MWChatCloseTab.bs","MWChatFocusTab.bs","MWChatThreadId.bs","MWUILeaveGroup.bs","MWUIThreadName.bs","SkytaleDBQuery.bs","CometLink.react","MWUIBlockStatus.bs","MWUIDeleteThread.bs","bs_js_null_undefined","MWChatCollapseTab.bs","MessengerWebEvent","BootloaderResource","MWUIChatThreadHook.bs","MWUIInThreadBanner.bs","MWUIStartPhoneCall.bs","MWChatHasTabContent.bs","MWThread_DEPRECATED.bs","MWUILoadThreadTitle.bs","MWUISendTextMessage.bs","MWUIThreadHasThread.bs","MWUIMarkThreadAsRead.bs","MWUIRTCDisplayStatus.bs","MWUIRepliedToMessage.bs","MWUIWebUrlCtaHandler.bs","recoverableViolation","MWUIChatContextBanner.bs","MWUIFetchMessagesPage.bs","MWUILoadThreadPicture.bs","MWUISendCometPostback.bs","MWUIThreadProfileLink.bs","ZenonUserActionLogger","MWUIGetServerMessageID.bs","MWUILoadThreadMessages.bs","MWUIThreadHasLeftGroup.bs","MessengerWebEntryPoint","unrecoverableViolation","MWUIContactCapabilities.bs","MWChatTabContainerShared.bs","MWUIThreadReportingToken.bs","MWUIThreadHasMoreMessages.bs","MWChatPollXMAActionHandler.bs","MWUIAddParticipantsToGroup.bs","MWUIPresenceIsThreadActive.bs","MWUIThreadIsMessageRequest.bs","MWUIThreadMuteExpireTimeMs.bs","RTWebLoggingSurfaceConvert.bs","useCometConfirmationDialog","MWChatBlockMessagesMutation","MWChatConfirmTabCloseDialog.bs","MWChatTabGroupWarningPolicy.bs","CometLazyDialogTrigger.react","MWChatComposerViewStateStore.bs","MWUIThreadUnreadMessageCount.bs","RTWebLoggingComponentConvert.bs","MWChatBusinessWelcomePageHook.bs","MWUICurrentThreadParticipants.bs","MWUIUpdateParticipantNickname.bs","MessengerWebStgTypedLoggerLite.bs","SkytaleDBQuerySubscriptionHook.bs","MWChatLoadMoreItemsIncrementally.bs","MWChatXmaThirdPartyActionHandler.bs","CometTransientDialogProvider.react","CometProgressRingIndeterminate.react","LSMailboxMessagesRangeQueryDirection.bs","MWChatCalculateIsMutedFromExpireTime.bs","MWChatComposerMessageRequestInfoText.bs","MWLSThreadLastReadWatermarkTimestamp.bs","MWUILoadIsDisabledComposerThreadLevel.bs","MWChatEphemeralMediaTemporarySeenState.bs","XCometMessengerMediaControllerRouteBuilder","XCometMessengerPhotoControllerRouteBuilder","cr:1859633","cr:1617847"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React"),j=b("JSResource")("MWChatBusinessIcebreaker.bs").__setRef("MWChatTabContainer.bs");function aa(a,c,d,e,f,g,h,i){i={icebreakers:a,icebreakerCTAs:c,onSend:d,onSendIcebreakerCTA:e,pageID:f,threadTitle:g};h!==void 0&&(i.showWarning=b("bs_caml_option").valFromOption(h));return i}function ba(a){return i.createElement(b("BootloaderResource").read(j).make,a)}function a(a){var c=a.isTabFocused,d=a.hasContent,e=a.isMultitab,f=a.useSidebarChatStyles,j=a.searchResultMessages;a=a.isMainRegion;e=e!==void 0?e:!1;j!==void 0&&b("bs_caml_option").valFromOption(j);j=a!==void 0?a:!1;a=i.useRef(!1);var k=b("bs_curry")._1(b("MWUIMarkThreadAsRead.bs").useHook,void 0),l=b("bs_curry")._1(b("MWUIThreadReportingToken.bs").useHook,void 0),m=b("bs_curry")._1(b("MWUIThreadHasThread.bs").useHook,void 0),n=b("bs_curry")._1(b("MWUIThreadHasLeftGroup.bs").useHook,void 0),o=b("bs_curry")._1(b("MWUIThreadUnreadMessageCount.bs").useHook,void 0),ca=b("MWLSThreadLastReadWatermarkTimestamp.bs").useHook(void 0),p=b("bs_curry")._1(b("MWUIThreadMuteExpireTimeMs.bs").useHook,void 0);p=b("MWChatCalculateIsMutedFromExpireTime.bs").useHook(p);var q=i.useState(function(){return o}),da=q[1],r=i.useState(function(){return ca}),ea=r[1],s=b("bs_curry")._1(b("MWUIThreadName.bs").useHook,void 0),fa=b("bs_curry")._1(b("MWUIStartPhoneCall.bs").useMakeRTCCall,void 0),ga=fa[0],ha=b("bs_curry")._1(b("MWUIAddParticipantsToGroup.bs").useHook,void 0),t=i.useState(function(){return!1}),ia=t[1];i.useEffect(function(){c&&o>0&&b("UserActivity").isOnTab()&&b("UserActivity").isActive()&&b("bs_curry")._1(k,void 0)},[c,o,k]);var u=b("MWThread_DEPRECATED.bs").useIdExn(void 0),v;if(typeof u==="string")v=void 0;else{var w=u.NAME;v=w==="User"||w==="Page"?b("bs_caml_option").some(u.VAL):void 0}w=b("MWChatComposerViewStateStore.bs").getScrollPos(u);var x=w!==void 0?w:0,y=i.useRef(x),z=i.useRef(null);i.useEffect(function(){if(b("gkx")("1329969")){b("MWChatComposerViewStateStore.bs").setScrollPos(u,x);return function(c){c=y.current;var a=b("MWChatComposerViewStateStore.bs").getScrollPos(u);if(a!==void 0)return b("MWChatComposerViewStateStore.bs").setScrollPos(u,c)}}},[]);b("MWChatComposerViewStateStore.bs").useClearComposerViewStateOnMount(u);w=b("MWChatLoadMoreItemsIncrementally.bs").useLoadMore(j,x,b("bs_curry")._2(b("MWUILoadThreadMessages.bs").useMessageItems,b("gkx")("1675204")?r[0]:void 0,b("gkx")("1675204")?q[0]:0),b("bs_curry")._1(b("MWUIFetchMessagesPage.bs").useFetchMessagesPage,void 0),b("bs_curry")._1(b("MWUIThreadHasMoreMessages.bs").useThreadHasMoreMessages,void 0));r=w[2];var ja=w[1];q=[{NAME:"Messages",VAL:w[0]}];b("bs_curry")._1(b("MWUIChatThreadHook.bs").useThread,u);w=b("bs_curry")._1(b("MWUICurrentThreadParticipants.bs").useMercuryParticipants,void 0);var A=w[0],B=b("bs_curry")._1(b("MWUIPresenceIsThreadActive.bs").useHook,void 0),C=b("bs_curry")._1(b("MWUIRepliedToMessage.bs").useCurrentlyRepliedToMessage,void 0),ka=C[2],la=C[1];C=C[0];var ma=b("bs_curry")._1(b("MWUITheme.bs").useTheme,void 0),na=function(a,c){c=a!==void 0?a:!1;a=y.current;if(typeof a==="number")if(a===0&&c)return b("bs_curry")._1(ja,b("LSMailboxMessagesRangeQueryDirection.bs").before);else return;else if(a.TAG)return;else return b("bs_curry")._1(ja,b("LSMailboxMessagesRangeQueryDirection.bs").before)},D=b("bs_curry")._1(b("MWUIBlockStatus.bs").useIsThreadBlocked,void 0),oa=typeof u==="string"||u.NAME!=="Group"?!1:b("bs_js_dict").entries(A).some(function(a){return b("bs_caml_obj").caml_equal(a[1].id,b("MercuryIDs").getParticipantIDFromUserID(b("CurrentUser").getID()))}),E=b("bs_curry")._1(b("MWUILoadThreadPicture.bs").useHook,void 0),F=b("bs_curry")._1(b("MWUILoadThreadTitle.bs").useHook,void 0),pa=F[1];F=F[0];var G=b("bs_curry")._1(b("MWUIThreadIsMessageRequest.bs").useHook,void 0),H=b("bs_curry")._1(b("MWUIThreadProfileLink.bs").useHook,void 0),I=u.NAME;if(I==="Group")if(t[0])t=0;else if(F!==void 0&&E.length>0){var J=b("bs_belt_Option").getWithDefault(s,"");J={title:F,rawTitle:J,profileImages:E};t=G?{TAG:4,_0:J}:{TAG:3,_0:J}}else t=1;else if(I==="Page")t=F!==void 0&&E.length>0?{TAG:2,_0:{title:F,rawTitle:b("bs_belt_Option").getWithDefault(s,""),actorID:u.VAL,href:H,profileImage:b("bs_caml_array").get(E,0)}}:1;else if(F!==void 0&&E.length>0){J=b("bs_belt_Option").getWithDefault(s,"");I=u.VAL;s=b("bs_caml_array").get(E,0);J={title:F,rawTitle:J,actorID:I,href:H,profileImage:s};t=G?{TAG:1,_0:J}:{TAG:0,_0:J}}else t=1;if(m){if(q.length!==1)I=!1;else{H=q[0];I=H.VAL.length!==0?!1:!r}if(typeof u==="string")s=[!0,!r,I];else{J=u.NAME;s=J==="Page"||J==="Group"?[!0,!r,I]:[!0,!r,I]}}else s=[!1,!1,!0];m=s[2];H=b("bs_curry")._1(b("MWUIRTCDisplayStatus.bs").useHook,void 0);var qa=b("SkytaleDBHook.bs").useHook(void 0),ra=b("MWThreadKey.bs").useIdMemoizedExn(void 0);J=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(i.useMemo(function(){return b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(qa,"threads").asc,{hd:ra,tl:0})},[qa,ra]));r=J!==void 0?J.J:!1;I=b("bs_curry")._4(b("MWUIChatContextBanner.bs").useContextBanner,u,E,s[1],F);E=b("MWChatBusinessWelcomePageHook.bs").useMessengerBusinessWelcomePage(u,m);var K=b("bs_curry")._1(b("MWUILoadIsDisabledComposerThreadLevel.bs").useHook,u);J=J!==void 0?J.K:!1;var L=b("gkx")("1277703"),M;if(D!==void 0){var N=0;if(typeof u==="string")N=1;else{var O=u.NAME;if(O==="Group")n?M=3:N=1;else if(O==="Page"){n=K!==void 0?K:J;K=0;L&&D?M={TAG:1,otherUserFbid:u.VAL,reportingToken:l}:K=2;if(K===2)if(E!==void 0){J=b("bs_caml_option").valFromOption(E).null_state_cta;M=J!==void 0?{TAG:2,nullStateCTA:b("bs_caml_option").valFromOption(J),pageName:F}:n===!0?2:0}else M=n?2:0}else O==="User"&&D?M={TAG:0,otherUserFbid:u.VAL,reportingToken:l}:N=1}N===1&&(M=G&&b("gkx")("1217157")?4:typeof u==="string"||u.NAME!=="User"?0:b("gkx")("1775407")?7:1)}else M=8;L=b("MWChatHasTabContent.bs").useHook(void 0);var P=b("MWChatCloseTab.bs").useHook(b("MessengerWebEntryPoint").UNKNOWN),Q=b("MWChatCollapseTab.bs").useHook(b("MessengerWebEntryPoint").UNKNOWN),sa=b("MWChatOpenTab.bs").useHook_DEPRECATED(b("MessengerWebEntryPoint").UNKNOWN),ta=b("MWChatFocusTab.bs").useHook(b("MessengerWebEntryPoint").UNKNOWN),ua=b("MWChatBlurTab.bs").useHook(b("MessengerWebEntryPoint").UNKNOWN);K=b("useCometConfirmationDialog")();var va=K[0],wa=b("bs_curry")._1(b("MWUILeaveGroup.bs").useHook,void 0),xa=function(a){typeof u==="string"||u.NAME!=="Group"?b("recoverableViolation")("Trying to leave non-group thread","messenger_comet"):b("bs_curry")._2(wa,u.VAL,a);return b("bs_curry")._1(P,u)};b("MWChatTabGroupWarningPolicy.bs").useGroupEntranceWarningEffect(xa,function(a){return b("bs_curry")._1(P,u)},function(a){return b("bs_curry")._1(sa,u)});var ya=function(a){a=z.current;if(!(a==null))return a.scrollToBottom()},za=b("bs_curry")._1(b("MWUIUpdateParticipantNickname.bs").useHook,void 0),Aa=b("MWChatXmaThirdPartyActionHandler.bs").useHandler(void 0),Ba=b("MWChatPollXMAActionHandler.bs").useHandler(void 0),Ca=b("bs_curry")._2(b("MWUISendTextMessage.bs").useSendTextMessage,void 0,void 0),Da=b("bs_curry")._1(b("MWUIDeleteThread.bs").useDeleteThread,void 0),Ea=b("bs_curry")._1(b("MWUIWebUrlCtaHandler.bs").useShowWebViewDialog,void 0),Fa=b("bs_curry")._1(b("MWUISendCometPostback.bs").useSendCometPostback,void 0),Ga=b("bs_curry")._1(L,u);b("MWChatEphemeralMediaTemporarySeenState.bs").useEndSessionOnDismount(b("MWChatThreadId.bs").getFBID(u));var Ha=u.VAL,Ia=function(a){if(o>0&&y.current===0)return b("bs_curry")._1(k,void 0)},R=function(a){b("bs_curry")._1(k,void 0);ya(void 0);b("bs_curry")._1(da,function(a){return 0});return b("bs_curry")._1(ea,function(a){})};J=i.useCallback(function(a){if(Ga)return b("bs_curry")._3(va,b("MWChatConfirmTabCloseDialog.bs").content,function(a){return b("bs_curry")._1(P,u)},function(a){});else return b("bs_curry")._1(P,u)},[u,Ga,va,P]);n=i.useCallback(function(a){b("ODS").bumpEntityKey(3185,"mwchat_header","minimize");a=typeof u==="string"||u.NAME!=="Group"?null:u.VAL;b("MessengerWebStgTypedLoggerLite.bs").log({event_name:b("MessengerWebEvent").MINIMIZE_CHAT_TAB,other_user_fbid:b("bs_js_null_undefined").fromOption(v),thread_fbid:a});return b("bs_curry")._1(Q,u)},[u,Q]);O=i.useCallback(function(a){return b("bs_curry")._1(Q,u)},[Q,u]);N=function(d){if(typeof d==="string"){if(d==="ScrollToBottom")return Ia(void 0);if(d==="OpenTabFromPreview")return;if(d==="ClickAudio"){if(typeof u==="string")return b("unrecoverableViolation")("Attempted to call unsupported thread type","messenger_comet");var c=u.NAME;if(c==="User"||c==="Page"||c==="Group"){b("ZenonUserActionLogger").logClick({component:b("bs_curry")._1(b("RTWebLoggingComponentConvert.bs").converter.toJS,0),surface:b("bs_curry")._1(b("RTWebLoggingSurfaceConvert.bs").converter.toJS,3)});return b("bs_curry")._3(ga,!1,u.VAL,"comet_chattab_audio_button")}else return b("unrecoverableViolation")("Attempted to call unsupported thread type","messenger_comet")}if(d==="ContentDoesNotFillContainer")return na(!0,void 0);if(d==="ToggleAddParticipants")return b("bs_curry")._1(ia,function(a){return!a});if(d!=="ClickVideo")if(d==="MarkTabBlur")return b("bs_curry")._1(ua,u);else if(d==="MarkTabFocused"){Ia(void 0);return b("bs_curry")._1(ta,u)}else if(d==="DeleteConversation"){b("ODS").bumpEntityKey(3185,"mwchat_settings","delete_conv");b("bs_curry")._1(Da,u);return b("bs_curry")._1(P,u)}else return na(void 0,void 0);if(typeof u==="string")return b("unrecoverableViolation")("Attempted to call unsupported thread type","messenger_comet");c=u.NAME;if(c==="User"||c==="Page"||c==="Group"){b("ZenonUserActionLogger").logClick({component:b("bs_curry")._1(b("RTWebLoggingComponentConvert.bs").converter.toJS,1),surface:b("bs_curry")._1(b("RTWebLoggingSurfaceConvert.bs").converter.toJS,3)});return b("bs_curry")._3(ga,!0,u.VAL,"comet_chattab_video_button")}else return b("unrecoverableViolation")("Attempted to call unsupported thread type","messenger_comet")}c=d.NAME;if(c==="ShowWebViewDialog")return b("bs_curry")._1(Ea,d.VAL);if(c==="ClickReplyTo"){b("ODS").bumpEntityKey(3185,"mwchat_send","reply");return b("bs_curry")._1(la,d.VAL)}if(c==="ShowPollDetails"){var a=d.VAL;return b("bs_curry")._2(Ba,a[0],a[1])}if(c==="AddParticipants"){b("bs_curry")._1(ia,function(a){return!a});return b("bs_curry")._1(ha,d.VAL)}if(c==="ScrollToElement"){a=d.VAL;var e=a[0];a=a[1];var f=z.current;if(!(f==null))return f.scrollToElement(e,a);else return}if(c==="UpdateBlock"){f=d.VAL;e=f[1];if(u.NAME==="Group")return b("unrecoverableViolation")("Can't block a group or local thread","messenger_comet");a=u.VAL;f[0]?b("MWChatBlockMessagesMutation").commitBlock(a,e,function(a){}):b("MWChatBlockMessagesMutation").commitUnblock(a,e,function(a){});return}if(c==="SetParticipantNickname"){f=d.VAL;a=f[1];var g=f[0];b("ODS").bumpEntityKey(3185,"mwchat_settings","change_nickname");if(typeof u==="string")return;e=u.NAME;if(!(e==="User"||e==="Group"))return;var h=b("bs_curry")._2(pa,g,a);f=function(a){};e=function(a){b("bs_curry")._2(pa,g,h)};return b("bs_curry")._5(za,u.VAL,g,a,f,e)}if(c!=="SendCometPostback")if(c==="LeaveGroup"){b("ODS").bumpEntityKey(3185,"mwchat_settings","leave_group");return xa(d.VAL)}else return b("bs_curry")._1(Aa,d);a=d.VAL;b("ODS").bumpEntityKey(3185,"mwchat_send","postback");return b("bs_curry")._2(Fa,a[0],a[1])};G=i.jsx(b("MWUIInThreadBanner.bs").make,{});if(typeof u==="string"||u.NAME!=="Page")K=[null,null];else{L=u.VAL;var S;if(E!==void 0){var T=b("bs_caml_option").valFromOption(E),U=T.icebreakers,V=T.icebreaker_ctas,W=0,X=0;U.length!==0||V.length!==0?X=2:S=null;X===2&&(V.length!==0||!m?W=1:S=i.jsx(i.Suspense,{children:i.jsx(ba,aa(U,[],function(a){b("ODS").bumpEntityKey(3185,"mwchat_send","text");b("bs_curry")._4(Ca,u,a,void 0,void 0);return R(void 0)},function(a){},L,F,void 0,void 0)),fallback:i.jsx(b("CometProgressRingIndeterminate.react"),{color:"disabled",size:24})}));W===1&&(S=m?i.jsx(i.Suspense,{children:i.jsx(ba,aa(T.icebreakers,V,function(a){},function(a){b("ODS").bumpEntityKey(3185,"mwchat_send","postback");b("bs_curry")._2(Fa,a.title,{cta_id:a.id,prev_message_id:void 0,force_handle:!0,ref:void 0,postback_cta_ref_source:void 0});return R(void 0)},L,F,void 0,void 0)),fallback:i.jsx(b("CometProgressRingIndeterminate.react"),{color:"disabled",size:24})}):null)}else S=null;K=[i.jsx(b("CometLazyDialogTrigger.react"),{dialogResource:b("JSResource")("MWChatBusinessManageMessagesDialogForJSResource.react").__setRef("MWChatTabContainer.bs"),dialogProps:{id:L,onClose:function(a){},dispatch:N},children:function(a,c){return i.jsx(b("CometLink.react"),{role:"button",style:{display:"block",fontWeight:"bold",paddingLeft:"4px"},children:g._("Manage Messages"),ref:c,onClick:function(c){return b("bs_curry")._1(a,void 0)}})}}),S]}X=K[1];U=K[0];W=b("bs_curry")._1(b("MWUIContactCapabilities.bs").useCapabilities,b("bs_caml_format").caml_int64_of_string(Ha));T=b("bs_curry")._1(b("MWUIContactCapabilities.bs").isVerified,W)?"BLUE_VERIFIED":void 0;V=typeof t==="number"||t.TAG!==2?void 0:t._0.href;L=function(a,c){var d=b("bs_curry")._1(b("MWUIGetServerMessageID.bs").getServerMessageID,a.message_id);if(c)return b("XCometMessengerPhotoControllerRouteBuilder").buildURL({photo_ids:a.photo_ids,fbid:a.fbid,message_id:d});else return b("XCometMessengerMediaControllerRouteBuilder").buildURL({thread_id:Ha,attachment_id:a.fbid,message_id:d})};K=i.useState(function(){});var Y=K[1];W=K[0];K=i.useCallback(function(a){return b("bs_curry")._1(Y,function(a){})},[Y]);var Ja=i.useCallback(function(a){return b("bs_curry")._1(Y,function(b){return a})},[Y]),Z=b("qex")._("1586110");Z=Z==null?{}:{fontSize:String(Z)+"px"};var $;if(b("cr:1859633")==null)if(b("cr:1617847")==null)$=null;else{t={id:u,items:q,header:t,otherUserFbid:v,rtcButtonDisplayState:H,showSettings:s[0],isActiveNow:B,contextBannerData:I,welcomePageData:E,unreadCount:o,isBlocked:D,isMuted:p,isViewerInGroup:oa,isTabFocused:c,isScrolledToBottomRef:y,scrollerRef:z,sheet:G,icebreakerUI:X,managePageMessagesLink:U,shouldShowMenu:r,composerType:M,dispatch:N,closeTab:J,minimizeTab:n,clickHeader:O,endFirstChatTabOpenLoggerRef:a,hasContent:d,participants:A,nicknames:w[1],pageVerificationBadge:T,reportingToken:l,repliedToMessage:C,isEmptyThread:m,openPageURL:V,buildSharedMediaViewerURL:L,messageRequestInfoText:i.jsx(b("MWChatComposerMessageRequestInfoText.bs").make,{closeTab:P}),closeReplyPreview:ka,onSendMessage:R};H=b("MWChatComposerViewStateStore.bs").get(u);H!==void 0&&(t.initialComposerViewState=b("bs_caml_option").valFromOption(H));s=fa[1];s!==void 0&&(t.ongoingCallType=b("bs_caml_option").valFromOption(s));$=i.jsx(b("cr:1617847").make,t)}else $=i.jsx(b("cr:1859633").make,{items:q,id:u,otherUserFbid:v,welcomePageData:E,isTabFocused:c,isScrolledToBottomRef:y,initialComposerViewState:b("MWChatComposerViewStateStore.bs").get(u),scrollerRef:z,sheet:G,icebreakerUI:X,managePageMessagesLink:U,shouldShowMenu:r,composerType:M,dispatch:N,closeTab:J,endFirstChatTabOpenLoggerRef:a,hasContent:d,participants:A,repliedToMessage:C,buildSharedMediaViewerURL:L,closeReplyPreview:ka,onSendMessage:R});B={children:$,key:Ha,"aria-label":b("bs_belt_Option").mapWithDefault(F,g._("Loading conversation"),function(a){return g._("Chat with {thread_title}",[g._param("thread_title",a)])}),className:(h||(h=b("stylex")))(b("cr:1859633")==null?b("MWChatTabContainerShared.bs").styles.chatTab:b("MWChatTabContainerShared.bs").styles.workChatTab,f?b("MWChatTabContainerShared.bs").styles.sidebarChatOverrides:!1,e?b("MWChatTabContainerShared.bs").styles.chatTabNoBottomRadius:!1,b("qex")._("1586109")?b("MWChatTabContainerShared.bs").styles.chatTabThin:!1),role:j?"main":"region",style:Z};return i.jsx(b("MWTheme.bs").provider,{theme:W!==void 0?W:ma,setTheme:Ja,clearTheme:K,children:i.jsx(b("CometTransientDialogProvider.react"),{children:i.jsx("div",(B["data-testid"]="mwchat-tab",B))})})}c=a;f.make=c}),null);
__d("LSComposerPersistentMenuButton.bs",["fbt","bs_curry","React","JSResource","stylex","bs_caml_option","CometPressable.react","CometLazyPopoverTrigger.react","MWChatChatButtonColorConstants.bs"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React"),j={menuButton:{display:"j83agx80",marginBottom:"qzhwtbm6",marginTop:"pcgkmkmd",paddingTop:"pybr56ya",paddingEnd:"d1544ag0",paddingBottom:"f10w8fjw",paddingStart:"tw6a2znq"}};function a(a){var c=a.color,d=a.pageId;a=a.sendMenuItem;return i.jsx(b("CometLazyPopoverTrigger.react"),{popoverResource:b("JSResource")("LSComposerPersistentMenu.react").__setRef("LSComposerPersistentMenuButton.bs"),popoverProps:{pageId:d,onSelect:b("bs_curry").__1(a)},align:"end",children:function(a,d,e,f,k,l,m){e={children:i.jsx("path",{d:"M0 1.5C0 0.671573 0.671573 0 1.5 0H22.5C23.3284 0 24 0.671573 24 1.5C24 2.32843 23.3284 3 22.5 3H1.5C0.671573 3 0 2.32843 0 1.5ZM0 9C0 8.17157 0.671573 7.5 1.5 7.5H22.5C23.3284 7.5 24 8.17157 24 9C24 9.82843 23.3284 10.5 22.5 10.5H1.5C0.671573 10.5 0 9.82843 0 9ZM1.5 15C0.671573 15 0 15.6716 0 16.5C0 17.3284 0.671573 18 1.5 18H22.5C23.3284 18 24 17.3284 24 16.5C24 15.6716 23.3284 15 22.5 15H1.5Z"})};c!==void 0&&(e.fill=b("bs_caml_option").valFromOption(c));return i.jsx("div",{children:i.jsx(b("CometPressable.react"),{"aria-label":g._("Open persistent menu"),testid:"composer_persistent_menu",onPress:function(a){return b("bs_curry")._1(d,void 0)},overlayRadius:"50%",xstyle:function(a){return[j.hotLikeDefault]},children:i.jsx("svg",{children:i.jsx("g",e),className:(h||(h=b("stylex")))(b("MWChatChatButtonColorConstants.bs").styles.fillGrey),height:"18",width:"24",fill:"none",viewBox:"0 0 24 18",xmlns:"http://www.w3.org/2000/svg"})}),ref:a,className:h(j.menuButton)})}})}c=a;f.make=c}),null);
__d("MWComposerXacDisclosureRelay.react",["CometPlaceholder.react","CometRelay","React","MWComposerXacDisclosureRelayQuery.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i=8659;function a(a){var c=b("CometRelay").useLazyLoadQuery(g!==void 0?g:g=b("MWComposerXacDisclosureRelayQuery.graphql"),{nux_id:i}),d=c.xacThreadDisclosureNux;return h.jsx(b("CometPlaceholder.react"),{fallback:null,children:d!=null?h.jsx(b("CometRelay").MatchContainer,{match:d,props:{isThreadInNullState:a.isThreadInNullState,nuxKey:c.xacThreadDisclosureNux,size:a.size}}):null})}}),null);
__d("LSContactReachabilityStatusType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;f.reachable=a;f.unreachableUserType=c}),null);
__d("MWLSParticipantDetails.bs",["React","gkx","SkytaleDB","bs_caml_int64","bs_belt_Option","bs_caml_format","GenderConst","SkytaleDBExec.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","LSContactGender.bs","SkytaleDBQuerySubscriptionHook.bs","LSContactReachabilityStatusType.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0);return g.useMemo(function(){return b("bs_belt_Option").mapWithDefault(b("SkytaleDBExec.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"contacts").asc,{hd:b("bs_caml_format").caml_int64_of_string(a),tl:0})),void 0,function(a){return a.h})},[a,c])}function c(a){var c=b("SkytaleDBHook.bs").useHook(void 0);return g.useMemo(function(){return b("bs_belt_Option").mapWithDefault(b("SkytaleDBExec.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"contacts").asc,{hd:b("bs_caml_format").caml_int64_of_string(a),tl:0})),void 0,function(a){var b=a.p;if(b!==void 0)return b;else return a.h})},[a,c])}function d(a){var c=b("SkytaleDBHook.bs").useHook(void 0);return g.useMemo(function(){return b("bs_belt_Option").mapWithDefault(b("SkytaleDBExec.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"contacts").asc,{hd:b("bs_caml_format").caml_int64_of_string(a),tl:0})),void 0,function(a){return a.K})},[a,c])}function e(a){var c=b("SkytaleDBHook.bs").useHook(void 0);return g.useMemo(function(){return b("bs_belt_Option").mapWithDefault(b("SkytaleDBExec.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"contacts").asc,{hd:b("bs_caml_format").caml_int64_of_string(a),tl:0})),void 0,function(a){var c=a.p;c=c!==void 0?c:a.h;a=a.I;a=b("bs_caml_int64").eq(a,b("LSContactGender.bs").female)?b("GenderConst").FEMALE_SINGULAR:b("bs_caml_int64").eq(a,b("LSContactGender.bs").male)?b("GenderConst").MALE_SINGULAR:b("bs_caml_int64").eq(a,b("LSContactGender.bs").neuter)?b("GenderConst").NEUTER_SINGULAR:b("GenderConst").NOT_A_PERSON;return[c,a]})},[a,c])}function h(a){var c=b("SkytaleDBHook.bs").useHook(void 0);return b("bs_belt_Option").mapWithDefault(b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"contacts").asc,{hd:b("bs_caml_format").caml_int64_of_string(a),tl:0})},[a,c])),!0,function(a){if(!b("gkx")("1845222"))return!0;a=a.N;if(a!==void 0)return b("bs_caml_int64").eq(b("LSContactReachabilityStatusType.bs").reachable,a);else return!0})}f.useParticipantName=a;f.useParticipantShortName=c;f.useParticipantSecondaryName=d;f.useNameAndGender=e;f.useParticipantReachabilityStatus=h}),null);
__d("MWLSChatComposerUserMessageRequestInfoText.bs",["fbt","bs_curry","React","JSResource","stylex","TetraText.react","CometPressable.react","MWLSParticipantDetails.bs","TetraTextPairing.react","CometLazyDialogTrigger.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React"),j={rootSmall:{borderTop:"opwvks06",color:"m9osqain",marginTop:"n1l5q3vz",marginEnd:"ad2k81qe",marginBottom:"oygrvhab",marginStart:"f9o22wc5",paddingTop:"l29c1vbm",paddingEnd:"dpri0uem",paddingBottom:"ae35evdt",paddingStart:"pcu7st4i"},rootLarge:{color:"m9osqain",marginTop:"n1l5q3vz",marginEnd:"ad2k81qe",marginBottom:"oygrvhab",marginStart:"f9o22wc5",paddingTop:"l29c1vbm",paddingEnd:"dpri0uem",paddingBottom:"ae35evdt",paddingStart:"pcu7st4i",maxWidth:"bl38xub0"},footer:{marginTop:"knvmm38d",textAlign:"oqcyycmt"}};function a(a){var c=a.fbid,d=a.onDeleteConversation;a=a.size;var e=b("MWLSParticipantDetails.bs").useParticipantName(c);e=e!==void 0?e:g._("Facebook User");var f=b("MWLSParticipantDetails.bs").useParticipantShortName(c);f=f!==void 0?f:g._("Facebook User");var k=b("MWLSParticipantDetails.bs").useParticipantSecondaryName(c);k=k!==void 0&&k!==""?k:void 0;var l=k!==void 0?i.jsx(b("TetraText.react"),{color:"primary",type:"bodyLink4",children:g._("You're Messaging an Instagram Account")}):null,m=k!==void 0?e!==k?g._("If you reply, {IGDisplayName} ({IGUserName}) will also be able to call you from Instagram and see info like your Active Status and when you've read messages.",[g._param("IGDisplayName",e),g._param("IGUserName",k)]):g._("If you reply, {IGUserName} will also be able to call you and see info like your Active Status and when you've seen messages.",[g._param("IGUserName",k)]):g._("If you reply, {FBFullName} will also be able to call you and see info like your Active Status and when you've read messages.",[g._param("FBFullName",e)]),n=k!==void 0?e!==k?g._("I don't want to hear from {name} ({username})",[g._param("name",e),g._param("username",k)]):g._("I don't want to hear from {username}",[g._param("username",k)]):g._("I don't want to hear from {name}",[g._param("name",e)]);return i.jsxs("div",{children:[i.jsx(b("TetraTextPairing.react"),{body:i.jsx(b("TetraText.react"),{align:"center",color:"secondary",type:"body4",children:m}),headline:l,textAlign:"center"}),i.jsx("div",{children:i.jsx(b("CometLazyDialogTrigger.react"),{dialogResource:b("JSResource")("MWChatDeclineUserMessageRequestDialogForJSResource.react").__setRef("MWLSChatComposerUserMessageRequestInfoText.bs"),dialogProps:{onDeleteConversation:d,otherUserFbid:c,otherUserName:e,otherUserShortName:f,otherUserSecondaryName:k},children:function(a,c){return i.jsx(b("CometPressable.react"),{ref:c,onPress:function(c){return b("bs_curry")._1(a,void 0)},children:i.jsx(b("TetraText.react"),{color:"primary",type:"bodyLink4",children:n})})}}),className:(h||(h=b("stylex")))(j.footer)})],className:h(a==="small"?j.rootSmall:j.rootLarge)})}c=a;f.styles=j;f.make=c}),null);
__d("MWLSLoadIsDisabledComposerThreadLevel.bs",["React","SkytaleDB","SkytaleDBHook.bs","SkytaleDBQuery.bs","MWThread_DEPRECATED.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0);return b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,{hd:b("MWThread_DEPRECATED.bs").toThreadKey(a),tl:0}),function(a){return a.K})},[JSON.stringify(a),c]))}f.useHook=a}),null);
__d("LSMessageReplySourceType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";c=(a=b("bs_caml_int64")).zero;d=a.one;e=a.mk(2,0);b=a.mk(3,0);var g=a.mk(4,0);a=a.mk(5,0);f.none=c;f.message=d;f.story=e;f.forward=b;f.fbStoryShare=g;f.igStoryShare=a}),null);
__d("MWLSSendMessageUtils.bs",["bs_belt_Option","MWChatMessageId.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("bs_belt_Option").flatMap(a,function(a){a=a.content;switch(a.TAG|0){case 0:case 1:case 2:return b("MWChatMessageId.bs").getMessageId(a._0.messageID)}})}f.getReplySourceId=a}),null);
__d("MWLSSendFileMessageUtils.bs",["fbt","LS.bs","bs_curry","LSVec.bs","LSDict","bs_caml_int64","bs_belt_Option","bs_caml_option","MWChatImage.bs","MessagePowerUp.bs","MercuryLocalIDs","MNLSXMALayoutType.bs","MWLSSendMessageUtils.bs","MessagingAttachmentType.bs","LSMessageReplySourceType.bs","LSMessageReplySourceTypeV2.bs","CometLocalVideoFileThumbnailSuspense.react","LSMailboxLocalApplyOptimisticMessageWithAttachmentsStoredProcedure"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var c=a.length;if(c!==1)if(c!==0){c=a.length;c=g._("You sent {number} photos",[g._param("number",String(c))])}else c=void 0;else{a=a[0];a=a.attachment_type;c=b("bs_caml_int64").eq(a,b("MessagingAttachmentType.bs").video)?g._("You sent an video"):b("bs_caml_int64").eq(a,b("MessagingAttachmentType.bs").image)?g._("You sent a photo"):g._("You sent an attachment")}return b("bs_belt_Option").map(c,function(a){return a.toString()})}function a(a,c){if(a.TAG===4)return;var d=a._1;a=a._0;var e;switch(a){case 0:e=URL.createObjectURL(d);break;case 1:e=b("CometLocalVideoFileThumbnailSuspense.react").getFromCache(d,b("MWChatImage.bs").defaultMaxHeight,b("MWChatImage.bs").defaultMaxHeight);break;case 2:e=void 0;break}var f=b("MercuryLocalIDs").generateOfflineThreadingID(void 0),g;switch(a){case 0:g=b("MessagingAttachmentType.bs").image;break;case 1:g=b("MessagingAttachmentType.bs").video;break;case 2:g=b("MessagingAttachmentType.bs").file;break}a=d.name;f=b("bs_caml_int64").eq(g,b("MessagingAttachmentType.bs").file)?{attachment_fbid:f,offline_attachment_id:f,attachment_type:g,attachment_index:b("bs_caml_int64").of_int32(c),filename:a,filesize:void 0,has_media:!1,has_xma:!0,playable_url:void 0,playable_url_mime_type:void 0,playable_duration_ms:void 0,preview_url:e,preview_url_mime_type:void 0,mini_preview:void 0,preview_width:void 0,preview_height:void 0,xma_layout_type:b("MNLSXMALayoutType.bs").single,xmas_template_type:void 0,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,image_url:void 0,action_url:void 0,title_text:a,subtitle_text:void 0,description_text:void 0,source_text:void 0,original_file_hash:void 0}:b("bs_caml_int64").eq(g,b("MessagingAttachmentType.bs").video)?{attachment_fbid:f,offline_attachment_id:f,attachment_type:g,attachment_index:b("bs_caml_int64").of_int32(c),filename:a,filesize:void 0,has_media:!0,has_xma:!1,playable_url:URL.createObjectURL(d),playable_url_mime_type:d.type,playable_duration_ms:void 0,preview_url:e,preview_url_mime_type:void 0,mini_preview:void 0,preview_width:b("bs_caml_int64").mk(200,0),preview_height:b("bs_caml_int64").mk(200,0),xma_layout_type:void 0,xmas_template_type:void 0,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,image_url:void 0,action_url:void 0,title_text:void 0,subtitle_text:void 0,description_text:void 0,source_text:void 0,original_file_hash:void 0}:{attachment_fbid:f,offline_attachment_id:f,attachment_type:g,attachment_index:b("bs_caml_int64").of_int32(c),filename:a,filesize:void 0,has_media:!0,has_xma:!1,playable_url:void 0,playable_url_mime_type:void 0,playable_duration_ms:void 0,preview_url:e,preview_url_mime_type:d.type,mini_preview:void 0,preview_width:void 0,preview_height:void 0,xma_layout_type:void 0,xmas_template_type:void 0,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,image_url:void 0,action_url:void 0,title_text:void 0,subtitle_text:void 0,description_text:void 0,source_text:void 0,original_file_hash:void 0};c=b("bs_belt_Option").getExn(b("bs_caml_option").nullable_to_opt(d.uploadID));return[c,f]}function c(a,c,d,e,f,g,i){var j=h(g);return b("LSMailboxLocalApplyOptimisticMessageWithAttachmentsStoredProcedure")(c,d,e,f!==void 0?b("bs_caml_option").valFromOption(f):void 0,b("bs_caml_option").option_get(j!==void 0?j:f),!1,void 0,b("bs_caml_option").option_get(b("MWLSSendMessageUtils.bs").getReplySourceId(i)),b("LSMessageReplySourceType.bs").message,b("LSMessageReplySourceTypeV2.bs").message,b("LSVec.bs").make(g.map(function(a){return b("LSDict").fromObject(a)})),b("MessagePowerUp.bs").none,b("bs_curry")._1(b("LS.bs").make,a)).then(function(a){return a[0]})}f.snippetForAttachments=h;f.makeAttachmentPayload=a;f.localApplyOptimisticMessageWithAttachments=c}),null);
__d("MWLSSendAudioMessage.bs",["Promise","LS.bs","bs_curry","React","MWLSActor.bs","bs_caml_int64","bs_belt_Option","bs_caml_format","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","MercuryLocalIDs","MWThread_DEPRECATED.bs","MessagingAttachmentType.bs","MWLSSendFileMessageUtils.bs","LSMessagingThreadTypeUtil.bs","LSMediaSendInsertNewMediaSendStoredProcedure","LSMediaSendResumeMediaSendJobStoredProcedure","LSMediaSendMarkSubJobCompletedV2StoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=function(a){return a.toString()};function a(a){var c=b("MWLSActor.bs").useActor(void 0),d=b("SkytaleDBHook.bs").useHook(void 0);a=g.useCallback(function(a){return function(e,f){var g=b("MWThread_DEPRECATED.bs").toThreadKey(a),h=b("LSMessagingThreadTypeUtil.bs").ofThreadId(a),i=b("MercuryLocalIDs").generateOfflineThreadingID(void 0),j=i,k=URL.createObjectURL(e);e=e.type;f=b("bs_caml_int64").of_float(f);var l={attachment_fbid:i,offline_attachment_id:j,attachment_type:b("MessagingAttachmentType.bs").audio,attachment_index:b("bs_caml_int64").zero,filename:void 0,filesize:void 0,has_media:!0,has_xma:!1,playable_url:k,playable_url_mime_type:e,playable_duration_ms:f,preview_url:void 0,preview_url_mime_type:void 0,mini_preview:void 0,preview_width:void 0,preview_height:void 0,xma_layout_type:void 0,xmas_template_type:void 0,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,image_url:void 0,action_url:void 0,title_text:void 0,subtitle_text:void 0,description_text:void 0,source_text:void 0,original_file_hash:void 0};return b("LSTransaction.bs").run(d,function(a){return b("MWLSSendFileMessageUtils.bs").localApplyOptimisticMessageWithAttachments(a,c,g,h,void 0,[l],void 0).then(function(c){var d=b("LSMediaSendInsertNewMediaSendStoredProcedure")(b("bs_belt_Option").getExn(j),c,b("bs_caml_int64").zero,b("MessagingAttachmentType.bs").audio,!1,!1,!1,!1,!1,b("bs_curry")._1(b("LS.bs").make,a));b("promiseDone")(d,void 0,void 0);return b("Promise").resolve(c)}).then(function(a){return[a,i]})},"readWrite")}},[c,d]);var e=g.useCallback(function(a){return function(c,e){var f=b("LSTransaction.bs").run(d,function(d){return b("LSMediaSendMarkSubJobCompletedV2StoredProcedure")(c,b("bs_caml_format").caml_int64_of_string(h(e)),void 0,void 0,void 0,b("bs_curry")._1(b("LS.bs").make,d)).then(function(c){return b("LSMediaSendResumeMediaSendJobStoredProcedure")(a,b("bs_caml_int64").zero,b("bs_curry")._1(b("LS.bs").make,d))})},"readWrite");b("promiseDone")(f,void 0,void 0)}},[d]);return[a,e]}f.castFbidFromNumber=h;f.useMessage=a}),null);
__d("MWLSPostbackCtaHandler.bs",["LS.bs","bs_curry","React","MWLSActor.bs","bs_caml_option","MWThreadKey.bs","promiseDone","LSMailboxType.bs","LSTransaction.bs","SkytaleDBHook.bs","MessagePowerUp.bs","MessagingThreadType.bs","LSMessageReplySourceType.bs","LSMessageReplySourceTypeV2.bs","LSMessagingThreadAttributionType.bs","LSMailboxOptimisticSendMessageStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWLSActor.bs").useActor(void 0),e=b("MWThreadKey.bs").useIdMemoizedExn(void 0);return g.useMemo(function(){return function(a,f){b("promiseDone")(b("LSTransaction.bs").run(c,function(c){return b("LSMailboxOptimisticSendMessageStoredProcedure")(d,e,b("MessagingThreadType.bs").oneToOne,b("LSMailboxType.bs").messenger,f,f,!1,void 0,void 0,void 0,void 0,b("LSMessagingThreadAttributionType.bs").unknown,void 0,a!==void 0?b("bs_caml_option").valFromOption(a):void 0,void 0,b("LSMessageReplySourceType.bs").none,b("LSMessageReplySourceTypeV2.bs").none,void 0,!0,!0,void 0,void 0,b("MessagePowerUp.bs").none,void 0,b("bs_curry")._1(b("LS.bs").make,c))},"readWrite"),void 0,void 0)}},[c,d,e])}f.usePostbackCtaHandler=a}),null);
__d("MWLSSendCometPostback.bs",["bs_curry","React","MWLSPostbackCtaHandler.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("MWLSPostbackCtaHandler.bs").usePostbackCtaHandler(void 0);return g.useCallback(function(a){return function(d){return b("bs_curry")._2(c,JSON.stringify(d),a)}},[c])}f.useSendCometPostback=a}),null);
__d("LsReplySentFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1743879");c=b("FalcoLoggerInternal").create("ls_reply_sent",a);e.exports=c}),null);
__d("MWLSLogSend.bs",["LsReplySentFalcoEvent","LsFalcoEventEntryPoint.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){if(a){b("LsReplySentFalcoEvent").log(function(){return{funnel:{entry_point:b("LsFalcoEventEntryPoint.bs").messageActions}}});return}}f.logSent=a}),null);
__d("MWLSMediaSendManager.bs",["LS.bs","bs_curry","React","LSDict","LSJson","bs_caml_int64","bs_belt_Option","bs_caml_format","bs_caml_option","LSMessagingThreadTypeUtil.bs","LSMediaSendInsertNewMediaSendStoredProcedure","LSMediaSendResumeMediaSendJobStoredProcedure","LSMediaSendMarkSubJobCompletedV2StoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){return{runningJobs:new Map(),secureFiles:new Map(),uploadedButNotAttached:new Map()}}function c(a,c){return b("bs_caml_option").nullable_to_opt(a.runningJobs.get(c))}function d(a,b,c){a.runningJobs.set(b,c)}function h(a,b){a.uploadedButNotAttached["delete"](b)}function e(a,b,c){a.uploadedButNotAttached.set(b,c)}function i(a,c){return b("bs_caml_option").nullable_to_opt(a.uploadedButNotAttached.get(c))}function j(a,c){return b("bs_caml_option").nullable_to_opt(a.secureFiles.get(c))}function k(a,b,c){a.secureFiles.set(b,c)}var l=g.createContext(void 0);function m(a){return b("bs_belt_Option").getExn(g.useContext(l))}function n(a){return g.useMemo(function(){return function(a,c,d,e,f,g,h){h=b("LSMessagingThreadTypeUtil.bs").ofThreadId(h);return b("LSMediaSendInsertNewMediaSendStoredProcedure")(d,c,b("bs_caml_int64").of_int32(e),f,!1,!1,!1,b("LSMessagingThreadTypeUtil.bs").isSecure(h),!1,b("bs_curry")._1(b("LS.bs").make,a)).then(function(a){return[g,[c,d]]})}})}var o=function(a){return a.toString()};function p(a){var c=b("bs_belt_Option").getExn(g.useContext(l));return g.useCallback(function(a){return function(d,e){var f=d[1],g=f[0],i=d[0];d=b("LSJson").stringify(new(b("LSDict"))([["mac","TODO"]]));var j=b("bs_curry")._1(b("LS.bs").make,a);return b("LSMediaSendMarkSubJobCompletedV2StoredProcedure")(f[1],b("bs_caml_format").caml_int64_of_string(o(e)),void 0,d,void 0,j).then(function(a){h(c,i);return b("LSMediaSendResumeMediaSendJobStoredProcedure")(g,b("bs_caml_int64").zero,j)}).then(function(a){return window.Promise.resolve(void 0)})}},[c])}f.getUploadJob=c;f.saveUploadJob=d;f.deleteFile=h;f.saveFile=e;f.getFile=i;f.getSecureFile=j;f.saveSecureFile=k;f.useManager=m;f.make=a;f.context=l;f.useStartMediaSend=n;f.useResumeMediaSend=p}),null);
__d("MWLSMediaSendUploadHandler.bs",["bs_curry","React","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","MWLSMediaSendManager.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWLSMediaSendManager.bs").useManager(void 0),e=b("MWLSMediaSendManager.bs").useResumeMediaSend(void 0);return g.useCallback(function(a){return function(f){var g=b("MWLSMediaSendManager.bs").getUploadJob(d,a);if(g===void 0)return b("MWLSMediaSendManager.bs").saveFile(d,a,f);var h=[a,g];g=b("LSTransaction.bs").run(c,function(a){return b("bs_curry")._3(e,a,h,f)},"readWrite");b("promiseDone")(g,void 0,void 0)}},[c,d,e])}f.useUploadSuccessCallback=a}),null);
__d("MWLSSendFileMessage.bs",["bs_curry","React","MWLSActor.bs","bs_belt_Array","bs_belt_Option","bs_caml_option","MWLSLogSend.bs","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","bs_caml_splice_call","MWThread_DEPRECATED.bs","MWLSMediaSendManager.bs","CometComposerViewState.bs","MWLSSendFileMessageUtils.bs","LSMessagingThreadTypeUtil.bs","MWLSMediaSendUploadHandler.bs","MWLSThreadHasInstagramUsers.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function h(a){var c=b("MWLSActor.bs").useActor(void 0),d=b("MWLSMediaSendManager.bs").useStartMediaSend(void 0);return g.useCallback(function(a){return function(e,f,g,h){var i=b("LSMessagingThreadTypeUtil.bs").ofThreadId(a),j=b("MWThread_DEPRECATED.bs").toThreadKey(a),k=b("bs_belt_Array").keepMap(g.map(b("MWLSSendFileMessageUtils.bs").makeAttachmentPayload),function(a){return a});return b("MWLSSendFileMessageUtils.bs").localApplyOptimisticMessageWithAttachments(e,c,j,i,f,k.map(function(a){return a[1]}),h).then(function(c){return window.Promise.all(k.map(function(f,g){var h=f[1];return b("bs_curry")._7(d,e,c,b("bs_belt_Option").getExn(h.offline_attachment_id),g,h.attachment_type,f[0],a)}))})}},[c,d])}function a(a,c){var d=b("SkytaleDBHook.bs").useHook(void 0);c=b("MWLSActor.bs").useActor(void 0);var e=b("MWLSMediaSendUploadHandler.bs").useUploadSuccessCallback(void 0),f=h(void 0),i=b("MWLSMediaSendManager.bs").useResumeMediaSend(void 0),j=b("MWLSMediaSendManager.bs").useStartMediaSend(void 0),k=b("MWLSMediaSendManager.bs").useManager(void 0),l=b("MWLSThreadHasInstagramUsers.bs").useCallbackHook(void 0);c=g.useCallback(function(c){return function(e,g,h){g=b("MWThread_DEPRECATED.bs").toThreadKey(c);g=b("bs_curry")._1(l,g).then(function(g){var i=b("bs_curry")._1(f,c),j=b("bs_belt_Array").partition(h,function(a){return b("CometComposerViewState.bs").MediaAttachment.fileType(a)===0}),k=j[1],l=j[0];return b("LSTransaction.bs").run(d,function(c){var d=function(d){var f=[];return window.Promise.all(d.map(function(d,f){if(f===0)return b("bs_curry")._4(i,c,e,[d],a);else return b("bs_curry")._4(i,c,void 0,[d],a)})).then(function(a){return b("bs_caml_splice_call").spliceObjApply(f,"concat",[a])})};if(l.length!==0)if(g)return d(l);else return b("bs_curry")._4(i,c,e,l,a).then(function(a){return window.Promise.all(k.map(function(a){return b("bs_curry")._4(i,c,void 0,[a],void 0)})).then(function(c){return b("bs_caml_splice_call").spliceObjApply(a,"concat",[c])})});else if(k.length!==0)return d(k);else return[]},"readWrite")}).then(function(a){return b("LSTransaction.bs").run(d,function(c){return window.Promise.all(a.map(function(a){var d=a[0],e=b("MWLSMediaSendManager.bs").getFile(k,d);if(e!==void 0)return b("bs_curry")._3(i,c,a,b("bs_caml_option").valFromOption(e));else{b("MWLSMediaSendManager.bs").saveUploadJob(k,d,a[1]);return}}))},"readWrite")});b("promiseDone")(g,function(c){return b("MWLSLogSend.bs").logSent(a!==void 0)},void 0)}},[d,f,i,k,c,a,j]);j=b("bs_curry").__2(e);return[c,j]}f.useSendFileMessage=a}),null);
__d("MWLSSendGifMessage.bs",["LS.bs","bs_curry","React","MWLSActor.bs","bs_caml_format","bs_caml_option","MWLSLogSend.bs","promiseDone","LSMailboxType.bs","LSTransaction.bs","SkytaleDBHook.bs","MessagePowerUp.bs","MWThread_DEPRECATED.bs","MessagingThreadType.bs","MWLSSendMessageUtils.bs","recoverableViolation","LSMessageReplySourceType.bs","LSMessagingThreadTypeUtil.bs","LSMessageReplySourceTypeV2.bs","LSMessagingThreadAttributionType.bs","LSMailboxOptimisticSendMessageStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWLSActor.bs").useActor(void 0);return g.useCallback(function(a){return function(e,f){var g=e.source.url,h=b("bs_caml_format").caml_int64_of_string(e.platformFBID);e=b("LSTransaction.bs").run(c,function(c){var e=b("MWThread_DEPRECATED.bs").toThreadKey(a),i=b("LSMessagingThreadTypeUtil.bs").ofThreadId(a);if(b("LSMessagingThreadTypeUtil.bs").isSecure(i)){b("recoverableViolation")("Gif send not implemented for secure conversations","messenger_privacy_web");return b("LS.bs").result("")}else return b("LSMailboxOptimisticSendMessageStoredProcedure")(d,e,b("MessagingThreadType.bs").oneToOne,b("LSMailboxType.bs").messenger,void 0,void 0,!1,void 0,void 0,g!==void 0?b("bs_caml_option").valFromOption(g):void 0,h!==void 0?b("bs_caml_option").valFromOption(h):void 0,b("LSMessagingThreadAttributionType.bs").unknown,void 0,void 0,b("bs_caml_option").option_get(b("MWLSSendMessageUtils.bs").getReplySourceId(f)),b("LSMessageReplySourceType.bs").message,b("LSMessageReplySourceTypeV2.bs").message,void 0,!0,!0,void 0,void 0,b("MessagePowerUp.bs").none,void 0,b("bs_curry")._1(b("LS.bs").make,c))},"readWrite");b("promiseDone")(e,function(a){return b("MWLSLogSend.bs").logSent(f!==void 0)},void 0)}},[c,d])}f.useSendGifMessage=a}),null);
__d("MWLSSendMenuItem.bs",["LS.bs","bs_curry","React","MWLSActor.bs","bs_pervasives","promiseDone","LSMailboxType.bs","LSTransaction.bs","SkytaleDBHook.bs","MessagePowerUp.bs","MWThread_DEPRECATED.bs","MessagingThreadType.bs","LSMessageReplySourceType.bs","LSMessagingThreadTypeUtil.bs","LSMessageReplySourceTypeV2.bs","LSMessagingThreadAttributionType.bs","LSMailboxOptimisticSendMessageStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWLSActor.bs").useActor(void 0);return g.useCallback(function(a){return function(e,f){var g=b("LSTransaction.bs").run(c,function(c){var g=b("MWThread_DEPRECATED.bs").toThreadKey(a),h=b("LSMessagingThreadTypeUtil.bs").ofThreadId(a);if(b("LSMessagingThreadTypeUtil.bs").isSecure(h))return b("bs_pervasives").failwith("not supported");else return b("LSMailboxOptimisticSendMessageStoredProcedure")(d,g,b("MessagingThreadType.bs").oneToOne,b("LSMailboxType.bs").messenger,e,e,!1,void 0,void 0,void 0,void 0,b("LSMessagingThreadAttributionType.bs").unknown,void 0,f,void 0,b("LSMessageReplySourceType.bs").message,b("LSMessageReplySourceTypeV2.bs").message,void 0,!0,!0,void 0,void 0,b("MessagePowerUp.bs").none,void 0,b("bs_curry")._1(b("LS.bs").make,c))},"readWrite");b("promiseDone")(g,void 0,void 0)}},[c,d])}f.useSendMenuItem=a}),null);
__d("MWLSSendStickerMessage.bs",["Promise","LS.bs","bs_curry","React","LSDict","MWLSActor.bs","bs_caml_int64","bs_caml_format","bs_caml_option","MWLSLogSend.bs","promiseDone","requireCond","LSMailboxType.bs","LSTransaction.bs","SkytaleDBHook.bs","MessagePowerUp.bs","MWThread_DEPRECATED.bs","MessagingThreadType.bs","MWLSSendMessageUtils.bs","LSMessageReplySourceType.bs","LSMessagingThreadTypeUtil.bs","LSMessageReplySourceTypeV2.bs","LSMessagingThreadAttributionType.bs","LSMailboxOptimisticSendMessageStoredProcedure","cr:1765435"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWLSActor.bs").useActor(void 0);return g.useCallback(function(a){return function(e,f,g){var h=b("LSTransaction.bs").run(c,function(c){var h=b("MWThread_DEPRECATED.bs").toThreadKey(a),i=b("LSMessagingThreadTypeUtil.bs").ofThreadId(a);if(b("LSMessagingThreadTypeUtil.bs").isSecure(i))if(b("cr:1765435")==null)return b("Promise").resolve(b("LS.bs").result(""));else return b("bs_curry")._6(b("cr:1765435").createAndSendOptimisticMessage,c,h,b("MessagingThreadType.bs").tincanOneToOne,void 0,d,e).then(function(a){return b("Promise").resolve(b("LS.bs").result(a))});else return b("LSMailboxOptimisticSendMessageStoredProcedure")(d,h,b("MessagingThreadType.bs").oneToOne,b("LSMailboxType.bs").messenger,void 0,void 0,!1,b("bs_caml_format").caml_int64_of_string(e),void 0,void 0,void 0,b("LSMessagingThreadAttributionType.bs").unknown,void 0,void 0,b("bs_caml_option").option_get(b("MWLSSendMessageUtils.bs").getReplySourceId(f)),b("LSMessageReplySourceType.bs").message,b("LSMessageReplySourceTypeV2.bs").message,void 0,!0,!0,b("LSDict").fromObject({playable_url:void 0,playable_url_fallback:void 0,playable_url_expiration_timestamp_ms:void 0,playable_url_mime_type:void 0,preview_url:g,preview_url_fallback:void 0,preview_url_expiration_timestamp_ms:void 0,preview_url_mime_type:void 0,preview_width:b("bs_caml_int64").zero,preview_height:b("bs_caml_int64").zero}),void 0,b("MessagePowerUp.bs").none,void 0,b("bs_curry")._1(b("LS.bs").make,c))},"readWrite");b("promiseDone")(h,function(a){return b("MWLSLogSend.bs").logSent(f!==void 0)},void 0)}},[c,d])}f.$MPWMessaging$requireCond=b("cr:1765435");f.useSendStickerMessage=a}),null);
__d("MWLSSendTextMessage.bs",["Promise","LS.bs","bs_curry","React","LSDict","MWLSActor.bs","bs_caml_option","MWLSLogSend.bs","promiseDone","requireCond","LSMailboxType.bs","LSTransaction.bs","SkytaleDBHook.bs","MessagePowerUp.bs","MWThread_DEPRECATED.bs","MessagingThreadType.bs","MWLSSendMessageUtils.bs","LSMessageReplySourceType.bs","LSMessagingThreadTypeUtil.bs","LSMessageReplySourceTypeV2.bs","LSMessagingThreadAttributionType.bs","LSMailboxOptimisticSendMessageStoredProcedure","cr:1765435"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a,c){c=a!==void 0?a:!1;var d=b("SkytaleDBHook.bs").useHook(void 0),e=b("MWLSActor.bs").useActor(void 0),f=c===!1;return g.useCallback(function(a){return function(c,g,h){var i=b("MWThread_DEPRECATED.bs").toThreadKey(a),j=b("LSMessagingThreadTypeUtil.bs").ofThreadId(a),k=g!==void 0?b("bs_caml_option").some(b("LSDict").fromObject({mention_offsets:g.map(function(a){return String(a.offset)}).join(","),mention_lengths:g.map(function(a){return String(a.length)}).join(","),mention_ids:g.map(function(a){return a.id}).join(","),mention_types:g.length!==0?g.map(function(a){return a.type}).join(","):void 0})):void 0;g=b("LSTransaction.bs").run(d,function(a){if(b("LSMessagingThreadTypeUtil.bs").isSecure(j))if(b("cr:1765435")==null)return b("Promise").resolve(b("LS.bs").result(""));else return b("bs_curry")._6(b("cr:1765435").createAndSendOptimisticMessage,a,i,b("MessagingThreadType.bs").tincanOneToOne,c,e,void 0).then(function(a){return b("Promise").resolve(b("LS.bs").result(a))});else return b("LSMailboxOptimisticSendMessageStoredProcedure")(e,i,b("MessagingThreadType.bs").oneToOne,b("LSMailboxType.bs").messenger,c,c,!1,void 0,void 0,void 0,void 0,b("LSMessagingThreadAttributionType.bs").unknown,void 0,void 0,b("bs_caml_option").option_get(b("MWLSSendMessageUtils.bs").getReplySourceId(h)),b("LSMessageReplySourceType.bs").message,b("LSMessageReplySourceTypeV2.bs").message,k!==void 0?b("bs_caml_option").valFromOption(k):void 0,f,!0,void 0,void 0,b("MessagePowerUp.bs").none,void 0,b("bs_curry")._1(b("LS.bs").make,a))},"readWrite");b("promiseDone")(g,function(a){return b("MWLSLogSend.bs").logSent(h!==void 0)},void 0)}},[d,e,f])}f.$MPWMessaging$requireCond=b("cr:1765435");f.useSendTextMessage=a}),null);
__d("LSDisabledPageComposer.bs",["ix","fbt","bs_curry","React","fbicon","JSResource","stylex","bs_caml_option","MWUISendMenuItem.bs","TetraButton.react","MWThread_DEPRECATED.bs","CometLazyPopoverTrigger.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){var c=b("bs_curry")._1(b("MWUISendMenuItem.bs").useSendMenuItem,void 0),d=b("MWThread_DEPRECATED.bs").useIdExn(void 0);if(typeof d==="string")a=void 0;else{var e=d.NAME;a=e==="User"||e==="Page"?b("bs_caml_option").some(d.VAL):void 0}return i.jsx(b("CometLazyPopoverTrigger.react"),{popoverResource:b("JSResource")("LSComposerPersistentMenu.react").__setRef("LSDisabledPageComposer.bs"),popoverProps:{pageId:a,onSelect:function(a){return b("bs_curry")._3(c,d,a.title,a.id)}},align:"middle",children:function(a,c,d,e,f,j,k){return i.jsx("div",{children:i.jsx(b("TetraButton.react"),{icon:b("fbicon")._(g("512878"),20),label:h._("Menu"),onPress:function(a){return b("bs_curry")._1(c,void 0)},reduceEmphasis:!0}),ref:a,className:"tw6a2znq f10w8fjw d1544ag0 pybr56ya pcgkmkmd qzhwtbm6 j83agx80"})}})}c=a;f.make=c}),null);
__d("MWLSChatContextBanner.bs",["React","SkytaleDB","bs_belt_Array","bs_belt_Option","MWThreadKey.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a,c,d,e){var f=b("SkytaleDBHook.bs").useHook(void 0),h=b("MWThreadKey.bs").useIdMemoizedExn(void 0);a=b("bs_belt_Option").getWithDefault(b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(f,"threads").asc,{hd:h,tl:0}),function(a){var d=b("bs_belt_Array").keepMap([a.D,a.F],function(a){return a});a=a.B;if(a!==void 0&&c.length>0)return{_0:c,_1:a,_2:d,_3:e};else return 1})},[f,h,JSON.stringify(c)])),0);if(d)return a}f.useContextBanner=a}),null);
__d("LSAuthorityLevel.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";c=(a=b("bs_caml_int64")).mk(20,0);d=a.mk(40,0);e=a.mk(60,0);b=a.mk(75,0);var g=a.mk(80,0);a=a.mk(100,0);f.optimistic=c;f.clientPartial=d;f.serverPartial=e;f.authoritativePendingReplacement=b;f.authoritative=g;f.clientAuthoritativeDelete=a}),null);
__d("MWLSCreateThread.bs",["Promise","LS.bs","FBID.bs","bs_curry","bs_int64","LSVec.bs","React","SkytaleDB","bs_caml_int64","bs_belt_Option","bs_caml_format","bs_caml_option","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","LSAuthorityLevel.bs","SortedAsyncIterable.bs","LSMailboxCreateGroupThreadWithAdminTextStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0);return g.useCallback(function(a){return function(d){var e=b("bs_belt_Option").mapWithDefault(d,void 0,function(a){return a.name});return b("LSTransaction.bs").run(c,function(c){return b("LSMailboxCreateGroupThreadWithAdminTextStoredProcedure")(b("LSVec.bs").make(a.map(b("bs_caml_format").caml_int64_of_string)),void 0,e!==void 0?b("bs_caml_option").valFromOption(e):void 0,b("bs_curry")._1(b("LS.bs").make,c))},"readWrite").then(function(a){var d=a[0];return new(b("Promise"))(function(a,e){e=b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").index("clientThreadKey").asc,{hd:d,tl:0});var f={contents:function(a){}},g=function(c){if(b("bs_caml_int64").eq(c.Z,b("LSAuthorityLevel.bs").authoritative)){b("bs_curry")._1(f.contents,void 0);return a(b("FBID.bs").ofStringExn(b("bs_int64").to_string(c.a)))}};f.contents=b("SortedAsyncIterable.bs").subscribe(e,function(a,b){if(typeof b==="number")return;else return g(b._0)});b("promiseDone")(b("SkytaleDBQuery.bs").firstExn(e),g)})})}},[c])}f.useHook=a}),null);
__d("MWLSMediaSendUtils.bs",["LS.bs","bs_curry","bs_caml_int64","bs_caml_format","bs_caml_option","LSMediaSendResumeMediaSendJobStoredProcedure","LSMediaSendMarkSubJobCompletedV2StoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=function(a){return a.toString()};function a(a,c,d,e,f,h,i){i=e!==void 0?b("bs_caml_option").valFromOption(e):void 0;e=f!==void 0?b("bs_caml_option").valFromOption(f):void 0;f=h!==void 0?b("bs_caml_option").valFromOption(h):void 0;return b("LSMediaSendMarkSubJobCompletedV2StoredProcedure")(c,b("bs_caml_format").caml_int64_of_string(g(d)),i!==void 0?b("bs_caml_option").valFromOption(i):void 0,e!==void 0?b("bs_caml_option").valFromOption(e):void 0,f!==void 0?b("bs_caml_option").valFromOption(f):void 0,b("bs_curry")._1(b("LS.bs").make,a))}function c(a,c){return b("LSMediaSendResumeMediaSendJobStoredProcedure")(c,b("bs_caml_int64").zero,b("bs_curry")._1(b("LS.bs").make,a))}f.castFbidFromNumber=g;f.markSubJobCompleted=a;f.resumeMediaSendJob=c}),null);
__d("MWLSImagePostbackCtaHandler.bs",["Promise","LS.bs","URI","FBID.bs","bs_curry","bs_int64","LSVec.bs","React","LSDict","ActorURI","MWLSActor.bs","SkytaleDB","bs_caml_array","bs_caml_int64","bs_caml_format","bs_caml_option","MWThreadKey.bs","promiseDone","LSMailboxType.bs","LSTransaction.bs","MercuryConfig","SkytaleDBHook.bs","MessagePowerUp.bs","MercuryLocalIDs","MWLSMediaSendUtils.bs","MessagingThreadType.bs","XComposerPhotoUploader","MessagingAttachmentType.bs","LSMessageReplySourceType.bs","LSMessageReplySourceTypeV2.bs","LSMessagingThreadAttributionType.bs","LSMediaSendInsertNewMediaSendStoredProcedure","LSMediaSendResumeMediaSendJobStoredProcedure","LSMailboxOptimisticSendMessageStoredProcedure","LSMediaSendMarkSubJobCompletedV2StoredProcedure","LSMailboxLocalApplyOptimisticMessageWithAttachmentsStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React");function i(a,c,d,e,f){var g=b("MercuryLocalIDs").generateOfflineThreadingID(void 0);return b("LSMailboxLocalApplyOptimisticMessageWithAttachmentsStoredProcedure")(c,d,b("MessagingThreadType.bs").oneToOne,void 0,void 0,!1,void 0,void 0,b("LSMessageReplySourceType.bs").none,b("LSMessageReplySourceTypeV2.bs").none,b("LSVec.bs").make([b("LSDict").fromObject({attachment_fbid:g,offline_attachment_id:g,attachment_type:b("MessagingAttachmentType.bs").image,attachment_index:b("bs_caml_int64").zero,filename:"postback image.jpg",filesize:void 0,has_media:!0,has_xma:!1,playable_url:void 0,playable_url_mime_type:void 0,playable_duration_ms:void 0,preview_url:e,preview_url_mime_type:"image/jpeg ",mini_preview:void 0,preview_width:void 0,preview_height:void 0,xma_layout_type:void 0,xmas_template_type:void 0,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,image_url:void 0,action_url:void 0,title_text:void 0,subtitle_text:void 0,description_text:void 0,source_text:void 0,original_file_hash:void 0})]),b("MessagePowerUp.bs").none,b("bs_curry")._1(b("LS.bs").make,a)).then(function(c){var e=c[0];return b("SkytaleDB").table(a,"messages_optimistic_context").add({a:b("bs_caml_format").caml_int64_of_string(e),b:d,c:e,d:void 0,e:void 0,f:void 0,g:void 0,h:f,i:void 0,j:void 0,k:void 0,l:!0}).then(function(a){return b("Promise").resolve([e,g])})})}function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWLSActor.bs").useActor(void 0),e=b("MWThreadKey.bs").useIdMemoizedExn(void 0);return h.useMemo(function(){return function(a,f,h){var j=b("FBID.bs").ofStringExn(b("bs_int64").to_string(d)),k=function(a){var d=a[1],e=a[0],f=new(b("XComposerPhotoUploader"))({concurrentLimit:3,onUploadFailure:function(a,b){return!0},onUploadProgress:function(a,b){},onUploadStart:function(a){a=b("LSTransaction.bs").run(c,function(a){return b("LSMediaSendInsertNewMediaSendStoredProcedure")(d,e,b("bs_caml_int64").zero,b("MessagingAttachmentType.bs").image,!1,!1,!1,!1,!1,b("bs_curry")._1(b("LS.bs").make,a))},"readWrite");b("promiseDone")(a,void 0,void 0)},onUploadSuccess:function(a,f){a=b("bs_caml_array").get(f.response.payload.metadata,0);f=a.image_id;if(f===void 0)return;var g=b("bs_caml_option").valFromOption(f);a=b("LSTransaction.bs").run(c,function(a){return b("LSMediaSendMarkSubJobCompletedV2StoredProcedure")(d,b("bs_caml_format").caml_int64_of_string(b("MWLSMediaSendUtils.bs").castFbidFromNumber(g)),void 0,void 0,void 0,b("bs_curry")._1(b("LS.bs").make,a)).then(function(c){return b("LSMediaSendResumeMediaSendJobStoredProcedure")(e,b("bs_caml_int64").zero,b("bs_curry")._1(b("LS.bs").make,a))})},"readWrite");b("promiseDone")(a,void 0,void 0)},retryLimit:1,uploadEndpoint:new(b("ActorURI").create)(new(g||(g=b("URI")))(b("MercuryConfig").upload_url),j)});a=window.fetch(h).then(function(a){return a.blob()}).then(function(a){f.getAsyncUploadRequest([new File([a],"postback image.jpg",{type:"image/jpeg"})],void 0).send();return b("Promise").resolve(void 0)});b("promiseDone")(a,void 0,void 0)},l=b("LSTransaction.bs").run(c,function(a){return b("LSMailboxOptimisticSendMessageStoredProcedure")(d,e,b("MessagingThreadType.bs").oneToOne,b("LSMailboxType.bs").messenger,f,f,!1,void 0,void 0,void 0,void 0,b("LSMessagingThreadAttributionType.bs").unknown,void 0,void 0,void 0,b("LSMessageReplySourceType.bs").none,b("LSMessageReplySourceTypeV2.bs").none,void 0,!0,!0,void 0,void 0,b("MessagePowerUp.bs").none,void 0,b("bs_curry")._1(b("LS.bs").make,a))},"readWrite").then(function(f){return b("LSTransaction.bs").run(c,function(c){return i(c,d,e,h,a).then(function(a){b("bs_curry")._1(k,a)})},"readWrite")});b("promiseDone")(l,void 0,void 0)}},[c,d,e])}f.usePostbackCtaHandler=a}),null);
__d("MWLSMarketplaceXmaCallFunctionCtaHandler.bs",["LS.bs","bs_curry","React","MWLSActor.bs","MWThreadKey.bs","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","LSMailboxOptimisticProcessMarketplaceCallFunctionCTAStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);a=b("MWLSActor.bs").useActor(void 0);return g.useCallback(function(a){return function(e,f,g){var h=b("LSTransaction.bs").run(c,function(c){return b("LSMailboxOptimisticProcessMarketplaceCallFunctionCTAStoredProcedure")(a,d,e,f,g,b("bs_curry")._1(b("LS.bs").make,c))},"readWrite");b("promiseDone")(h,void 0,void 0)}},[c,d,a])}f.useMarketplaceXmaCallFunctionCtaHandler=a}),null);
__d("MWLSWebUrlCtaHandler.bs",["React","JSResource","useCometLazyDialog"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){a=b("useCometLazyDialog")(b("JSResource")("MWInboxUrlWebviewDialog.react").__setRef("MWLSWebUrlCtaHandler.bs"));var c=a[0];return g.useCallback(function(a){return c({htmlBlob:a},function(a){})},[c])}f.useShowWebViewDialog=a}),null);
__d("LSPendingTasksPluginType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";c=(a=b("bs_caml_int64")).zero;d=a.one;e=a.mk(2,0);b=a.mk(3,0);var g=a.mk(4,0),h=a.mk(5,0),i=a.mk(6,0),j=a.mk(7,0),k=a.mk(8,0),l=a.mk(9,0),m=a.mk(10,0),n=a.mk(11,0),o=a.mk(12,0),p=a.mk(13,0),q=a.mk(14,0),r=a.mk(16,0);a=a.mk(17,0);f.lsBroker=c;f.payments=d;f.ephemeralMessaging=e;f.carrierMessaging=b;f.bugReporter=g;f.messageDenormalizations=h;f.seenHeads=i;f.mediaUpload=j;f.secureThreadSeenHeads=k;f.whatsappThread=l;f.secureThreadOverWaMessageSend=m;f.contactPruning=n;f.mediaManager=o;f.secureThreadOverWaEncryption=p;f.storyPost=q;f.coPresenceHeartbeat=r;f.secureThreadOverWaGroupManagement=a}),null);
__d("LSTasks.bs",["LSJson","SkytaleDB","bs_caml_int64","bs_pervasives","LSPendingTasksPluginType.bs"],(function(a,b,c,d,e,f){"use strict";function g(a){switch(a){case 0:return"10003";case 1:return"10002";case 2:return"155";case 3:return"10001";case 4:return"10007";case 5:return"10006";case 6:return"14";case 7:return"10004";case 8:return"10005";case 9:return"29";case 10:return"33";case 11:return b("bs_pervasives").failwith("Not a supported task type.")}}function a(a){switch(a){case 0:return"secure-message-batchlookup";case 1:return"secure-message-createthread";case 2:return"delete_message";case 3:return"secure-message-deviceregistration";case 4:return"secure-message-disabledevice";case 5:return"secure-message-enabledevice";case 6:return"message_range";case 7:return"secure-message-prekeyupload";case 9:return"reaction";case 10:return"unsend_message";case 8:case 11:return b("bs_pervasives").failwith("Not a supported task type")}}function c(a,c,d,e){return b("SkytaleDB").table(a,"pending_tasks").add({b:d,c:b("LSJson").stringify(e),d:g(c),e:(a=b("bs_caml_int64")).of_float(Date.now()),f:a.zero,g:a.zero,h:a.zero,i:void 0,j:void 0,k:b("LSPendingTasksPluginType.bs").lsBroker,l:a.zero,m:void 0,n:void 0,o:void 0})}f.createLabelForTask=g;f.queueFromType=a;f.enqueue=c}),null);
__d("LSWriteLabel.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";c=(a=b("bs_caml_int64")).zero;d=a.one;e=a.mk(2,0);b=a.mk(3,0);var g=a.mk(5,0),h=a.mk(6,0),i=a.mk(7,0),j=a.mk(8,0),k=a.mk(9,0),l=a.mk(10,0),m=a.mk(11,0),n=a.mk(12,0),o=a.mk(13,0),p=a.mk(14,0),q=a.mk(15,0),r=a.mk(17,0),s=a.mk(18,0),t=a.mk(19,0),u=a.mk(20,0),v=a.mk(21,0),w=a.mk(22,0),x=a.mk(23,0),y=a.mk(24,0),z=a.mk(25,0),A=a.mk(26,0),B=a.mk(27,0),C=a.mk(28,0),D=a.mk(29,0),E=a.mk(30,0),F=a.mk(31,0),G=a.mk(32,0),H=a.mk(33,0),I=a.mk(34,0),J=a.mk(35,0),K=a.mk(36,0),L=a.mk(37,0),M=a.mk(38,0),N=a.mk(39,0),O=a.mk(40,0),P=a.mk(41,0),Q=a.mk(42,0),R=a.mk(43,0),S=a.mk(44,0),T=a.mk(45,0),U=a.mk(46,0),V=a.mk(47,0),W=a.mk(49,0),X=a.mk(50,0),Y=a.mk(51,0),Z=a.mk(52,0),$=a.mk(53,0),aa=a.mk(54,0),ba=a.mk(55,0),ca=a.mk(56,0),da=a.mk(57,0),ea=a.mk(58,0),fa=a.mk(59,0),ga=a.mk(60,0),ha=a.mk(61,0),ia=a.mk(62,0),ja=a.mk(63,0),ka=a.mk(65,0),la=a.mk(66,0),ma=a.mk(67,0),na=a.mk(68,0),oa=a.mk(69,0),pa=a.mk(70,0),qa=a.mk(71,0),ra=a.mk(72,0),sa=a.mk(73,0),ta=a.mk(74,0),ua=a.mk(75,0),va=a.mk(76,0),wa=a.mk(77,0),xa=a.mk(78,0),ya=a.mk(79,0),za=a.mk(80,0),Aa=a.mk(81,0),Ba=a.mk(82,0),Ca=a.mk(83,0),Da=a.mk(84,0),Ea=a.mk(85,0),Fa=a.mk(86,0),Ga=a.mk(87,0),Ha=a.mk(88,0),Ia=a.mk(89,0),Ja=a.mk(90,0),Ka=a.mk(91,0),La=a.mk(92,0),Ma=a.mk(93,0),Na=a.mk(94,0),Oa=a.mk(95,0),Pa=a.mk(96,0),Qa=a.mk(97,0),Ra=a.mk(98,0),Sa=a.mk(99,0),Ta=a.mk(100,0),Ua=a.mk(101,0),Va=a.mk(102,0),Wa=a.mk(103,0),Xa=a.mk(104,0),Ya=a.mk(105,0),Za=a.mk(106,0),$a=a.mk(107,0),ab=a.mk(108,0),bb=a.mk(109,0),cb=a.mk(110,0),db=a.mk(111,0),eb=a.mk(112,0),fb=a.mk(113,0),gb=a.mk(114,0),hb=a.mk(115,0),ib=a.mk(116,0),jb=a.mk(117,0),kb=a.mk(118,0),lb=a.mk(119,0),mb=a.mk(120,0),nb=a.mk(121,0),ob=a.mk(122,0),pb=a.mk(123,0),qb=a.mk(125,0),rb=a.mk(126,0),sb=a.mk(127,0),tb=a.mk(128,0),ub=a.mk(129,0),vb=a.mk(130,0),wb=a.mk(131,0),xb=a.mk(132,0),yb=a.mk(133,0),zb=a.mk(134,0),Ab=a.mk(135,0),Bb=a.mk(136,0),Cb=a.mk(137,0),Db=a.mk(138,0),Eb=a.mk(139,0),Fb=a.mk(140,0),Gb=a.mk(141,0),Hb=a.mk(142,0),Ib=a.mk(143,0),Jb=a.mk(144,0),Kb=a.mk(145,0),Lb=a.mk(146,0),Mb=a.mk(147,0),Nb=a.mk(148,0),Ob=a.mk(149,0),Pb=a.mk(150,0),Qb=a.mk(151,0),Rb=a.mk(152,0),Sb=a.mk(153,0),Tb=a.mk(154,0),Ub=a.mk(155,0),Vb=a.mk(156,0),Wb=a.mk(157,0),Xb=a.mk(158,0),Yb=a.mk(159,0),Zb=a.mk(160,0),$b=a.mk(161,0),ac=a.mk(162,0),bc=a.mk(163,0),cc=a.mk(164,0),dc=a.mk(165,0),ec=a.mk(166,0),fc=a.mk(167,0),gc=a.mk(168,0),hc=a.mk(169,0),ic=a.mk(170,0),jc=a.mk(171,0),kc=a.mk(172,0),lc=a.mk(174,0),mc=a.mk(175,0),nc=a.mk(176,0),oc=a.mk(177,0),pc=a.mk(178,0),qc=a.mk(179,0),rc=a.mk(180,0),sc=a.mk(181,0),tc=a.mk(182,0),uc=a.mk(183,0),vc=a.mk(184,0),wc=a.mk(185,0),xc=a.mk(186,0),yc=a.mk(187,0),zc=a.mk(188,0),Ac=a.mk(189,0),Bc=a.mk(190,0),Cc=a.mk(191,0),Dc=a.mk(192,0),Ec=a.mk(193,0),Fc=a.mk(194,0),Gc=a.mk(195,0),Hc=a.mk(196,0),Ic=a.mk(197,0),Jc=a.mk(198,0),Kc=a.mk(199,0),Lc=a.mk(200,0),Mc=a.mk(201,0),Nc=a.mk(202,0),Oc=a.mk(203,0),Pc=a.mk(204,0),Qc=a.mk(205,0),Rc=a.mk(206,0),Sc=a.mk(207,0),Tc=a.mk(208,0),Uc=a.mk(209,0),Vc=a.mk(210,0),Wc=a.mk(211,0),Xc=a.mk(212,0),Yc=a.mk(213,0),Zc=a.mk(214,0),$c=a.mk(215,0),ad=a.mk(216,0),bd=a.mk(217,0),cd=a.mk(218,0),dd=a.mk(219,0),ed=a.mk(220,0),fd=a.mk(221,0),gd=a.mk(222,0),hd=a.mk(223,0),id=a.mk(224,0),jd=a.mk(225,0),kd=a.mk(226,0),ld=a.mk(227,0),md=a.mk(228,0),nd=a.mk(229,0),od=a.mk(230,0),pd=a.mk(231,0),qd=a.mk(232,0),rd=a.mk(233,0),sd=a.mk(234,0),td=a.mk(235,0),ud=a.mk(236,0),vd=a.mk(237,0),wd=a.mk(238,0),xd=a.mk(239,0),yd=a.mk(240,0),zd=a.mk(241,0),Ad=a.mk(242,0),Bd=a.mk(243,0),Cd=a.mk(244,0),Dd=a.mk(245,0),Ed=a.mk(246,0),Fd=a.mk(247,0),Gd=a.mk(248,0),Hd=a.mk(249,0),Id=a.mk(250,0),Jd=a.mk(251,0),Kd=a.mk(252,0),Ld=a.mk(253,0),Md=a.mk(254,0),Nd=a.mk(255,0),Od=a.mk(256,0),Pd=a.mk(257,0),Qd=a.mk(258,0),Rd=a.mk(259,0),Sd=a.mk(260,0),Td=a.mk(261,0),Ud=a.mk(262,0),Vd=a.mk(263,0),Wd=a.mk(264,0),Xd=a.mk(265,0),Yd=a.mk(266,0),Zd=a.mk(267,0),$d=a.mk(268,0),ae=a.mk(269,0),be=a.mk(270,0),ce=a.mk(271,0),de=a.mk(272,0),ee=a.mk(273,0),fe=a.mk(274,0),ge=a.mk(275,0),he=a.mk(276,0),ie=a.mk(277,0),je=a.mk(278,0),ke=a.mk(279,0),le=a.mk(280,0),me=a.mk(281,0),ne=a.mk(282,0),oe=a.mk(283,0),pe=a.mk(284,0),qe=a.mk(285,0),re=a.mk(286,0),se=a.mk(287,0),te=a.mk(288,0),ue=a.mk(289,0),ve=a.mk(290,0),we=a.mk(291,0),xe=a.mk(292,0),ye=a.mk(293,0),ze=a.mk(294,0),Ae=a.mk(295,0),Be=a.mk(296,0),Ce=a.mk(297,0),De=a.mk(298,0),Ee=a.mk(299,0),Fe=a.mk(300,0),Ge=a.mk(301,0),He=a.mk(302,0),Ie=a.mk(10001,0),Je=a.mk(10002,0),Ke=a.mk(10003,0),Le=a.mk(10004,0),Me=a.mk(10005,0),Ne=a.mk(10006,0),Oe=a.mk(10007,0),Pe=a.mk(10008,0),Qe=a.mk(10009,0),Re=a.mk(10010,0),Se=a.mk(10011,0),Te=a.mk(10012,0),Ue=a.mk(10013,0),Ve=a.mk(10014,0),We=a.mk(10015,0),Xe=a.mk(10016,0),Ye=a.mk(10017,0),Ze=a.mk(10018,0),$e=a.mk(10019,0),af=a.mk(10020,0),bf=a.mk(20001,0),cf=a.mk(20002,0),df=a.mk(20003,0),ef=a.mk(20004,0),ff=a.mk(20005,0),gf=a.mk(20006,0),hf=a.mk(20007,0),jf=a.mk(20008,0),kf=a.mk(20010,0),lf=a.mk(20011,0),mf=a.mk(20012,0),nf=a.mk(20013,0),of=a.mk(20014,0),pf=a.mk(30001,0),qf=a.mk(30002,0),rf=a.mk(30003,0),sf=a.mk(30004,0);a=a.mk(40001,0);f.test=c;f.sendMessage=d;f.readReceipt=e;f.newGroupThread=b;f.threadPointQuery=g;f.contactPointQuery=h;f.archiveThread=i;f.muteThread=j;f.deleteThread=k;f.blockMessage=l;f.deleteMessage=m;f.addParticipant=n;f.removeParticipant=o;f.messagesRangeQuery=p;f.threadsRangeQuery=q;f.participantPointQuery=r;f.storiesMarkRead=s;f.messagePointQuery=t;f.storyCreate=u;f.readReceiptV2=v;f.frxReportingPromptQuery=w;f.addParticipantV2=x;f.frxSubmitFeedback=y;f.updateParticipantAdminStatus=z;f.storyDelete=A;f.respondToAdminApprovalRequest=B;f.setNeedsAdminApprovalForNewParticipant=C;f.sendOrRemoveReaction=D;f.searchQueryPrimary=E;f.searchQuerySecondary=F;f.updateThreadName=G;f.unsendMessage=H;f.gifSearchQuery=I;f.platformExtensionSdkGetContext=J;f.rtcP2pEndCall=K;f.updateThreadImage=L;f.storyAdsFetch=M;f.frxSendReport=N;f.inboxAdsFetch=O;f.storiesPreferenceUpdate=P;f.storiesParticipantUpdate=Q;f.updateThreadThemeColor=R;f.updateThreadParticipantNickname=S;f.paymentCreate=T;f.sendMessageV2=U;f.pinVerificationRequest=V;f.markThreadUnread=W;f.checkPaymentEligibilityStatus=X;f.sponsoredMessageAdHide=Y;f.forwardContentGenerate=Z;f.updateThreadCustomEmoji=$;f.insertPersistentMenuCtas=aa;f.paymentRequestCreate=ba;f.paymentPasscodeCreate=ca;f.paymentPasscodeDelete=da;f.userLevelNotificationSettingsUpdate=ea;f.deviceLevelNotificationSettingsUpdate=fa;f.ctmAdFromApp=ga;f.sendTypingIndicator=ha;f.contactUploadUpdateSettings=ia;f.insertThreadNullstateCtas=ja;f.ignoreMessageRequest=ka;f.acceptMessageRequest=la;f.adsSendCtmWelcomeMessage=ma;f.processAccountUnlink=na;f.accountLinkEncodedUrlCreate=oa;f.storyPollVote=pa;f.storyPointQuery=qa;f.inThreadBannerFetch=ra;f.inThreadBannerExecuteCta=sa;f.updateRepliesOnUnsend=ta;f.paymentRequestDecline=ua;f.storyReaction=va;f.paymentRiskVerification=wa;f.messengerOnlyChangeName=xa;f.accountLinkEncodedUrlCreateV2=ya;f.rtcFetchMultiwayConferenceName=za;f.stickerSearch=Aa;f.processCtaAccountUnlink=Ba;f.integrityCheck=Ca;f.bookingAddToCalendar=Da;f.paymentPasscodeChange=Ea;f.deleteThreadV2=Fa;f.messengerOnlyChangePassword=Ga;f.paymentPasscodeReset=Ha;f.fetchOwnedAlohas=Ia;f.newGroupThreadV2=Ja;f.changeProfilePic=Ka;f.paymentPaypalLink=La;f.paymentsDeleteCredential=Ma;f.paymentSetDefault=Na;f.paymentFetchP2mInvoiceDetail=Oa;f.paymentAddCard=Pa;f.paymentInvalidateNewPaymentCredentialOptions=Qa;f.payPaymentRequest=Ra;f.paypalLoadFundingOptions=Sa;f.sendCallTransferRequest=Ta;f.paymentFetchP2mInvoiceStatus=Ua;f.paymentHistoryQuery=Va;f.getFbidFromUserAlias=Wa;f.contactUploadUploadContacts=Xa;f.attachmentsRangeQuery=Ya;f.sendPhoneConfirmationCode=Za;f.messageSearch=$a;f.resetMessageWindow=ab;f.sendReferralEvent=bb;f.stickerSearchFeaturedTags=cb;f.queryPaymentActivityView=db;f.paymentCharge=eb;f.updatePresenceViewableSettings=fb;f.cancelPaymentRequest=gb;f.cancelPaymentTransfer=hb;f.paymentEditCard=ib;f.insertPersistentMenuItems=jb;f.queryPaymentHistory=kb;f.verifyConfirmationCodeAndConfirmPhone=lb;f.declinePaymentTransfer=mb;f.queryAllP2mPaymentMethods=nb;f.presenceControlsReport=ob;f.presenceAppStateReport=pb;f.videoChatLinkCreate=qb;f.videoChatLinkResolve=rb;f.videoChatLinkEnterRoom=sb;f.ignoreMessage=tb;f.queryStickerPackDetails=ub;f.newGroupThreadV3=vb;f.storyMoreBuckets=wb;f.storyArchiveRangeQuery=xb;f.downloadStickerPack=yb;f.refreshSwitchAccountProfiles=zb;f.contactUploadUpdateSnapshot=Ab;f.sendPhase2UpdateMessage=Bb;f.syncWatchdogRequest=Cb;f.bloksProgramQuery=Db;f.queryStickerStore=Eb;f.removeParticipantV2=Fb;f.removeStickerPack=Gb;f.refreshSwitchAccountPersonalProfiles=Hb;f.queryThreadContactsEligibility=Ib;f.muteThreadV2=Jb;f.threadsRangeQueryV2=Kb;f.removeThread=Lb;f.paymentNonceCreate=Mb;f.paymentNonceDelete=Nb;f.paymentNonceVerify=Ob;f.exitFocusMode=Pb;f.blockStatus=Qb;f.contactUploadForThreads=Rb;f.existingGroupThreadFromParticipantsLookup=Sb;f.queryPostcapStickers=Tb;f.deleteMessageV2=Ub;f.existingGroupThreadPointQuery=Vb;f.updateMessagingSettings=Wb;f.pinThread=Xb;f.celebritySearchQuery=Yb;f.reorderStickerPacks=Zb;f.fetchAllPhoneNumbers=$b;f.fbpayPinSwitch=ac;f.pollCreation=bc;f.pollUpdate=cc;f.paymentsCreateInvoice=dc;f.updateThreadDescription=ec;f.videoChatLinkUpdateLock=fc;f.updateThreadDisappearingMode=gc;f.videoChatLinkNotifyJoinAttempt=hc;f.pollPointQuery=ic;f.videoChatLinkRevoke=jc;f.roomCreate=kc;f.fbpayClientAuthKeyCreate=lc;f.fbpayClientAuthKeyDelete=mc;f.fbpayClientAuthTokenVerify=nc;f.notImplemented=oc;f.roomRevoke=pc;f.roomUpdateInterested=qc;f.roomUpdate=rc;f.paymentsSellerOnboardingStatus=sc;f.roomInviteeUpdate=tc;f.linkedAccountFetchBadges=uc;f.presenceOnDemandFetch=vc;f.processMarketplaceXmaCta=wc;f.switchAccountBadgingRealtimeFetchBadges=xc;f.fetchGroupForThread=yc;f.instagramStortReply=zc;f.roomsUpdateUserRingability=Ac;f.updateContactUploadSettings=Bc;f.updateEphemeralMediaState=Cc;f.proactiveWarningsFetch=Dc;f.fxcalFlowFetchQuery=Ec;f.pseudoUnblock=Fc;f.requestAttemptedJoiners=Gc;f.marketplaceCreateMeetingPlan=Hc;f.liveStreamMetadata=Ic;f.fxcalSettings=Jc;f.paymentGroupRequestCreate=Kc;f.getMediaDrmLicense=Lc;f.marketplaceUpdateMeetingPlan=Mc;f.marketplaceDeleteMeetingPlan=Nc;f.removeStickerPacks=Oc;f.fxcalDoLink=Pc;f.videoChatLinkRequestUpdate=Qc;f.roomsUpdateRequireJoinRequests=Rc;f.contactPointQueryV2=Sc;f.dndMode=Tc;f.threadPointQueryV2=Uc;f.submitBusinessFeedback=Vc;f.sendPresenceCorrelationId=Wc;f.dndModeSchedule=Xc;f.fxcalMutateSettingsServiceStatus=Yc;f.supportInboxFetchItemsPreviews=Zc;f.fxcalDoUnlink=$c;f.fxdecalFetchQuery=ad;f.supportInboxFetchItemDetails=bd;f.newThread=cd;f.newContact=dd;f.roomChatThreadCreate=ed;f.fxcalMutateAutoShareStatus=fd;f.fxcalMutateServiceSelectedIdentity=gd;f.marketplaceFetchMeetingPlan=hd;f.fximOptinContent=id;f.fxcalReauthQuery=jd;f.roomsSocialContextFetch=kd;f.unignoreMessage=ld;f.messagesRangeQueryV2=md;f.muteCallsFromThread=nd;f.fximCreateOrUpdate=od;f.joinRoomChatThread=pd;f.fxFetchUpsellType=qd;f.upsertSelfieStickerFromAttachment=rd;f.fxcalSsoBottomSheet=sd;f.ctmAdContext=td;f.threadCoPresenceSubscribe=ud;f.threadCoPresenceUpdate=vd;f.paymentFetchP2mReservationDetail=wd;f.fximSyncedFields=xd;f.fxcalLinkedAccounts=yd;f.updateDeliverySetting=zd;f.unarchiveThread=Ad;f.threadCoPresenceUnsubscribe=Bd;f.paymentReserve=Cd;f.attachmentSearch=Dd;f.fxcalResetSharingSettings=Ed;f.roomChatResolve=Fd;f.fxcalSelectRadioOptionSettings=Gd;f.queryFbpayConnectEligibility=Hd;f.liveLocationSharingSessionStart=Id;f.liveLocationSharingSessionUpdateCoordinates=Jd;f.liveLocationSharingSessionStop=Kd;f.messageSetReminder=Ld;f.generateAvatarEffect=Md;f.storiesContextualRepliesWrite=Nd;f.roomChatUpdate=Od;f.marketplaceFetchListing=Pd;f.marketplaceFetchOffer=Qd;f.marketplaceCounterOffer=Rd;f.getCoplayAppInformation=Sd;f.threadCapabilityPointQuery=Td;f.fetchTopUserGroups=Ud;f.staticLocationSharingSend=Vd;f.saveEffect=Wd;f.unsaveEffect=Xd;f.paidadsPrepareConversionValue=Yd;f.marketplaceSendOffer=Zd;f.fetchAvatarSpriteSheet=$d;f.singleEffectRequest=ae;f.ctmAdContextUpdateWarningStatus=be;f.ctmAdContextFetchWarningStatus=ce;f.roomsBroadcastCreate=de;f.roomsBroadcastStart=ee;f.roomsBroadcastEnd=fe;f.bumpOdsCounter=ge;f.marketplaceSendRequestRating=he;f.marketplaceMarkAsPaid=ie;f.generativeGroupThreadRanking=je;f.marketplaceServerMutationCta=ke;f.marketplaceFetchTxnSurvey=le;f.paymentFetchPaymentConfig=me;f.updateMessageSaveStatus=ne;f.businessRtcSettingsUpdate=oe;f.businessSavedRepliesDelete=pe;f.businessSavedRepliesEdit=qe;f.locationReverseGeocode=re;f.businessSavedRepliesCreate=se;f.fetchPinnedThreads=te;f.fximSyncResources=ue;f.fximUnsyncResources=ve;f.businessSavedRepliesIncreaseUsage=we;f.locationSearch=xe;f.messagingSettingsUpdateSaLastSeen=ye;f.filteredMessagesRangeQuery=ze;f.deleteMessengerContact=Ae;f.ixtServerTriggerSubscribe=Be;f.ixtServerTriggerUnsubscribe=Ce;f.updateMessagePinStatus=De;f.downloadScriptingModules=Ee;f.sandboxDebugLog=Fe;f.inboxAdPcmFetchConversionData=Ge;f.fetchAvatarPreviewImage=He;f.tincanRegister=Ie;f.tincanCreateThread=Je;f.tincanPrekeyLookup=Ke;f.tincanPrekeyUpload=Le;f.tincanSend=Me;f.tincanEnableDevice=Ne;f.tincanDisableDevice=Oe;f.tincanOmnistoreDelete=Pe;f.tincanVerifyThreadChecksum=Qe;f.tincanThreadMute=Re;f.tincanEphemeralUiRefresh=Se;f.tincanMarkRead=Te;f.tincanCreateGroupThread=Ue;f.tincanMarkUnread=Ve;f.tincanGetGroupThreadInfo=We;f.tincanBatchableSend=Xe;f.tincanCreateThreadV2=Ye;f.tincanNotifyUnsupportedDmClients=Ze;f.tincanOverWaGenerateCat=$e;f.tincanDeliveryReceipt=af;f.cowatchGetCategories=bf;f.cowatchGetCategoryMedia=cf;f.cowatchCreateSession=df;f.cowatchSetActiveMediaAction=ef;f.cowatchSyncLiveClock=ff;f.cowatchEndSession=gf;f.cowatchCancelUpNextMedia=hf;f.cowatchGetAddMediaDialogComponent=jf;f.cowatchSubscribeActiveMedia=kf;f.cowatchUnsubscribeActiveMedia=lf;f.cowatchSendXma=mf;f.cowatchGetMediaInfo=nf;f.cowatchGetVideoClosedCaptionItems=of;f.syncPluginSeenHeadsThreadKey=pf;f.syncPluginWhatsappMessageSend=qf;f.syncPluginMediaManagerExpire=rf;f.syncPluginStoryPost=sf;f.igmsGetCategoryMedia=a}),null);
__d("MWLSDeleteMessage.bs",["bs_int64","React","LSDict","LSTasks.bs","MWThreadKey.bs","promiseDone","LSWriteLabel.bs","LSTransaction.bs","SkytaleDBHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);return g.useCallback(function(a){b("promiseDone")(b("LSTransaction.bs").run(c,function(c){return b("LSTasks.bs").enqueue(c,2,b("bs_int64").to_string(b("LSWriteLabel.bs").deleteMessageV2),new(b("LSDict"))([["thread_key",d],["message_id",a]]))},"readWrite"),void 0,void 0)},[c,d])}f.useDeleteMessage=a}),null);
__d("MWLSDeleteThread.bs",["LS.bs","bs_curry","React","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","MWThread_DEPRECATED.bs","LSMailboxOptimisticDeleteThreadStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0);return g.useCallback(function(a){var d=b("MWThread_DEPRECATED.bs").toThreadKey(a);b("promiseDone")(b("LSTransaction.bs").run(c,function(a){return b("LSMailboxOptimisticDeleteThreadStoredProcedure")(d,b("bs_curry")._1(b("LS.bs").make,a))},"readWrite"),void 0,void 0)},[c])}f.useDeleteThread=a}),null);
__d("MWLSMessageForwardParser.bs",["ix","fbt","React","bs_caml_array","bs_caml_int64","fbicon","stylex","bs_belt_Option","MWLSParserUtils.bs","CometTintedIcon.react","MessagingAttachmentType.bs"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("React"),k={icon:{bottom:"rwy7c4ue","float":"bzsjyuwj",paddingEnd:"ph5uu5jm",height:"cyypbtt7",position:"l9j0dhe7"},text:{color:"pipptul6",fontSize:"e9vueds3",lineHeight:"j5wam9gi",marginBottom:"gjjqq4r6"}};function l(a){return h._("{name} forwarded a message",[h._param("name",a)])}c=h._("Forwarded a message");function m(a){return h._("{name} forwarded an image",[h._param("name",a)])}d=h._("Forwarded an image");function n(a){return h._("{name} forwarded a link",[h._param("name",a)])}e=h._("Forwarded a link");function o(a){return h._("{name} forwarded a video",[h._param("name",a)])}var p=h._("Forwarded a video");function q(a,c,d){if(b("bs_caml_int64").eq(a.message.h,c))return"You";else return d.author}function a(a,c,d){c=q(a,c,d);d=a.attachments;a=d.length;a=a!==1?a!==0?b("bs_caml_array").get(d,0):void 0:d[0];d=b("bs_belt_Option").map(a,function(a){return a.attachment.f});a=d!==void 0?b("bs_caml_int64").eq(d,b("MessagingAttachmentType.bs").animatedImage)||b("bs_caml_int64").eq(d,b("MessagingAttachmentType.bs").image)?m(c):b("bs_caml_int64").eq(d,b("MessagingAttachmentType.bs").animatedImage)&&b("bs_belt_Option").map(a,b("MWLSParserUtils.bs").getXmaType)==="xma_web_url"?n(c):b("bs_caml_int64").eq(d,b("MessagingAttachmentType.bs").video)?o(c):void 0:l(c);return b("bs_belt_Option").map(a,function(a){return j.jsxs("div",{children:[j.jsx("div",{children:j.jsx(b("CometTintedIcon.react"),{color:"fds-gray-45",icon:b("fbicon")._(g("514450"),12)}),className:(i||(i=b("stylex")))(k.icon)}),a],className:i(k.text)})})}f.styles=k;f.textForwardedBySomeone=l;f.textForwardedByUnknown=c;f.imageForwardedBySomeone=m;f.imageForwardedByUnknown=d;f.linkForwardedBySomeone=n;f.linkForwardedByUnknown=e;f.videoForwardedBySomeone=o;f.videoForwardedByUnknown=p;f.getForwarderName=q;f.getGroupTitleForForwardedMessage=a}),null);
__d("MWLSPollsHooks.bs",["LS.bs","bs_curry","bs_int64","LSVec.bs","React","LSDict","MWLSActor.bs","SkytaleDB","bs_caml_int64","promiseDone","LSTransaction.bs","SkytaleDBExec.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","MWThread_DEPRECATED.bs","IndexedDbKeyComparer","recoverableViolation","LSMessagingThreadTypeUtil.bs","LSMailboxIssuePollUpdateForThreadStoredProcedure","LSMailboxIssuePollCreationForThreadTaskStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function h(a){var c=a[0];return[-a[1].size|0,b("bs_caml_int64").neg(c.e),c.f]}function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("bs_int64").to_string(b("MWLSActor.bs").useActor(void 0));return g.useMemo(function(){return b("SkytaleDBExec.bs").toArray(b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"poll_options_v2").asc,{hd:a,tl:0}),function(a){var d=new Map(b("SkytaleDBExec.bs").toArray(b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").mergeJoin(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"poll_votes_v2").asc,{hd:a.a,tl:{hd:a.b,tl:0}}),b("SkytaleDB").table(c,"contacts").asc),function(a){a=a[1];return[b("bs_int64").to_string(a.a),{profile_picture_url:a.b}]})));return[a,d]})).sort(function(a,c){return b("bs_curry")._2(b("IndexedDbKeyComparer"),h(a),h(c))}).map(function(a){var b=a[1];a=a[0];return{option_text:a.c,votes:Array.from(b.values()),voted:b.has(d),option_id:a.b}})},[c,a,d])}function c(a,c){var d=b("SkytaleDBHook.bs").useHook(void 0),e=b("MWThread_DEPRECATED.bs").toThreadKey(a);return g.useCallback(function(a){return function(f){b("promiseDone")(b("LSTransaction.bs").run(d,function(d){return b("LSMailboxIssuePollUpdateForThreadStoredProcedure")(e,c,b("LSVec.bs").make(a.map(function(a){return new(b("LSDict"))([a])})),b("LSVec.bs").make(f),b("bs_curry")._1(b("LS.bs").make,d))},"readWrite"),void 0,void 0)}},[d,a,c])}function d(a){var c=b("SkytaleDBHook.bs").useHook(void 0);return g.useCallback(function(a){return function(d,e){var f=b("MWThread_DEPRECATED.bs").toThreadKey(a),g=b("LSMessagingThreadTypeUtil.bs").ofThreadId(a);g=b("LSMessagingThreadTypeUtil.bs").isSecure(g);if(g){b("recoverableViolation")("Not supported","messenger_web_product");return}g=b("LSTransaction.bs").run(c,function(a){return b("LSMailboxIssuePollCreationForThreadTaskStoredProcedure")(d,f,b("LSVec.bs").make(e),b("bs_curry")._1(b("LS.bs").make,a))},"readWrite");b("promiseDone")(g,void 0,void 0)}},[c])}f.usePollOptions=a;f.useUpdatePoll=c;f.useCreatePoll=d}),null);
__d("MWLSActorHovercardContact.bs",["React","MWLSActor.bs","SkytaleDB","bs_caml_int64","SkytaleDBHook.bs","SkytaleDBQuery.bs","MWThread_DEPRECATED.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWLSActor.bs").useActor(void 0);a=b("MWThread_DEPRECATED.bs").useIdExn(void 0);var e=b("MWThread_DEPRECATED.bs").toThreadKey(a);return b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){var a;return(a=b("SkytaleDBQuery.bs")).map(a.filter(a.mergeJoin(a.getKeyRange(b("SkytaleDB").table(c,"participants").asc,{hd:e,tl:0}),b("SkytaleDB").table(c,"contacts").asc),function(a){return b("bs_caml_int64").neq(a[1].a,d)}),function(a){return a[1]})},[c,JSON.stringify(e),JSON.stringify(d)]))}f.useContact=a}),null);
__d("MWChatInThreadBanner.bs",["bs_curry","React","stylex","bs_belt_Option","bs_caml_option","CometRow.react","TetraText.react","TetraButton.react","CometRowItem.react","CometImageIcon.react","CometPressable.react","recoverableViolation","TetraTextPairing.react"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i={container:{position:"l9j0dhe7",backgroundColor:"nred35xi"},sheet:{borderBottom:"s1tcr66n"},sheetInner:{width:"k4urcfbm",paddingBottom:"osnr6wyh"},image:{marginEnd:"cxmmr5t8"},infoLabel:{backgroundColor:"tdjehn4e",borderTopStartRadius:"jk6sbkaj",borderTopEndRadius:"kdgqqoy6",borderBottomEndRadius:"ihh4hy1g",borderBottomStartRadius:"qttc61fc",overflowX:"ni8dbmo4",overflowY:"stjgntxs",paddingTop:"ggysqto6",paddingEnd:"ph5uu5jm",paddingBottom:"ojkyduve",paddingStart:"b3onmgus",textOverflow:"ltmttdrg",whiteSpace:"g0qnabr5"},grow:{flexGrow:"buofh1pr"},linkBanner:{width:"k4urcfbm"}};function j(a){var c=a.button;a=a.action;var d=c.e;if(typeof a==="number"){b("recoverableViolation")("In thread banner cta not implemented: "+c.d,"messenger_web_product");return null}switch(a.TAG|0){case 0:return h.jsx(b("CometRowItem.react"),{xstyle:i.grow,children:h.jsx(b("TetraButton.react"),{label:d,type:"secondary",linkProps:{target:"_blank",url:a._0}})});case 1:var e=a._0;c={label:d,type:"secondary",onPress:function(a){return b("bs_curry")._1(e,void 0)}};a._1!==void 0&&(c.ref=b("bs_caml_option").valFromOption(a._1));return h.jsx(b("CometRowItem.react"),{xstyle:i.grow,children:h.jsx(b("TetraButton.react"),c)});case 2:return h.jsx(b("CometRowItem.react"),{xstyle:i.grow,children:b("bs_curry")._1(a._0,function(a,c,e,f,g,i,j){return h.jsx(b("TetraButton.react"),{label:d,type:"secondary",onPress:function(a){return b("bs_curry")._1(c,void 0)},ref:a})})})}}c={make:j};function a(a){var c=a.banner;a=a.ctaParser;var d=c.banner.d;d=d!==void 0?h.jsx(b("CometRowItem.react"),{expanding:!1,children:h.jsx("div",{children:h.jsx(b("CometImageIcon.react"),{size:24,src:d,style:"circle"}),className:(g||(g=b("stylex")))(i.image)})}):null;var e=h.jsx(b("CometRowItem.react"),{expanding:!0,children:h.jsx(b("TetraTextPairing.react"),{body:b("bs_belt_Option").getWithDefault(c.banner.h,"")+b("bs_belt_Option").getWithDefault(c.banner.i,""),meta:b("bs_belt_Option").mapWithDefault(c.banner.g,null,function(a){return a}),level:4,bodyLineLimit:1,metaLineLimit:1,metaLocation:"above"})}),f=c.banner.t;f=f!==void 0?h.jsx(b("CometRowItem.react"),{children:h.jsx(b("TetraText.react"),{type:"meta1",children:h.jsx("span",{children:f,className:(g||(g=b("stylex")))(i.infoLabel)})})}):null;var k=c.leftButton,l=c.rightButton,m,n=0,o;k!==void 0?l!==void 0?m=h.jsxs(b("CometRow.react"),{paddingTop:8,children:[h.jsx(j,{button:k,action:b("bs_curry")._2(a,c,k)}),h.jsx(j,{button:l,action:b("bs_curry")._2(a,c,l)})]}):(o=k,n=1):l!==void 0?(o=l,n=1):m=null;n===1&&(m=h.jsx(b("CometRow.react"),{paddingTop:8,children:h.jsx(j,{button:o,action:b("bs_curry")._2(a,c,o)})}));var p=h.jsxs("div",{children:[h.jsxs(b("CometRow.react"),{children:[d,e,f]}),m],className:(g||(g=b("stylex")))(i.sheetInner)});k=b("bs_belt_Option").map(c.bannerAction,b("bs_curry")._1(a,c));var q;if(k!==void 0)if(typeof k==="number")b("recoverableViolation")("In thread banner cta not implemented: "+b("bs_belt_Option").getWithDefault(b("bs_belt_Option").map(c.bannerAction,function(a){return a.d}),""),"messenger_web_product"),q=p;else switch(k.TAG|0){case 0:q=h.jsx(b("CometPressable.react"),{expanding:!0,linkProps:{target:"_blank",url:k._0},xstyle:function(a){return[i.linkBanner]},children:p});break;case 1:var r=k._0;l={expanding:!0,onPress:function(a){return b("bs_curry")._1(r,void 0)},children:p};k._1!==void 0&&(l.ref=b("bs_caml_option").valFromOption(k._1));q=h.jsx(b("CometPressable.react"),l);break;case 2:q=b("bs_curry")._1(k._0,function(a,c,d,e,f,g,i){return h.jsx(b("CometPressable.react"),{expanding:!0,ref:a,onPress:function(a){return b("bs_curry")._1(c,void 0)},children:p})});break}else q=p;return h.jsx("div",{children:h.jsx("div",{children:q,className:g(i.sheet)}),className:g(i.container)})}d=a;f.styles=i;f.BannerButton=c;f.make=d}),null);
__d("MWLSEnsureInThreadBannerExists.bs",["LS.bs","bs_curry","React","MWThreadKey.bs","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","LSInThreadBannerFetchBannersStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);g.useEffect(function(){var a=b("LSTransaction.bs").run(c,function(a){return b("LSInThreadBannerFetchBannersStoredProcedure")(d,b("bs_curry")._1(b("LS.bs").make,a))},"readWrite");b("promiseDone")(a,void 0,void 0)},[d,c])}f.useHook=a}),null);
__d("MWLSExecuteInThreadBannerCta.bs",["LS.bs","bs_curry","React","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","LSInThreadBannerExecuteCTAStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0);return g.useCallback(function(a){var d=b("LSTransaction.bs").run(c,function(c){return b("LSInThreadBannerExecuteCTAStoredProcedure")(a,b("bs_curry")._1(b("LS.bs").make,c))},"readWrite");b("promiseDone")(d,void 0,void 0)},[c])}f.useHook=a}),null);
__d("MWLSInThreadBanner.bs",["bs_int64","SkytaleDB","bs_belt_Array","bs_caml_int64","bs_belt_Option","bs_caml_option","SkytaleDBExec.bs","SkytaleDBQuery.bs"],(function(a,b,c,d,e,f){"use strict";d={a:(c=b("bs_caml_int64")).zero,b:c.zero,c:c.zero,d:void 0,e:void 0,f:void 0,g:void 0,h:void 0,i:void 0,j:void 0,k:void 0,l:void 0,m:void 0,n:void 0,o:void 0,p:void 0,q:void 0,r:void 0,s:void 0,t:void 0};e={a:c.zero,b:c.zero,c:c.zero,d:"fallback",e:"",f:void 0,g:void 0,h:void 0};var g=[];g={banner:d,leftButton:void 0,rightButton:void 0,bannerAction:void 0,overflowMenuActions:g};function a(a,c){var d;return(d=b("SkytaleDBQuery.bs")).map(d.mergeJoin(d.getKeyRange(b("SkytaleDB").table(a,"in_thread_banner").asc,{hd:c,tl:0}),d.getKeyRange(b("SkytaleDB").table(a,"in_thread_banner_overflow_menu").asc,{hd:c,tl:0})),function(c){var d=c[1];c=c[0];var e=new Map(b("SkytaleDBExec.bs").toArray(b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"in_thread_banner_ctas").asc,{hd:c.b,tl:0}),function(a){return[b("bs_int64").to_string(a.b),a]}))),f=function(a){return b("bs_caml_option").nullable_to_opt(e.get(b("bs_int64").to_string(a)))};return{banner:c,leftButton:b("bs_belt_Option").flatMap(c.j,f),rightButton:b("bs_belt_Option").flatMap(c.m,f),bannerAction:b("bs_belt_Option").flatMap(c.r,f),overflowMenuActions:b("bs_belt_Array").keepMap([d.c,d.f,d.i,d.l,d.o],function(a){return b("bs_belt_Option").flatMap(a,f)})}})}c={a:c.zero,b:c.zero,c:void 0,d:void 0,e:void 0,f:void 0,g:void 0,h:void 0,i:void 0,j:void 0,k:void 0,l:void 0,m:void 0,n:void 0,o:void 0,p:void 0,q:void 0};f.emptyBanner=d;f.emptyCta=e;f.emptyMenu=c;f.empty=g;f.getInThread=a}),null);
__d("MWLSMarketplaceCtaParser.bs",["bs_curry","bs_int64","React","MWLSActor.bs","SkytaleDB","bs_caml_int64","JSResource","MWThreadKey.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","useCometLazyDialog","recoverableViolation","useCometEntryPointDialog","MWLSExecuteInThreadBannerCta.bs","CometLazyPopoverTrigger.react","SkytaleDBQuerySubscriptionHook.bs","CometMarketplaceInboxLabelChatDialog.entrypoint"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=["marketplace_mark_as_available","marketplace_mark_as_pending","marketplace_mark_as_sold","marketplace_mark_as_sold_scaled","marketplace_mark_as_sold_with_txn_survey","marketplace_mark_as_sold_with_txn_survey_scaled","marketplace_mark_as_sold_with_select_buyer","marketplace_mark_as_sold_with_select_buyer_scaled"];var h=new Set(c);d=new Set(c.concat(["marketplace_rate_buyer","marketplace_scaled_rate_buyer","marketplace_rate_seller","marketplace_scaled_rate_seller","marketplace_report_buyer","marketplace_report_seller","marketplace_see_details","marketplace_request_payment","marketplace_send_payment","marketplace_find_similar","marketplace_more_options","marketplace_p2m_request_payment","marketplace_xma_call_function","marketplace_label_chat"]));function i(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWLSActor.bs").useActor(void 0),e=b("MWThreadKey.bs").useIdMemoizedExn(void 0);a=g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").filter(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"participants").asc,{hd:e,tl:0}),function(a){return b("bs_caml_int64").neq(a.b,d)}),function(a){return a.b})},[JSON.stringify(d),e,c]);a=b("SkytaleDBQuerySubscriptionHook.bs").useArray(a);var f=a.length;if(f!==1)return;f=a[0];return b("bs_int64").to_string(f)}function a(a){var c=b("MWLSExecuteInThreadBannerCta.bs").useHook(void 0),d=i(void 0);a=b("useCometLazyDialog")(b("JSResource")("CometFRX_DEPRECATED.react").__setRef("MWLSMarketplaceCtaParser.bs"));var e=a[1],f=a[0],j=b("bs_int64").to_string(b("MWThreadKey.bs").useIdMemoizedExn(void 0));a=b("useCometEntryPointDialog")(b("CometMarketplaceInboxLabelChatDialog.entrypoint"),{thread_id:j});var k=a[0];return g.useMemo(function(){var a=function a(i,l){var m=l.d;if(m!=="marketplace_see_details")if(m==="marketplace_more_options"&&i.overflowMenuActions.length>0)return{TAG:2,_0:function(c){return g.jsx(b("CometLazyPopoverTrigger.react"),{popoverResource:b("JSResource")("MWLSMarketplacePopoverMenu.react").__setRef("MWLSMarketplaceCtaParser.bs"),popoverProps:{menu:i.overflowMenuActions,ctaParser:function(b){return a(i,b)}},align:"end",children:c})}};else if(m==="marketplace_report_buyer"||m==="marketplace_report_seller")if(d!==void 0)return{TAG:1,_0:function(a){return f({entryPoint:"REPORT_BUTTON",id:d,location:m==="marketplace_report_buyer"?"marketplace_messenger_report_buyer":"marketplace_messenger_report_seller"},function(a){})},_1:e};else{b("recoverableViolation")("Haven't implemented report buyer/seller for threads with more than 1 person","messenger_web_product");return 0}else if(h.has(m))return{TAG:1,_0:function(a){return b("bs_curry")._1(c,l.b)},_1:void 0};else if(m==="marketplace_label_chat")return{TAG:1,_0:function(a){return k({threadID:j},function(a){return b("bs_curry")._1(c,l.b)})},_1:void 0};else return 0;var n=l.g;if(n!==void 0)return{TAG:0,_0:n};n=l.f;if(n!==void 0)return{TAG:0,_0:n};else{b("recoverableViolation")("Marketplace see details cta without url","messenger_web_product");return 0}};return a},[c,d,f,e,k])}f.marketplaceCta=d;f.useOtherParticipantId=i;f.useHook=a}),null);
__d("MWLSInThreadBannerCtaParser.bs",["bs_curry","MWLSMarketplaceCtaParser.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=b("MWLSMarketplaceCtaParser.bs").useHook(void 0);return function(a,d){var e=d.d;if(b("MWLSMarketplaceCtaParser.bs").marketplaceCta.has(e))return b("bs_curry")._2(c,a,d);else return 0}}f.useHook=a}),null);
__d("MWLSInThreadBannerComponent.bs",["React","MWThreadKey.bs","SkytaleDBHook.bs","MWLSInThreadBanner.bs","MWChatInThreadBanner.bs","MWLSInThreadBannerCtaParser.bs","MWLSEnsureInThreadBannerExists.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){b("MWLSEnsureInThreadBannerExists.bs").useHook(void 0);var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);a=g.useMemo(function(){return b("MWLSInThreadBanner.bs").getInThread(c,d)},[c,d]);a=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(a);var e=b("MWLSInThreadBannerCtaParser.bs").useHook(void 0);if(a!==void 0)return g.jsx(b("MWChatInThreadBanner.bs").make,{banner:a,ctaParser:e});else return null}c=a;f.make=c}),null);
__d("MWLSLeaveGroup.bs",["LS.bs","bs_curry","LSVec.bs","React","MWLSActor.bs","MWThreadKey.bs","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","LSMailboxOptimisticRemoveParticipantsFromGroupThreadStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWLSActor.bs").useActor(void 0),e=b("MWThreadKey.bs").useIdMemoizedExn(void 0);return g.useCallback(function(a){return function(a){a=b("LSTransaction.bs").run(c,function(a){return b("LSMailboxOptimisticRemoveParticipantsFromGroupThreadStoredProcedure")(e,b("LSVec.bs").make([d]),b("bs_curry")._1(b("LS.bs").make,a))},"readWrite");b("promiseDone")(a,void 0,void 0)}},[c,d,e])}f.useHook=a}),null);
__d("MWLSMediaSendManagerProvider.bs",["React","bs_caml_option","MWLSMediaSendManager.bs","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){a=a.children;var c=g.useMemo(function(){return b("MWLSMediaSendManager.bs").make(void 0)},[]),d=g.useContext(b("MWLSMediaSendManager.bs").context);if(d!==void 0)return b("unrecoverableViolation")("You can't nest MWLSMediaSendManager in another MWLSMediaSendManager. This will cause SEVs as things might upload images to the wrong thread","messenger_privacy_web");else return g.createElement(b("MWLSMediaSendManager.bs").context.Provider,{value:b("bs_caml_option").some(c),children:a})}function c(a,b){return{children:a}}d=a;f.makeProps=c;f.make=d}),null);
__d("MWLSGetServerMessageID.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}f.getServerMessageID=a}),null);
__d("MWLSReaction.bs",["FBID.bs","bs_int64","SkytaleDB","bs_belt_Option","SkytaleDBExec.bs","SkytaleDBQuery.bs"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return{message_id:a.c,actor_id:b("bs_belt_Option").getExn(b("FBID.bs").ofString(b("bs_int64").to_string(a.d))),reaction:a.e,actor_name:b("bs_belt_Option").mapWithDefault(b("SkytaleDBExec.bs").first(b("SkytaleDBQuery.bs").getKeyRange(c,{hd:a.d,tl:0})),void 0,function(a){var b=a.nickname;if(b!==void 0)return b;else return a.actual_name})}}function a(a,c,d){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(a,"reactions").asc,{hd:c,tl:0}),function(a){return g(a,d)})}f.project=g;f.getForOpen=a}),null);
__d("MWLSMessage.bs",["LSBitFlag.bs","SkytaleDB","bs_caml_int64","MWLSReaction.bs","SkytaleDBExec.bs","MWLSAttachment.bs","SkytaleDBQuery.bs","MWLSParticipant.bs"],(function(a,b,c,d,e,f){"use strict";e={a:(d=b("bs_caml_int64")).zero,b:d.zero,c:d.zero,d:void 0,e:"",f:"",g:void 0,h:d.zero,i:void 0,j:!1,k:d.zero,l:d.zero,m:!1,n:void 0,o:void 0,p:void 0,q:void 0,r:void 0,s:void 0,t:void 0,u:void 0,v:void 0,w:void 0,x:void 0,y:void 0,z:void 0,A:void 0,B:void 0,C:void 0,D:void 0,E:void 0,F:void 0,G:void 0,H:void 0,I:void 0,J:!1,K:void 0,L:void 0,M:void 0,N:void 0,O:!1,P:b("LSBitFlag.bs").empty,Q:b("LSBitFlag.bs").empty,R:void 0,S:void 0,T:d.zero,U:void 0,V:d.zero,W:void 0,X:void 0};d=[];var g=[];d={message:e,has_attachment:!1,message_delete_timestamp_ms:void 0,message_expire_timestamp_ms:void 0,message_visible_timespan_ms:void 0,message_remaining_visible_timespan_ms:void 0,attachments:d,reactions:g,adminMsgCta:void 0};function h(a,c,d,e){var f=a.K,g=a.M;return{message:a,has_attachment:b("SkytaleDBExec.bs").toArray(c).length>0,message_delete_timestamp_ms:void 0,message_expire_timestamp_ms:void 0,message_visible_timespan_ms:void 0,message_remaining_visible_timespan_ms:void 0,attachments:b("SkytaleDBExec.bs").toArray(c),reactions:b("SkytaleDBExec.bs").toArray(d),adminMsgCta:f!==void 0&&g==="admin_msg_web_url"?b("SkytaleDBExec.bs").first(b("SkytaleDBQuery.bs").getKeyRange(e,{hd:f,tl:0})):void 0}}function a(a,c){var d=b("SkytaleDB").table(c,"contacts").asc,e=b("MWLSAttachment.bs").getForOpen(c,a);d=b("MWLSParticipant.bs").getAllInOpenThread(c,d,a);var f=b("MWLSReaction.bs").getForOpen(c,a,d);return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"messages").asc,{hd:a,tl:0}),function(d){var g=d.e;return h(d,b("SkytaleDBQuery.bs").getKeyRange(e,{hd:g,tl:0}),b("SkytaleDBQuery.bs").getKeyRange(f,{hd:g,tl:0}),b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"admin_message_ctas").asc,{hd:a,tl:{hd:g,tl:0}}))})}function c(a,c,d,e){var f=b("SkytaleDB").table(e,"contacts").asc,g=b("MWLSAttachment.bs").getForOpen(e,d);f=b("MWLSParticipant.bs").getAllInOpenThread(e,f,d);var i=b("MWLSReaction.bs").getForOpen(e,d,f);return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").bounds(b("SkytaleDB").table(e,"messages").asc,{NAME:"range",VAL:[{NAME:"greaterThanOrEqual",VAL:{hd:d,tl:{hd:a,tl:0}}},{NAME:"lessThanOrEqual",VAL:{hd:d,tl:{hd:c,tl:0}}}]}),function(a){var c=a.e;return h(a,b("SkytaleDBQuery.bs").getKeyRange(g,{hd:c,tl:0}),b("SkytaleDBQuery.bs").getKeyRange(i,{hd:c,tl:0}),b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(e,"admin_message_ctas").asc,{hd:d,tl:{hd:c,tl:0}}))})}f.emptyMessageRow=e;f.emptyMessage=d;f.projectOpen=h;f.getAllInOpenThread=a;f.getAllInRangeStartingFrom=c}),null);
__d("LSMessageSendStatusV2.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";c=(a=b("bs_caml_int64")).zero;d=a.one;e=a.mk(2,0);b=a.mk(4,0);var g=a.mk(5,0);a=a.mk(6,0);f.none=c;f.sendingToServer=d;f.serverReceived=e;f.nonRetriableError=b;f.retriableError=g;f.sentOnly=a}),null);
__d("LSMessageThreadUnsendabilityStatus.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";c=(a=b("bs_caml_int64")).zero;d=a.one;e=a.mk(2,0);b=a.mk(3,0);var g=a.mk(4,0),h=a.mk(5,0),i=a.mk(6,0),j=a.mk(7,0),k=a.mk(8,0);a=a.mk(9,0);f.canUnsend=c;f.denyForSpecificIds=d;f.denyIfThreadContainsPau=e;f.denyIfThreadContainsWorkUser=b;f.denyIfPageThread=g;f.denyIfMarketplaceThread=h;f.denyIfCannotLoadThread=i;f.denyIfThreadContainsWorkUserFailingKillswitch=j;f.denyIfCanonicalThreadContainsBlockedUsers=k;f.denyIfCannotReplyToViewerThread=a}),null);
__d("LSReplyMessageAttachmentType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";c=(a=b("bs_caml_int64")).zero;d=a.one;e=a.mk(2,0);b=a.mk(3,0);var g=a.mk(4,0),h=a.mk(5,0),i=a.mk(6,0),j=a.mk(7,0);a=a.mk(8,0);f.other=c;f.photo=d;f.video=e;f.gif=b;f.sticker=g;f.link=h;f.multiphoto=i;f.permanentRavenPhoto=j;f.permanentRavenVideo=a}),null);
__d("LSReplyMessageStatus.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";c=(a=b("bs_caml_int64")).zero;d=a.one;e=a.mk(2,0);b=a.mk(3,0);a=a.mk(4,0);f.unknown=c;f.valid=d;f.deleted=e;f.temporaryUnavailable=b;f.expired=a}),null);
__d("MWLSMessageReplyParser.bs",["ix","bs_int64","React","bs_caml_obj","bs_caml_int64","fbicon","stylex","bs_belt_Option","bs_caml_option","LSReplyMessageStatus.bs","MWChatTextFormatting","recoverableViolation","CometTintedIcon.react","LSMessageReplySourceType.bs","LSMessageReplySourceTypeV2.bs","LSReplyMessageAttachmentType.bs"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("React"),j={titleContainer:{display:"j83agx80",alignItems:"bp9cbjyn",marginBottom:"gjjqq4r6"},text:{paddingStart:"b3onmgus",color:"pipptul6",fontSize:"sq6gx45u",lineHeight:"a3bd9o3v"}};function a(a){a=a.message;var c=a.t,d=c!==void 0?b("bs_caml_int64").eq(c,b("LSMessageReplySourceTypeV2.bs").message)||b("bs_caml_int64").eq(c,b("LSMessageReplySourceTypeV2.bs").story)?b("bs_caml_option").some(b("fbicon")._(g("1289193"),10)):b("bs_caml_int64").eq(c,b("LSMessageReplySourceTypeV2.bs").forward)||b("bs_caml_int64").eq(c,b("LSMessageReplySourceTypeV2.bs").igStoryShare)||b("bs_caml_int64").eq(c,b("LSMessageReplySourceTypeV2.bs").fbStoryShare)?b("bs_caml_option").some(b("fbicon")._(g("514450"),12)):void 0:void 0;return b("bs_belt_Option").map(a.v,function(a){return i.jsxs("div",{children:[d!==void 0?i.jsx(b("CometTintedIcon.react"),{color:"fds-gray-45",icon:b("bs_caml_option").valFromOption(d)}):null,i.jsx("div",{children:a,className:(h||(h=b("stylex")))(j.text)})],className:h(j.titleContainer)})})}function c(a){a=a.message;var c=a.r;if(c===void 0)return 1;var d=a.G,e=a.H;if(d!==void 0){if(e!==void 0){if(b("bs_caml_int64").eq(d,b("LSReplyMessageAttachmentType.bs").sticker)){var f=a.A,g=a.B;return{TAG:1,_0:{sticker:{accessibilityLabel:b("bs_belt_Option").getWithDefault(a.w,""),frameCount:0,frameRate:void 0,framesPerCol:0,framesPerRow:0,packID:void 0,paddedSpriteURI2x:void 0,paddedSpriteURI:void 0,spriteURI2x:void 0,spriteURI:void 0,stickerID:b("bs_int64").to_string(e),url:a.z,width:f!==void 0?b("bs_caml_int64").to_int32(f):void 0,height:g!==void 0?b("bs_caml_int64").to_int32(g):void 0},messageID:c}}}f=2}else f=2;if(f===2){if((b("bs_caml_int64").eq(d,b("LSReplyMessageAttachmentType.bs").photo)||b("bs_caml_int64").eq(d,b("LSReplyMessageAttachmentType.bs").video))&&b("bs_caml_obj").caml_equal(a.s,b("LSMessageReplySourceType.bs").story)){g=a.z;if(g!==void 0)return{TAG:5,_0:{previewUrl:g,messageID:c,sourceID:a.r}};else return}if(b("bs_caml_int64").eq(d,b("LSReplyMessageAttachmentType.bs").photo)||b("bs_caml_int64").eq(d,b("LSReplyMessageAttachmentType.bs").multiphoto)){f=a.z;return{TAG:2,_0:{previewUrl:f!==void 0?f:(b("recoverableViolation")("Reply to photo has no reply_media_url. MessageID: "+a.e,"messenger_privacy_web"),""),messageID:c}}}if(b("bs_caml_int64").eq(d,b("LSReplyMessageAttachmentType.bs").gif)||b("bs_caml_int64").eq(d,b("LSReplyMessageAttachmentType.bs").link)||b("bs_caml_int64").eq(d,b("LSReplyMessageAttachmentType.bs").video)||b("bs_caml_int64").eq(d,b("LSReplyMessageAttachmentType.bs").other))return{TAG:4,_0:{messageID:c}}}}else{if(e!==void 0)g=2;else{if(b("bs_caml_obj").caml_equal(a.u,b("LSReplyMessageStatus.bs").deleted))return 0;if(b("bs_caml_obj").caml_equal(a.s,b("LSMessageReplySourceType.bs").message)){f=b("bs_belt_Option").getWithDefault(a.w,"");if(f==="")return{TAG:4,_0:{messageID:c}};else return{TAG:0,_0:{ranges:b("MWChatTextFormatting").getFormattingRanges(b("bs_belt_Option").getWithDefault(a.w,"")),text:b("bs_belt_Option").getWithDefault(a.w,""),messageID:c}}}g=2}if(g===2&&b("bs_caml_obj").caml_equal(a.s,b("LSMessageReplySourceType.bs").story))return 1}b("recoverableViolation")("Unknown combination of attachment type and attachment_id. Attachmnet type: "+(b("bs_belt_Option").mapWithDefault(d,"no attachment type",b("bs_int64").to_string)+("Id present?: "+(b("bs_belt_Option").isSome(e)?"true":"false"))),"messenger_privacy_web")}f.styles=j;f.getGroupTitleForReply=a;f.getMessageReplyContent=c}),null);
__d("MessageProfileRangeType.bs",["MessageProfileRangeType"],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==="p")return b("MessageProfileRangeType").PROFILE;else if(a==="thread")return b("MessageProfileRangeType").THREAD;else if(a==="thread_active")return b("MessageProfileRangeType").THREAD_ACTIVE;else return b("MessageProfileRangeType").NONE}f.ofString=a}),null);
__d("MWLSMessageParser.bs",["fbt","FBID.bs","bs_array","bs_int64","JSMap.bs","gkx","bs_js_dict","bs_caml_array","bs_caml_int64","bs_belt_Option","bs_caml_format","bs_caml_option","GenderConst","MWChatMessage.bs","LSContactGender.bs","MWLSParserUtils.bs","MWLSAttachmentParser.bs","LSMessageSendStatusV2.bs","MWLSMessageReplyParser.bs","MessageProfileRangeType","MessageProfileRangeType.bs","LSMessageThreadUnsendabilityStatus.bs","XCometProfileControllerRouteBuilder"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){return b("bs_int64").compare(a,c)===0}function c(a){return b("bs_caml_int64").eq(a.message.l,b("LSMessageSendStatusV2.bs").sentOnly)}function h(a){if(b("bs_caml_int64").eq(a,b("LSMessageSendStatusV2.bs").sendingToServer))return 1;else if(b("bs_caml_int64").eq(a,b("LSMessageSendStatusV2.bs").serverReceived)||b("bs_caml_int64").eq(a,b("LSMessageSendStatusV2.bs").sentOnly))return 2;else if(b("bs_caml_int64").eq(a,b("LSMessageSendStatusV2.bs").nonRetriableError)||b("bs_caml_int64").eq(a,b("LSMessageSendStatusV2.bs").retriableError))return 4;else return 0}function i(a,c){return Array.from(a.values()).reduce(function(a,d){d=b("bs_caml_int64").neq(d.contact_id,c)?d.read_watermark_timestamp_ms:b("bs_caml_int64").zero;if(b("bs_caml_int64").gt(a,d))return a;else return d},b("bs_caml_int64").zero)}function j(a,c){return Array.from(a.values()).reduce(function(a,d){d=b("bs_caml_int64").neq(d.contact_id,c)?d.delivered_watermark_timestamp_ms:b("bs_caml_int64").zero;if(b("bs_caml_int64").gt(a,d))return a;else return d},b("bs_caml_int64").zero)}function k(a,c,d,e){c=b("JSMap.bs").getOrMake(a.message.e,function(a){return[]},c);var f=c.length>0;d=b("bs_caml_int64").lt(a.message.b,d);if(f)return{_0:c};else if(d)return 0;else if(b("bs_caml_int64").ge(e,a.message.b))return 3;else return h(a.message.l)}function l(a){if(a.length>0)return b("bs_caml_option").some(a.reduce(function(a,c){var d=c.reaction,e=b("bs_js_dict").get(a,d);e=e!==void 0?(e.push([c.actor_id,c.actor_name]),e):[[c.actor_id,c.actor_name]];a[d]=e;return a},{}))}function m(a){if(b("bs_caml_int64").eq(a,b("LSContactGender.bs").female))return b("GenderConst").FEMALE_SINGULAR;else if(b("bs_caml_int64").eq(a,b("LSContactGender.bs").male))return b("GenderConst").MALE_SINGULAR;else if(b("bs_caml_int64").eq(a,b("LSContactGender.bs").neuter))return b("GenderConst").NEUTER_SINGULAR;else return b("GenderConst").NOT_A_PERSON}function n(a,c,d,e,f,h){var i=b("FBID.bs").ofStringExn(b("bs_int64").to_string(a.message.h));c=c.get(i);c=c==null?void 0:b("bs_caml_option").some(c);var j=a.message.l,n=a.message.p,o=a.message.o,p=a.message.n,q=a.message.q;if(n!==void 0)if(o!==void 0)if(p!==void 0)if(q!==void 0){n=n.split(",");var r=o.split(","),s=p.split(","),t=q.split(",");o=n.reduce(function(a,c,d){var e=b("MessageProfileRangeType.bs").ofString(b("bs_caml_array").get(t,d));e===b("MessageProfileRangeType").THREAD||e===b("MessageProfileRangeType").THREAD_ACTIVE?a.push({offset:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(s,d)),length:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(r,d)),entity:{__typename:"Profile",uri:"/messages/t/"+c,id:b("FBID.bs").ofStringExn(c)}}):e===b("MessageProfileRangeType").PROFILE&&a.push({offset:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(s,d)),length:b("bs_caml_format").caml_int_of_string(b("bs_caml_array").get(r,d)),entity:{__typename:"Profile",uri:"/"+c,id:b("FBID.bs").ofStringExn(c)}});return a},[])}else o=[];else o=[];else o=[];else o=[];p=a.reactions.find(function(a){return b("bs_int64").to_string(h)===a.actor_id});return{messageID:b("bs_caml_int64").eq(j,b("LSMessageSendStatusV2.bs").serverReceived)||b("bs_caml_int64").eq(j,b("LSMessageSendStatusV2.bs").sentOnly)?{TAG:1,_0:{threadId:a.message.a,messageId:a.message.e,timestamp:a.message.b}}:{TAG:0,_0:{threadId:a.message.a,offlineThreadingId:a.message.f}},reactions:l(a.reactions),author:b("bs_belt_Option").mapWithDefault(c,g._("Facebook User"),function(a){return a.name}),authorParticipantId:b("bs_int64").to_string(a.message.h),authorGender:m(b("bs_belt_Option").mapWithDefault(c,b("LSContactGender.bs").unknown,function(a){return a.gender})),authorPictureUrl:b("bs_belt_Option").map(c,function(a){return a.profile_picture_url}),authorProfileUrl:b("gkx")("1630108")?b("XCometProfileControllerRouteBuilder").buildURL({id:i}):void 0,text:a.message.g,ranges:o,status:k(a,f,d,e),timestamp:b("bs_caml_int64").to_float(a.message.b),isForwarded:b("MWLSParserUtils.bs").isForwarded(a),canRemoveGlobally:b("bs_belt_Option").mapWithDefault(a.message.N,!0,function(a){return b("bs_caml_int64").eq(a,b("LSMessageThreadUnsendabilityStatus.bs").canUnsend)}),selectedReaction:p!==void 0?p.reaction:void 0}}function o(a,c){a=a.message.g;if(a!==void 0&&a!=="")if(b("MWChatMessage.bs").isEmojiOnlyMessage(a))return{text:a,ranges:[],isForwarded:c.isForwarded,isEmojiOnly:!0};else return{text:a,ranges:b("bs_array").concat({hd:c.ranges,tl:{hd:b("MWChatMessage.bs").findRanges(a),tl:0}}),isForwarded:c.isForwarded,isEmojiOnly:!1}}function p(a,c,d,e,f,g,h){c=n(h,c,d,e,f,a);d=c.messageID;e=c.authorParticipantId;f=c.status;a=c.timestamp;var i=c.canRemoveGlobally;d={messageID:d,isSaved:!1,isPinned:!1,author:e,authorGender:b("GenderConst").MALE_SINGULAR,status:f,timestamp:a,canRemoveGlobally:i};e=c.reactions;f=c.selectedReaction;a={reactions:e,selectedReaction:f};if(h.message.m)i={TAG:1,_0:d,_1:{removedTimestamp:c.timestamp,authorName:c.author}};else{e=o(h,c);f=h.has_attachment||h.message.i!==void 0;if(e!==void 0)if(f){var j=b("MWLSAttachmentParser.bs").parseMessageWithAttachments(h,c,g);i=j!==void 0?{TAG:0,_0:d,_1:a,_2:{TAG:1,_0:j,_1:e}}:{TAG:2,_0:d}}else i={TAG:0,_0:d,_1:a,_2:{TAG:0,_0:e}};else if(f){j=b("MWLSAttachmentParser.bs").parseMessageWithAttachments(h,c,g);i=j!==void 0?{TAG:0,_0:d,_1:a,_2:{TAG:1,_0:j,_1:void 0}}:{TAG:2,_0:d}}else i={TAG:2,_0:d}}return[i,d]}function d(a,c,d,e){var f=i(c,a),g=j(c,a);return function(h){var i=p(a,c,f,g,d,e,h),j=i[0];if(!b("MWLSParserUtils.bs").isReplyToSomething(h))return{TAG:0,_0:j};switch(j.TAG|0){case 0:case 1:break;case 2:return{TAG:0,_0:j}}var k=b("MWLSMessageReplyParser.bs").getMessageReplyContent(h);if(k===void 0)return{TAG:0,_0:{TAG:2,_0:i[1]}};i=h.message.x;if(i!==void 0&&b("bs_caml_int64").eq(i,a))return{TAG:2,_0:k,_1:j};else return{TAG:1,_0:k,_1:j}}}f.idsAreSame=a;f.isBlocked=c;f.getGutterStatusForSendStatus=h;f.getlastReadTimestampMsExclViewer=i;f.getDeliveredWatermarkTimestampMsExclViewer=j;f.getGutterItemStatus=k;f.groupReactionsByEmoji=l;f.contactGenderToGenderConst=m;f.parseCommonProps=n;f.parseBody=o;f.parseMessageContent=p;f.makeParser=d}),null);
__d("MWLSMessageGroupsParser.bs",["invariant","FBID.bs","bs_curry","bs_int64","JSMap.bs","bs_caml_array","bs_caml_int64","bs_belt_Option","bs_caml_option","GenderConst","MWLSParserUtils.bs","MWLSMessageParser.bs","MessagingThreadType.bs","MWLSAttachmentParser.bs","MWLSMessageReplyParser.bs","MWLSMessageForwardParser.bs","MercuryThreadlistConstants"],(function(a,b,c,d,e,f,g){"use strict";function h(a,c){for(var d=0,e=a.length;d<e;++d)c.push(b("bs_caml_array").get(a,d));return c}function i(a,c){var d=b("bs_caml_int64").eq(a.message.h,c.contact_id);a=b("bs_caml_int64").le(a.message.b,c.read_watermark_timestamp_ms);if(d)return!0;else return a}function a(a,c,d){var e=Array.from(a.values()).filter(function(a){return b("bs_caml_int64").neq(a.contact_id,d)}),f=new Map();c.forEach(function(a){if(!b("MWLSMessageParser.bs").isBlocked(a)){e.forEach(function(c){var d=b("bs_int64").to_string(c.contact_id),e=f.get(d);if(e==null)if(i(a,c)){f.set(d,a);return}else return;else if(i(a,c)&&b("bs_caml_int64").gt(a.message.b,e.message.b)){f.set(d,a);return}else return});return}});var g=new Map();Array.from(f.entries()).forEach(function(c){var d=b("bs_belt_Option").getExn(b("bs_caml_option").nullable_to_opt(a.get(b("FBID.bs").ofStringExn(c[0]))));b("JSMap.bs").getOrMake(c[1].message.e,function(a){return[]},g).push({imageSrc:d.profile_picture_url,name:b("bs_belt_Option").getWithDefault(d.nickname,d.name),id:b("bs_int64").to_string(d.contact_id),gender:b("GenderConst").NOT_A_PERSON,timestamp:b("bs_caml_int64").to_float(d.read_action_timestamp_ms)})});return g}var j=1e3*60*60;function k(a){return b("bs_belt_Option").mapWithDefault(a.message.g,!1,function(a){return a.length>b("MercuryThreadlistConstants").MAX_CHARS_BEFORE_BREAK})}function l(a){if(b("MWLSParserUtils.bs").isReplyToSomething(a)||a.has_attachment||k(a))return!0;else return a.message.j}function m(a,c,d){if(c===void 0)return!0;var e=b("bs_caml_int64").to_float(a.message.b)-b("bs_caml_int64").to_float(c.message.b)>b("MercuryThreadlistConstants").GROUPING_THRESHOLD,f=b("MWLSParserUtils.bs").isForwarded(a),g=b("bs_int64").compare(a.message.h,c.message.h)===0;d=d!==void 0?b("bs_caml_int64").to_float(a.message.b)>d&&b("bs_caml_int64").to_float(c.message.b)<=d:!1;if(!g||e||f||l(a)||l(c))return!0;else return d}function n(a,c,d){a=b("bs_caml_int64").to_float(a.message.b);c=b("bs_belt_Option").mapWithDefault(c,0,function(a){return b("bs_caml_int64").to_float(a.message.b)});c=a-c>j;if(c)return h([{TAG:0,_0:a}],d);else return d}function o(a,c,d,e,f){if(c!==void 0&&e!==void 0&&b("bs_caml_int64").to_float(a.message.b)>e&&b("bs_caml_int64").to_float(c.message.b)<=e)return h([{TAG:2,_0:f}],d);else return d}function p(a,c,d,e,f){if(b("MWLSParserUtils.bs").isReplyToSomething(a))return b("MWLSMessageReplyParser.bs").getGroupTitleForReply(a);else if(b("MWLSParserUtils.bs").isForwarded(a))return b("MWLSMessageForwardParser.bs").getGroupTitleForForwardedMessage(a,d,c);else if(f&&!e)return b("bs_caml_option").some(c.author);else return}function q(a,c,d,e,f,g,h,i,j){j=a.map(b("bs_curry").__1(j));c=b("MWLSMessageParser.bs").parseCommonProps(b("bs_caml_array").get(a,0),c,d,e,f,g);d=p(b("bs_caml_array").get(a,0),c,g,h,i===b("MessagingThreadType.bs").group);return h?{TAG:4,_0:j,_1:d}:{TAG:3,_0:j,_1:d,_2:c.authorPictureUrl,_3:c.authorProfileUrl,_4:c.author}}function r(a,c,d,e,f,g){var h=a.has_attachment||a.message.i!==void 0;c=b("MWLSMessageParser.bs").parseCommonProps(a,c,d,e,f,b("bs_caml_int64").zero);d=b("bs_belt_Option").getWithDefault(a.message.g,"");e=[];f={text:d,ranges:e,isForwarded:!1,isEmojiOnly:!1};d=h?b("MWLSAttachmentParser.bs").parseMessageWithAttachments(a,c,g):void 0;return{TAG:1,_0:{TAG:0,_0:{messageID:c.messageID,isSaved:!1,isPinned:!1,author:c.authorParticipantId,authorGender:c.authorGender,status:c.status,timestamp:c.timestamp,canRemoveGlobally:c.canRemoveGlobally},_1:{reactions:void 0,selectedReaction:void 0},_2:d!==void 0?{TAG:1,_0:d,_1:f}:{TAG:0,_0:f}},_1:a.adminMsgCta}}function s(a,c,d,e,f,h,i){i.length>0||g(0,20093);var j=b("bs_caml_array").get(i,0),k=b("bs_caml_int64").eq(j.message.h,a),l=b("MWLSMessageParser.bs").getlastReadTimestampMsExclViewer(c,a),m=b("MWLSMessageParser.bs").getDeliveredWatermarkTimestampMsExclViewer(c,a);if(j.message.j)return r(j,c,l,m,d,h);else return q(i,c,l,m,d,a,k,f,e)}function c(a,b,c,d,e,f,g,i,j){var k=function(a){return s(d,b,c,f,e,j,a)};return a.reduce(function(b,c,d){var e=m(c,b.prev,g),f=d===(a.length-1|0);d===0&&(b.messageItems=n(c,b.prev,b.messageItems));if(b.currGroup.length>0&&e){d=k(b.currGroup);b.messageItems=d!==void 0?h([d],b.messageItems):b.messageItems;b.currGroup=[];b.messageItems=n(c,b.prev,b.messageItems);b.messageItems=o(c,b.prev,b.messageItems,g,i)}b.currGroup=h([c],b.currGroup);if(f){e=k(b.currGroup);b.messageItems=e!==void 0?h([e],b.messageItems):b.messageItems}return{prev:c,currGroup:b.currGroup,messageItems:b.messageItems}},{prev:void 0,currGroup:[],messageItems:[]}).messageItems}f.concat=h;f.getSeenHeads=a;f.dateBreakThresholdSec=j;f.isLongText=k;f.shouldBeStandalone=l;f.isInDifferentGroup=m;f.maybeAddDateBreakForNextGroup=n;f.maybeAddUnreadIndicatorForNextGroup=o;f.getGroupTitle=p;f.groupUserMessages=q;f.parseAdminMessage=r;f.makeGroupParser=s;f.parse=c}),null);
__d("MWLSRepliedToMessage.bs",["Promise","FBID.bs","bs_curry","bs_int64","React","MWLSActor.bs","SkytaleDB","bs_caml_int64","bs_caml_option","MWLSMessage.bs","promiseDone","SkytaleDBHook.bs","SkytaleDBQuery.bs","MWLSParticipant.bs","CancellationToken.bs","MWLSMessageParser.bs","CancellablePromise.bs","recoverableViolation","MWLSThreadDisplayContext.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function h(a,c){return b("SkytaleDBQuery.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("MWLSMessage.bs").getAllInOpenThread(a.threadId,c),{hd:a.timestamp,tl:{hd:a.messageId,tl:0}})).then(function(a){if(a!==void 0)return b("SkytaleDBQuery.bs").toArray(b("MWLSParticipant.bs").getAllInOpenThread(c,b("SkytaleDB").table(c,"contacts").asc,a.message.a)).then(function(c){c=c.reduce(function(a,c){return a.set(b("FBID.bs").ofStringExn(b("bs_int64").to_string(c.contact_id)),c)},new Map());return b("Promise").resolve([a,c])});else return b("Promise").resolve([a,new Map()])})}function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWLSActor.bs").useActor(void 0),e=b("MWLSThreadDisplayContext.bs").useHook(void 0);a=g.useState(function(){});var f=a[1],i=g.useCallback(function(a){return b("bs_curry")._1(f,function(a){})},[f]),j=g.useCallback(function(a){var g=b("CancellationToken.bs").make(void 0);if(typeof a==="number")return;if(!a.TAG)return;g=b("CancellablePromise.bs").ignoreFailed(void 0,b("CancellablePromise.bs").then_(g,function(a){var c=a[1],g=a[0];if(g!==void 0){a=b("MWLSMessageParser.bs").parseMessageContent(d,c,b("MWLSMessageParser.bs").getlastReadTimestampMsExclViewer(c,d),b("MWLSMessageParser.bs").getDeliveredWatermarkTimestampMsExclViewer(c,d),new Map(),e,g);var h=a[0];c=b("FBID.bs").ofString(b("bs_int64").to_string(g.message.h));if(c!==void 0){var i=b("bs_caml_option").valFromOption(c);b("bs_curry")._1(f,function(a){return{content:h,fromViewer:b("bs_caml_int64").eq(g.message.h,d),authorID:i}})}else b("recoverableViolation")("Encountered message author id which is not a fbid "+b("bs_int64").to_string(g.message.h),"messenger_privacy_web")}else b("recoverableViolation")("Tried to reply to a message that does not exist","messenger_privacy_web");return b("Promise").resolve(void 0)},h(a._0,c)));b("promiseDone")(g,void 0,void 0)},[c,f,d,e]);return[a[0],j,i]}f.useCurrentlyRepliedToMessage=a}),null);
__d("MWLSFetchMessagesPage.bs",["LS.bs","bs_curry","React","SkytaleDB","MWThreadKey.bs","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","LSMailboxIssueMessagesRangeQueryStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);return g.useCallback(function(e){b("promiseDone")(b("LSTransaction.bs").run(c,function(c){return(a!==void 0?window.Promise.resolve(a):b("SkytaleDBQuery.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"messages_ranges_v2__generated").desc,{hd:d,tl:0}))).then(function(a){if(a!==void 0)return b("LSMailboxIssueMessagesRangeQueryStoredProcedure")(d,a.b,e,b("bs_curry")._1(b("LS.bs").make,c));else return window.Promise.resolve(void 0)})},"readWrite"),void 0,void 0)},[c,d,a])}f.useFetchMessagesPage=a}),null);
__d("MWLSLoadOpenThreadMessages.bs",["bs_int64","React","MWLSActor.bs","SkytaleDB","bs_caml_int64","bs_caml_format","MWLSMessage.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","MWLSMessageParser.bs","MWThread_DEPRECATED.bs","SortedAsyncIterable.bs","MWLSMessageGroupsParser.bs","MWLSThreadDisplayContext.bs","LSMessagingThreadTypeUtil.bs","MWLSCurrentThreadParticipants.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a,c){var d=b("SkytaleDBHook.bs").useHook(void 0),e=b("MWThread_DEPRECATED.bs").useIdExn(void 0),f=b("MWThread_DEPRECATED.bs").toThreadKey(e),h=b("LSMessagingThreadTypeUtil.bs").ofThreadId(e),i=b("bs_int64").to_string(f),j=b("MWLSActor.bs").useActor(void 0),k=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(d,"messages_ranges_v2__generated").desc,{hd:f,tl:0}),function(a){return a.b})},[d,i])),l=b("SkytaleDBQuerySubscriptionHook.bs").useArray(g.useMemo(function(){if(k!==void 0)return b("MWLSMessage.bs").getAllInRangeStartingFrom(k,b("bs_caml_int64").mk(1316134911,2328),b("bs_caml_format").caml_int64_of_string(i),d);else return b("SortedAsyncIterable.bs").empty(void 0)},[i,JSON.stringify(k),d])),m=b("MWLSCurrentThreadParticipants.bs").useMWLSParticipantsMap(void 0),n=b("MWLSThreadDisplayContext.bs").useHook(void 0);return g.useMemo(function(){var d=b("MWLSMessageGroupsParser.bs").getSeenHeads(m,l,j);return b("MWLSMessageGroupsParser.bs").parse(l,m,d,j,h,b("MWLSMessageParser.bs").makeParser(j,m,d,n),a,c,n)},[l,m,JSON.stringify(j),h,n])}f.useMessageItems=a}),null);
__d("MWLSContactCapabilities.bs",["React","SkytaleDB","bs_belt_Option","LSBitOffset.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","LSContactCapabilityBitOffset.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"contacts").asc,{hd:a,tl:0}),function(a){return b("bs_belt_Option").getWithDefault(a.G,b("LSBitOffset.bs").empty)})},[JSON.stringify(a),c]);d=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(d);if(d!==void 0)return d;else return b("LSBitOffset.bs").empty}function c(a){return b("LSBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").verified,a)}f.useCapabilities=a;f.isVerified=c}),null);
__d("MWLSGetParticipantFbids.bs",["FBID.bs","bs_curry","bs_int64","React","SkytaleDB","SkytaleDBHook.bs","MWLSParticipant.bs","MWUIChatTabState.bs","MWThread_DEPRECATED.bs","SortedAsyncIterable.bs","LSMessagingThreadTypeUtil.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWUIChatTabState.bs").useTab(void 0);a=b("MWUIChatTabState.bs").useTokenProvider(void 0);var e=g.useMemo(function(){if(!d)return b("SortedAsyncIterable.bs").empty(void 0);var a=d._0,e=b("MWThread_DEPRECATED.bs").toThreadKey(a);a=b("LSMessagingThreadTypeUtil.bs").ofThreadId(a);var f=b("SkytaleDB").table(c,"contacts").asc;if(b("LSMessagingThreadTypeUtil.bs").isSecure(a))return b("MWLSParticipant.bs").getAllInSecureThread(c,f,e);else return b("MWLSParticipant.bs").getAllInOpenThread(c,f,e)},[c,d]);e=b("SkytaleDBQuerySubscriptionHook.bs").useArray(e);if(d)return e.map(function(a){return b("FBID.bs").ofStringExn(b("bs_int64").to_string(a.contact_id))});else return b("bs_curry")._1(a,void 0)}f.useHook=a}),null);
__d("MWLSThreadEmoji.bs",["React","SkytaleDB","bs_caml_option","MWThreadKey.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);a=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,{hd:d,tl:0}),function(a){return a.w})},[c,d]));if(a!==void 0)return b("bs_caml_option").valFromOption(a)}f.useEmoji=a}),null);
__d("MWLSThreadHasLeftGroup.bs",["React","bs_caml_obj","SkytaleDB","bs_belt_Option","bs_caml_option","MWThreadKey.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","bs_js_null_undefined","SkytaleDBQuerySubscriptionHook.bs","MessengerThreadCannotReplyReason","MessengerThreadCannotReplyReason.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);return b("bs_belt_Option").getWithDefault(b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,{hd:d,tl:0}),function(a){return b("bs_caml_obj").caml_equal(b("MessengerThreadCannotReplyReason.bs").fromName(b("bs_js_null_undefined").fromOption(a.v)),b("bs_caml_option").some(b("MessengerThreadCannotReplyReason").VIEWER_NOT_SUBSCRIBED))})},[c,d])),!1)}f.useHook=a}),null);
__d("MWLSThreadHeaderAttribution.bs",["SkytaleDB","bs_caml_format","SkytaleDBExec.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","MWLSThreadCapabilities.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0);c=b("SkytaleDBExec.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"contacts").asc,{hd:b("bs_caml_format").caml_int64_of_string(a),tl:0}));if(c!==void 0){a=c.K;c=a!==void 0&&c.h!==a?a:void 0}else c=void 0;a=b("MWLSThreadCapabilities.bs").canDisplayActorTypeInThreadViewHeader(b("MWLSThreadCapabilities.bs").useCapabilities(void 0));if(a)return c}f.useHook=a}),null);
__d("MWLSThreadMuteExpireTimeMs.bs",["React","SkytaleDB","bs_caml_int64","bs_belt_Option","MWThreadKey.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);return b("bs_belt_Option").getWithDefault(b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,{hd:d,tl:0}),function(a){return b("bs_caml_int64").to_float(a.l)})},[c,d])),0)}f.useHook=a}),null);
__d("MWLSThreadName.bs",["React","SkytaleDB","bs_caml_option","MWThreadKey.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","SkytaleDBQuerySubscriptionHook.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);a=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,{hd:d,tl:0}),function(a){return a.d})},[c,d]));if(a===void 0)return;a=b("bs_caml_option").valFromOption(a);if(a!==void 0)return a}f.useHook=a}),null);
__d("MWLSThreadReportingToken.bs",["bs_int64","React","MWThreadKey.bs","MWLSThreadCapabilities.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("MWLSThreadCapabilities.bs").useCapabilities(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);return g.useMemo(function(){if(b("MWLSThreadCapabilities.bs").canReportThread(c))return window.btoa("message_thread:"+b("bs_int64").to_string(d))},[c,d])}f.useHook=a}),null);
__d("MWLSUpdateParticipantNickname.bs",["LS.bs","bs_curry","React","bs_caml_format","bs_caml_option","MWThreadKey.bs","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","LSMailboxOptimisticUpdateThreadParticipantNicknameStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);return g.useMemo(function(){return function(a,e,f,g,h){a=b("LSTransaction.bs").run(c,function(a){return b("LSMailboxOptimisticUpdateThreadParticipantNicknameStoredProcedure")(d,b("bs_caml_format").caml_int64_of_string(e),f!==void 0?b("bs_caml_option").valFromOption(f):void 0,b("bs_curry")._1(b("LS.bs").make,a))},"readWrite");b("promiseDone")(a,void 0,void 0)}},[c,d])}f.useHook=a}),null);
__d("useMWUIPaymentDetailsDialog",["FBPayHubTransactionDetailDialog.entrypoint","useCometEntryPointDialog"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){return b("useCometEntryPointDialog")(b("FBPayHubTransactionDetailDialog.entrypoint"),{transactionID:a})}}),null);
__d("MWLSShowPaymentDetails.bs",["fbt","bs_curry","React","LSDatabaseType.bs","MWLSDatabaseLazySync.bs","useMWUIPaymentDetailsDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){a=h.useState(function(){return null});var c=a[1],d=a[0];a=h.useState(function(){return!1});var e=a[1],f=a[0];a=b("useMWUIPaymentDetailsDialog")(d);var i=a[0],j=b("MWLSDatabaseLazySync.bs").useSync(b("LSDatabaseType.bs").payments);h.useEffect(function(){!(d==null)&&f&&i({title:g._("Payment Details"),transactionID:d},function(a){return b("bs_curry")._1(e,function(a){return!1})})},[d,f]);return h.useMemo(function(){return function(a){b("bs_curry")._1(j,void 0);b("bs_curry")._1(e,function(a){return!0});return b("bs_curry")._1(c,function(b){return a})}},[e,c,j])}f.useHook=a}),null);
__d("MWLSQuickReplies.bs",["Promise","LS.bs","FBID.bs","bs_curry","bs_int64","React","MWLSActor.bs","SkytaleDB","bs_pervasives","bs_belt_Option","bs_caml_option","MWThreadKey.bs","promiseDone","LSMailboxType.bs","LSTransaction.bs","SkytaleDBHook.bs","MessagePowerUp.bs","SkytaleDBQuery.bs","bs_js_null_undefined","MessagingThreadType.bs","LSMessageReplySourceType.bs","LSMessageReplySourceTypeV2.bs","MWChatBusinessQuickReplyList.bs","SkytaleDBQuerySubscriptionHook.bs","LSMessagingThreadAttributionType.bs","LSMailboxOptimisticSendMessageStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function h(a){var c=a.lastMessageId,d=b("SkytaleDBHook.bs").useHook(void 0),e=b("MWThreadKey.bs").useIdMemoizedExn(void 0),f=b("MWLSActor.bs").useActor(void 0);a=b("SkytaleDBQuerySubscriptionHook.bs").useArray(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(d,"quick_reply_ctas").asc,{hd:e,tl:{hd:c,tl:0}}),function(a){var c=a.g,d;switch(c){case"quick_reply_email":d="user_email";break;case"quick_reply_phone":d="user_phone_number";break;case"quick_reply_text":d="text";break;default:d=b("bs_pervasives").failwith("Unexpeced quick-reply type")}return{content_type:d,data:void 0,image_url:b("bs_caml_option").some(b("bs_js_null_undefined").fromOption(a.f)),payload:b("bs_caml_option").some(a.h),title:a.e}})},[d,c,e]));if(a.length>0)return g.jsx(b("MWChatBusinessQuickReplyList.bs").make,{arrayQR:a,onSend:function(a){var c=b("LSTransaction.bs").run(d,function(c){var d=a.payload;if(d!==void 0){d=b("bs_caml_option").valFromOption(d);var g=d==null?void 0:b("bs_caml_option").some(d);d=d==null?void 0:g}else d=void 0;return b("LSMailboxOptimisticSendMessageStoredProcedure")(f,e,b("MessagingThreadType.bs").oneToOne,b("LSMailboxType.bs").messenger,a.title,void 0,!1,void 0,void 0,void 0,void 0,b("LSMessagingThreadAttributionType.bs").unknown,void 0,d!==void 0?b("bs_caml_option").valFromOption(d):void 0,void 0,b("LSMessageReplySourceType.bs").none,b("LSMessageReplySourceTypeV2.bs").none,void 0,!0,!0,void 0,void 0,b("MessagePowerUp.bs").none,void 0,b("bs_curry")._1(b("LS.bs").make,c)).then(function(a){return b("Promise").resolve(a)})},"readWrite");b("promiseDone")(c,void 0,void 0)},id:b("FBID.bs").ofStringExn(b("bs_int64").to_string(f))});else return null}function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);a=b("bs_belt_Option").getWithDefault(b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"messages").desc,{hd:d,tl:0}),function(a){return[a.J,a.e]})},[c,d])),[!1,""]);if(a[0])return g.jsx(h,{lastMessageId:a[1]});else return null}c=a;f.make=c}),null);
__d("MWLSSendOrRemoveReaction.bs",["LS.bs","ODS","bs_curry","React","MWLSActor.bs","bs_caml_int64","MWThreadKey.bs","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","LSMailboxOptimisticUpsertReactionStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0),e=b("MWLSActor.bs").useActor(void 0);return g.useCallback(function(a){return function(f,g){b("ODS").bumpEntityKey(3185,"mwchat_send","change_reaction");var h=b("LSTransaction.bs").run(c,function(c){return b("LSMailboxOptimisticUpsertReactionStoredProcedure")(d,b("bs_caml_int64").of_float(Date.now()),a,e,g?"":f,void 0,b("bs_curry")._1(b("LS.bs").make,c))},"readWrite");b("promiseDone")(h,void 0,void 0)}},[c,d,e])}f.useSendOrRemoveReaction=a}),null);
__d("MWLSOpenStaticLocationDialog.bs",["Promise","bs_int64","React","SkytaleDB","bs_caml_array","JSResource","bs_caml_option","MWThreadKey.bs","promiseDone","SkytaleDBExec.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","useCometLazyDialog"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);a=b("useCometLazyDialog")(b("JSResource")("MWChatStaticLocationDialog.react").__setRef("MWLSOpenStaticLocationDialog.bs"));var e=a[0];return g.useCallback(function(a){a=b("SkytaleDBQuery.bs").first(b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"attachments").asc,{hd:d,tl:{hd:a,tl:0}}),function(a){a=a.o;a=a!==void 0?a:b("bs_int64").zero;a=b("SkytaleDBExec.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"attachment_ctas").asc,{hd:a,tl:0}));if(a!==void 0)return a.j})).then(function(a){if(a!==void 0){a=b("bs_caml_option").valFromOption(a);a=a!==void 0?a:""}else a="";var c=b("bs_caml_array").get(a.split(","),0);a=b("bs_caml_array").get(a.split(","),1);e({latitude:c,longitude:a},function(a){});return b("Promise").resolve(void 0)});b("promiseDone")(a,void 0,void 0)},[c,d])}f.useHook=a}),null);
__d("LSInt64.bs",["bs_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_int64").compare;c=b("bs_int64").equal;d=b("bs_int64").to_string;f.compare=a;f.equal=c;f.string=d}),null);
__d("MessengerThreadThemeGradientType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=b("bs_caml_int64").mk(2,0);f.messageBubbleOutbound=a;f.messageBubbleInbound=c;f.threadviewBackground=d}),null);
__d("MWLSTheme.bs",["React","LSInt64.bs","MWTheme.bs","SkytaleDB","MWThreadKey.bs","SkytaleDBExec.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","SkytaleDBQuerySubscriptionHook.bs","MessengerThreadThemeGradientType.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function h(a,c){var d=a.a,e=a.d,f=b("MWTheme.bs").intToHex(a.c);a=a.e;if(c.length<2)return{TAG:0,_0:{id:d,color:f,label:a}};c=c.map(function(a){return b("MWTheme.bs").intToHex(a.c)});return{TAG:1,_0:{id:d,colors:c,fallback:f,label:a,reverse:e}}}function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0);a=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,{hd:d,tl:0}),function(a){a=a.z;if(a===void 0)return b("MWTheme.bs").$$default;var d=b("SkytaleDBExec.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"thread_themes").asc,{hd:a,tl:0}));a=b("SkytaleDBExec.bs").toArray(b("SkytaleDBQuery.bs").filter(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"gradient_colors").asc,{hd:a,tl:0}),function(a){return b("LSInt64.bs").equal(a.d,b("MessengerThreadThemeGradientType.bs").messageBubbleOutbound)}));if(d!==void 0)return h(d,a);else return b("MWTheme.bs").$$default})},[c,d]));if(a!==void 0)return a;else return b("MWTheme.bs").$$default}f.genTheme=h;f.useTheme=a}),null);
__d("MWLSSendTypingIndicator.bs",["LS.bs","bs_curry","React","bs_caml_obj","MWLSActor.bs","SkytaleDB","bs_caml_int64","bs_belt_Option","MWThreadKey.bs","promiseDone","LSTransaction.bs","SkytaleDBExec.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","MessagingThreadType.bs","SortedAsyncIterable.bs","LSMessagingThreadTypeUtil.bs","LSContactBlockedByViewerStatus.bs","MWChatViewerChatVisibilityHook","SkytaleDBQuerySubscriptionHook.bs","LSTypingSendTypingIndicatorStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c,d=b("MWChatViewerChatVisibilityHook")(),e=b("SkytaleDBHook.bs").useHook(void 0),f=b("MWThreadKey.bs").useIdMemoizedExn(void 0),h=b("MWLSActor.bs").useActor(void 0);a=b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(e,"threads").asc,{hd:f,tl:0})},[e,f]));var i=(c=b("bs_belt_Option")).map(a,function(a){return a.c}),j=c.getWithDefault(b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){if(b("bs_caml_obj").caml_equal(i,b("MessagingThreadType.bs").oneToOne))return b("SkytaleDBQuery.bs").map(b("SkytaleDBQuery.bs").filter(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(e,"participants").asc,{hd:f,tl:0}),function(a){return b("bs_caml_int64").neq(a.b,h)}),function(a){return b("bs_belt_Option").mapWithDefault(b("SkytaleDBExec.bs").first(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(e,"contacts").asc,{hd:a.b,tl:0})),!1,function(a){return b("bs_caml_int64").neq(a.n,b("LSContactBlockedByViewerStatus.bs").unblocked)})});else return b("SortedAsyncIterable.bs").empty(void 0)},[e,f,JSON.stringify(i),JSON.stringify(h)])),!1),k=c.mapWithDefault(a,!1,function(a){return b("LSMessagingThreadTypeUtil.bs").isGroup(a.c)}),l=c.isSome(a);return g.useCallback(function(a){if(!l)return;if(!(d&&!j))return;var c=b("LSTransaction.bs").run(e,function(c){return b("LSTypingSendTypingIndicatorStoredProcedure")(f,k,a,b("bs_curry")._1(b("LS.bs").make,c))},"readWrite");b("promiseDone")(c,void 0,void 0)},[e,d,l,f,k,j])}f.useHook=a}),null);
__d("MWLSUnsendMessage.bs",["LS.bs","bs_curry","React","promiseDone","LSTransaction.bs","SkytaleDBHook.bs","LSMailboxOptimisticUnsendMessageStoredProcedure"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("SkytaleDBHook.bs").useHook(void 0);return g.useCallback(function(a){b("promiseDone")(b("LSTransaction.bs").run(c,function(c){return b("LSMailboxOptimisticUnsendMessageStoredProcedure")(a,b("bs_curry")._1(b("LS.bs").make,c))},"readWrite"),void 0,void 0)},[c])}f.useUnsendMessage=a}),null);
__d("MWChatUnsendNUXReceiverBanner.bs",["ix","fbt","bs_curry","React","fbicon","JSResource","stylex","CometRow.react","TetraText.react","TetraButton.react","CometRowItem.react","TetraishSkittleIcon.react","CometLazyDialogTrigger.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=b("React"),k={button:{flexGrow:"buofh1pr",flexBasis:"rj1gh0hx"},imageRow:{paddingTop:"jwdofwj8"},card:{width:"k4urcfbm",position:"pmk7jnqg",zIndex:"tkr6xdv7",backgroundColor:"nred35xi",boxShadow:"rlauoc8d"}};function a(a){var c,d,e=a.onView;a=a.onDismiss;var f=h._("How Unsend Works"),l=h._("If unsent messages go against our Community Standards, they can still be included in a report.");return j.jsxs("div",{children:[j.jsxs(c=b("CometRow.react"),{paddingHorizontal:12,paddingTop:12,children:[j.jsx(d=b("CometRowItem.react"),{xstyle:k.imageRow,children:j.jsx(b("TetraishSkittleIcon.react"),{color:"gray",size:36,icon:b("fbicon")._(g("685851"),16)})}),j.jsxs(d,{expanding:!0,children:[j.jsx(c,{paddingHorizontal:0,paddingTop:0,children:j.jsx(d,{children:j.jsx(b("TetraText.react"),{color:"primary",type:"headline4",children:f})})}),j.jsx(c,{paddingHorizontal:0,paddingTop:8,children:j.jsx(d,{children:j.jsx(b("TetraText.react"),{color:"secondary",type:"body4",children:l})})})]})]}),j.jsxs(c,{paddingHorizontal:12,paddingTop:8,paddingVertical:12,wrap:"forward",children:[j.jsx(d,{xstyle:k.button,children:j.jsx(b("CometLazyDialogTrigger.react"),{dialogResource:b("JSResource")("MWChatUnsendNUXInterstitialDialog.react").__setRef("MWChatUnsendNUXReceiverBanner.bs"),dialogProps:{onClose:function(a){}},children:function(a,c){return j.jsx(b("TetraButton.react"),{label:h._("Learn More"),type:"secondary",onPress:function(c){b("bs_curry")._1(a,void 0);return b("bs_curry")._1(e,void 0)}})}})}),j.jsx(d,{xstyle:k.button,children:j.jsx(b("TetraButton.react"),{label:h._("OK"),type:"secondary",onPress:a})})]})],className:(i||(i=b("stylex")))(k.card)})}c=a;f.styles=k;f.make=c}),null);
__d("useMessengerUnsendNUX",["CometDismissFBNuxMutation","CometLogImpressionFBNuxMutation","CometRelay","React","RelayHooks","promiseDone","useMessengerUnsendNUXQuery.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i=g!==void 0?g:g=b("useMessengerUnsendNUXQuery.graphql");function a(a){var c=b("RelayHooks").useRelayEnvironment(),d=h.useCallback(function(d){b("promiseDone")(b("CometRelay").fetchQuery(c,i,{id:a}).toPromise(),function(a){a=(a=a==null?void 0:(a=a.nux)==null?void 0:a.should_show)!=null?a:!1;d(a)},null)},[c,a]),e=h.useCallback(function(){b("CometDismissFBNuxMutation").commit(c,a)},[c,a]),f=h.useCallback(function(){b("CometLogImpressionFBNuxMutation").commit(c,a)},[c,a]);return[d,e,f]}}),null);
__d("MWChatUnsendNUXReceiver.bs",["bs_curry","React","MWLSActor.bs","SkytaleDB","bs_caml_int64","bs_belt_Option","MWThreadKey.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","SortedAsyncIterable.bs","useMessengerUnsendNUX","MWChatUnsendNUXReceiverBanner.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function h(a){return Date.now()-b("bs_caml_int64").to_float(b("bs_belt_Option").getWithDefault(a.X,b("bs_caml_int64").zero))<=1e4}function a(a){var c=b("MWLSActor.bs").useActor(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0),e=b("SkytaleDBHook.bs").useHook(void 0);a=g.useState(function(){return!1});var f=a[1],i=a[0],j=g.useRef(!1),k=g.useRef(!1),l=g.useRef(void 0);a=b("useMessengerUnsendNUX")(8568);var m=a[2],n=a[1],o=a[0],p=g.useCallback(function(a){a=l.current;if(a!==void 0){b("bs_curry")._1(a,void 0);l.current=void 0;return}},[]);a=g.useCallback(function(a){k.current=!0;b("bs_curry")._1(n,void 0);b("bs_curry")._1(p,void 0);return b("bs_curry")._1(f,function(a){return!1})},[]);var q=g.useCallback(function(a){var c=!i&&!j.current;if(c&&h(a)){j.current=!0;return b("bs_curry")._1(o,function(a){j.current=!1;if(a)return b("bs_curry")._1(f,function(a){return!0});else{b("bs_curry")._1(p,void 0);k.current=!0;return}})}},[c,i]);g.useEffect(function(){if(k.current)return;else{l.current=b("SortedAsyncIterable.bs").subscribe(b("SkytaleDBQuery.bs").filter(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(e,"messages").asc,{hd:d,tl:0}),function(a){if(a.m)return b("bs_caml_int64").neq(a.h,c);else return!1}),function(a,c){if(typeof c==="number")return;else return b("bs_curry")._1(q,c._0)});return function(a){b("bs_curry")._1(p,void 0);if(i&&!k.current)return b("bs_curry")._1(m,void 0)}}},[i,q,d,p]);if(i)return g.jsx(b("MWChatUnsendNUXReceiverBanner.bs").make,{onView:a,onDismiss:a});else return null}c=8568;d=1e4;e=a;f.cNUX_ID=c;f.cTEN_SECONDS=d;f.isMessageUnsentInLastTenSeconds=h;f.make=e}),null);
__d("MWChatUnsendNUXSender.bs",["bs_curry","React","MWLSActor.bs","SkytaleDB","bs_caml_int64","JSResource","MWThreadKey.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","useCometLazyDialog","SortedAsyncIterable.bs","useMessengerUnsendNUX","MWChatUnsendNUXReceiver.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=b("MWLSActor.bs").useActor(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0),e=b("SkytaleDBHook.bs").useHook(void 0),f=g.useRef(!1),h=g.useRef(!1),i=g.useRef(!1),j=g.useRef(void 0);a=b("useMessengerUnsendNUX")(8598);var k=a[1],l=a[0],m=g.useCallback(function(a){a=j.current;if(a!==void 0){b("bs_curry")._1(a,void 0);j.current=void 0;return}},[]),n=g.useCallback(function(a){if(!i.current){i.current=!0;b("bs_curry")._1(m,void 0);return b("bs_curry")._1(k,void 0)}},[]);a=b("useCometLazyDialog")(b("JSResource")("MWChatUnsendNUXSenderDialog.react").__setRef("MWChatUnsendNUXSender.bs"));var o=a[0],p=g.useCallback(function(a){var c=!f.current&&!h.current;if(c&&b("MWChatUnsendNUXReceiver.bs").isMessageUnsentInLastTenSeconds(a)){f.current=!0;return b("bs_curry")._1(l,function(a){f.current=!1,a?(o({onView:n},function(a){}),h.current=!0):(b("bs_curry")._1(m,void 0),i.current=!0)})}},[c,m]);g.useEffect(function(){j.current=b("SortedAsyncIterable.bs").subscribe(b("SkytaleDBQuery.bs").filter(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(e,"messages").asc,{hd:d,tl:0}),function(a){if(a.m)return b("bs_caml_int64").eq(a.h,c);else return!1}),function(a,c){if(typeof c==="number")return;else return b("bs_curry")._1(p,c._0)});return m},[d,p,m]);return null}c=8598;d=a;f.cNUX_ID=c;f.make=d}),null);
__d("MWComposerXacDisclosureLoader.bs",["bs_int64","React","SkytaleDB","bs_belt_Option","MWThreadKey.bs","SkytaleDBHook.bs","SkytaleDBQuery.bs","LSAuthorityLevel.bs","MWLSThreadHasInstagramUsers.bs","SkytaleDBQuerySubscriptionHook.bs","MWComposerXacDisclosureRelay.react"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){a=a.size;var c=b("SkytaleDBHook.bs").useHook(void 0),d=b("MWThreadKey.bs").useIdMemoizedExn(void 0),e=JSON.stringify(d),f=b("bs_belt_Option").isSome(b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("SkytaleDBQuery.bs").filter(b("SkytaleDBQuery.bs").getKeyRange(b("SkytaleDB").table(c,"threads").asc,{hd:d,tl:0}),function(a){return b("bs_int64").compare(a.Z,b("LSAuthorityLevel.bs").authoritative)<0})},[e,c])));e=b("bs_belt_Option").isSome(b("SkytaleDBQuerySubscriptionHook.bs").useFirst(g.useMemo(function(){return b("MWLSThreadHasInstagramUsers.bs").query(c,d)},[e,c])));if(e)return g.jsx(b("MWComposerXacDisclosureRelay.react"),{isThreadInNullState:f,size:a});else return null}c=a;f.make=c}),null);